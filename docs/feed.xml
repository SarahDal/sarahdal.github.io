<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator><link href="https://sarahdal.github.io//feed.xml" rel="self" type="application/atom+xml" /><link href="https://sarahdal.github.io//" rel="alternate" type="text/html" /><updated>2025-04-21T18:27:43+01:00</updated><id>https://sarahdal.github.io//feed.xml</id><title type="html">Sarah Dalrymple</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><entry><title type="html">Emblehope Moor and Tarsetdale</title><link href="https://sarahdal.github.io//northumberland/2025/04/21/EmblehopeMoor.html" rel="alternate" type="text/html" title="Emblehope Moor and Tarsetdale" /><published>2025-04-21T00:00:00+01:00</published><updated>2025-04-21T00:00:00+01:00</updated><id>https://sarahdal.github.io//northumberland/2025/04/21/EmblehopeMoor</id><content type="html" xml:base="https://sarahdal.github.io//northumberland/2025/04/21/EmblehopeMoor.html">&lt;hr /&gt;

&lt;p&gt;I had wanted to go and look at Bastles and things in Redesdale for a while, so today I set off from &lt;a href=&quot;https://www.english-heritage.org.uk/visit/places/black-middens-bastle-house/history/&quot;&gt;Black Midden’s Bastle in Tarsetdale&lt;/a&gt;, on the edge of Kielder Forest and Redesdale. This is an area infamous for its bloody border history, with a cluster of Bastles (fortified farmhouses) dating from the 16th and early 17th century, around the Tarset Burn.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-11.jpg&quot; alt=&quot;a two story stone building. it has a doorway next to an external flight of stone stairs, which lead to another doorway. The only windows are two small square openings next to the upper window; the structure has no roof. It sits in muddy looking grass and behind it can be seen the ruins of another stone building.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Black Middens Bastle House&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here, I could easily walk uphill to join a bridleway along a rough road that would take me to near Ridley Shiel.&lt;/p&gt;

&lt;p&gt;Back in 2009 I found a route in a Cicerone guide, &lt;em&gt;Backpacker’s Britain: Northern England&lt;/em&gt;. In those days, the Forestry Comission had about a dozen “approved” wild camp sites that a few walks in this Cicerone guide used. One of these was a circular walk from Blakehopeburnhaugh, called “Emblehope Moor and the Redesdale Forest”.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-17.jpg&quot; alt=&quot;A view over rough moorland with long tussocky yellow grass downhill. On the other side of the valley are some forestry plantation, and a small house, Ridley Shiel, can just be made out.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A view towards Ridley Shiel&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;(Sidenote: Blakehopeburnhaugh is the longest placename in England, joint with Cottonshopeburnfoot. Both 19 letters long.. and next door to each other on the A68 near Byrness.)&lt;/p&gt;

&lt;p&gt;At 29km, it was a great walk, written by Graham Uney, although the book is out of print now (and you aren’t allowed to wild camp in Kielder any more), so I’ve uploaded the &lt;a href=&quot;https://out.ac/IYXhBe&quot;&gt;route to OutdoorActive&lt;/a&gt; for historical purposes.&lt;/p&gt;

&lt;p&gt;So I was quite interested to come across the same approved wild camp spot that I camped at in 2009. Back then, I had come in from a slightly different direction and got confused by exactly where the sites was. Passing by isolated Ridley Shiel, the resident called me over and offered me a cup of tea and a chat. Now the area around what was a sunny clearing 16 years ago is all felled, although the same footbridge crosses the burn by the ford.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/2009-camp.jpg&quot; alt=&quot;A photograph from 2009 of a small green tent in the sunshine, pitched in a small clearing near a wooden footbridge and surrounded by mature plantation woodland. The edge of a road that fords the stream can be seen at the bottom of the image..&quot; /&gt;&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-24.jpg&quot; alt=&quot;A wider view, taken in 2025, of the same location. The footbridge and ford can be seen, but now the landscape has been cleared of trees, apart from a few young ones and a distant plantation just over the horizon. Grass, heather and a small gorse shrub are where the woods and the clearing were.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Wild camping in 2009&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The same site in 2025&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;My planned route was to follow a bridleway through the forestry to the first of two of the “Named Stones” I wanted to look at. I found these Named Stones on the brilliant &lt;a href=&quot;https://archive.org/details/historyofberwick09berw&quot;&gt;website of the Heddon History Society&lt;/a&gt;, it being a list of “Named Stones of Northumberland” published in the early 1890s. Heddon History Society created a freely &lt;a href=&quot;https://heddonhistory.weebly.com/uploads/6/1/9/7/6197309/northumberlands_named_stones.kml&quot;&gt;downloadable KML of the stones&lt;/a&gt;, so now you too can locate all the named stones in the county. If you want.&lt;/p&gt;

&lt;p&gt;The bridleways through the forest should take me to one called The Greymare Stone, “Near old path junction on Graymare Moss, NE of Comb Hill. Now in Forest.” The old paths are gone now, (despite one being a Public Bridleway) having been planted over.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/greymare-old.jpg&quot; alt=&quot;a greyscale map from the 1st edition OS, so mid 19th century. two paths from the west join and then cross to the east, and are crossed by a path running north-south. On this path, north of the Junction is tmarked the Graymare stone. We can also see a point labelled &amp;quot;B.M.935.2&amp;quot; this is a boundary marker&quot; /&gt;&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/modern-os.jpg&quot; alt=&quot;A part of a modern OS map, green with forestry with white rides marked in. a single green bridleway crosses from south east to the north west, and an orange permissive footpath is further to the east.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1st edition OS map of Greymare Stone&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Modern OS of same Location&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-28.jpg&quot; alt=&quot;A wall of plantation forestry, too dense to enter.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;forestry where a bridleway should be&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;but I found a fairly open ride to trudge through&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-30.jpg&quot; alt=&quot;thick and tussocky yellow grass carpets the floor, with some tussocks of moss poking out. Either side are Sitka Spruce, about 4m tall.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;..and then a bit of scrabbling around in the soggy dense forest to find the Graymare Stone itself:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-32.jpg&quot; alt=&quot;in the dense forest surrounded by sitka spruce, a large, flat topped grey boulder. It has patches of moss and the soggy vegetation half swallows it, the top is fairly smooth with some indentations. It is about 2m across and rises perhaps 50cm out of the ground&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Graymare Stone&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Worth it. From here I wanted to follow the bridleway up onto Emblehope Moor, which involved more negotiation of thick forestry until I could find rides to walk down, until I finally had a last push through about 200m of dense, young plantation to reach the moor. Up here is the other named stone I wanted to see, “The Fairy’s Kirk”. A similar size, maybe 2m at it’s broadest, it lies in a suspicously conical depression, like a sinkhole or a pit.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-39.jpg&quot; alt=&quot;a grey boulder with white lichen lies in thick tussocky grass at the edge of a conical depression that can just be made out. In the distance are scattered sitka spruce.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The Fairy’s Kirk&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A search in the &lt;a href=&quot;https://namebooks.org.uk/browse/main/?OSref=421&amp;amp;Page=46.0&quot;&gt;Northumberland Name Book&lt;/a&gt; gives this unexpected info:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/namebook.jpg&quot; alt=&quot;A screenshot of part of a handwritten page about Fairy&apos;s Kirk, I have transcribed in the text below&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The relevant part from the Northumberland Name Book&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;List of Names as written on the Plan:
Fairys Kirk&lt;/p&gt;

  &lt;p&gt;Various modes of Spelling the same Names:
Fairys Kirk&lt;/p&gt;

  &lt;p&gt;Authority for those modes of Spelling:
Mr Robt Scott of The Comb,
Mr R. Thomson of the Comb,
Mr J. Thomson of Blackburn&lt;/p&gt;

  &lt;p&gt;Situation:
56 chains south east of Dummy’s Hole.&lt;/p&gt;

  &lt;p&gt;Descriptive Remarks, or other General Observations which may be considered of Interest:
A subterraneous passage on Comb Moor extending about fifteen yards from the entrance and having a space at the end about six feet square.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If you know Northumberland, this sounds a lot like the &lt;a href=&quot;https://fabulousnorth.com/cateran-hole/&quot;&gt;Cateran Hole!&lt;/a&gt; I wonder if it is worth investigating?&lt;/p&gt;

&lt;p&gt;Back to the walk, I had now reached Emblehope Moor, which is a huge and very remote expanse of moorland bordered almost entirely by Kielder Forest. I skirted round the edge, appreciating the view from Whiteheugh Crag, then followed the road to Emblehope Farm and finally south to re-enter the forest&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-42.jpg&quot; alt=&quot;a sweeping vista under the grey sky of yellowy moorland extending far to the opposite horizon. There are patches of plantation forestry and the odd tree; in the centre-distance the farmhouse can faintly be made out, surrounded by green in-bye fields.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Emblehope Moor, the farm is in the centre distance near the greener in-bye fields&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-53.jpg&quot; alt=&quot;The Tarset Burn flows away from the footbridge. it has been widened just ahead, possibly for stock access, and flows in a small U-shaped grassy valley. It is about 3 or 4m wide at this point&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Tarset Burn at Dummy’s Hole&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-62.jpg&quot; alt=&quot;A very overgrown track in the forest cuts through grass and is bordered by heather. Either side grown tall sitka trees&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Back into the forest&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;This time I stuck to the forest tracks rather than try to follow the non-existant bridleway. Eventually I found my way to the start of the &lt;a href=&quot;https://www.forestryengland.uk/sidwood/tarset-bastle-trail-kielder-forest&quot;&gt;Tarset Bastle Trail&lt;/a&gt;. You will notice the website says “trail closed”. There are no signs anywhere on the ground to explain this, so most of the route involved clambering over fallen trees and wading through knee-deep bog. But it also involved looking at Bastles, who doesn’t love a Bastle? Here’s Bog Head Bastle&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-68.jpg&quot; alt=&quot;the ruins of a 2 storey, squat stone building sit in boggy ground next to a bare tree in a forestry clearing.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Bog Head Bastle&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Back in 2009, the intepretation boards along the trail featured a legendary story of 2 of the men who lived in these Bastles - Corbit Jack and Barty Milburn. The story recounted here that Scottish thieves rode to Barty’s farm at Bog Head and nicked his sheep. When he woke up the next morning and discovered his sheep gone, he called over his neighbour Hodge Corbett aka Cobity Jack, who lived at Shilla Bastle. They set off after the rustlers, but lost the trail near Leathem just over the border. Rather than return empty handed, they just pinched some nearby sheep and set off for home, being caught up by a pair of angry Scotsmen at Chattlehope Spout where a fierce hand-to-hand battle ensued. Corbit Jack was killed and Barty wounded in the thigh, but he managed to slay the two Scots. He slung Corbit Jack’s body over his shoulder and set off for home with the stolen sheep, placing Jack on his doostep at Shilla before going home for the night. Later, recounting the fight to his friends Barty explained how he decapitated one of them and “His heid span alang the haither like an onion!”&lt;/p&gt;

&lt;p&gt;I cannot see the word “bastle” without thinking “His heid span alang the haither like an onion”&lt;/p&gt;

&lt;p&gt;The trail, apart from the bits that were covered with fallen trees, was really lovely, along the river and then up to Shilla Bastle on the hill before reaching the private houses that are the sites of two more bastles, Waterhead and Comb.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/emble/Emblehope-74.jpg&quot; alt=&quot;The ruins of another small stone building, only two or three courses high, poke out of the grass&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Shilla Bastle&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here I could continue on this side of the river to get back to Black Middens Bastle, but given the state of the rest of the trail I had zero confidence that the footbridge still existed, so I just followed the road back.&lt;/p&gt;

&lt;p&gt;This was a really great walk, and would be much improved if you don’t go offroading into thick forestry looking for novelty rocks, and if the Forestry Comission ever decide to sort out the Tarset Bastle Trail so you can actually follow it. As it is.. I don’t recommend, but it might be worth going to poke around the Fairy’s Kirk?&lt;/p&gt;

&lt;div id=&quot;leaflet-map-ffabf3872e419d5045141cdedc004c15&quot; class=&quot;leaflet-map&quot;&gt;&lt;/div&gt;
&lt;script&gt;(() =&gt; {
// Specify configuration variables, setup any elements and styling
    var leafletCdn = &quot;https://unpkg.com/leaflet@1.6.0/dist/&quot;;
    var esriLeafletCdn = &quot;https://unpkg.com/esri-leaflet/dist/&quot;;

    // Get tag input arguments &amp; inside block object list
    var tagInputArg = { &quot;center&quot; : [55.224093,-2.3724563],
                 &quot;zoom&quot; : 12,
                 &quot;providerBasemap&quot;: &quot;OpenTopoMap&quot; } ;
    var blockLeafletItems = [
			{id: &quot;5cdd1643190aa6f7f6df171d126bd2e3&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.227476, &quot;longitude&quot; : -2.3592819, &quot;popupContent&quot; : &quot;Graymare Stone&quot;} },
			{id: &quot;1c441a46886602fbbac66d19a6266b75&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.220143, &quot;longitude&quot; : -2.3467511, &quot;popupContent&quot; : &quot;Wild Camp Site&quot;} },
			{id: &quot;c56c871d1bfd52cbba23d152f4a7ebd9&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.237339, &quot;longitude&quot; : -2.3723757, &quot;popupContent&quot; : &quot;Fairy Kirk&quot;} },
			{id: &quot;99a02cccb2b96cfa12c20fe3a0791efe&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.212579, &quot;longitude&quot; : -2.3763562, &quot;popupContent&quot; : &quot;Bog Head Bastle&quot;} },
			{id: &quot;085f63de699959606b6dc21518a02b12&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.207226, &quot;longitude&quot; : -2.3728330, &quot;popupContent&quot; : &quot;Shilla Hill Bastle&quot;} },
			{id: &quot;08f3d4728737d5bb65ba0c368c354d77&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.203622, &quot;longitude&quot; : -2.3579828, &quot;popupContent&quot; : &quot;Black Middens Bastle&quot;} },
              
    {id: &quot;542c333da66a63596d1b172fdb270ffd&quot;,
              type: &quot;LeafletGeoJSON&quot;,
              value: &quot;/assets/geojson/Emblehope.geojson&quot; },
];

    // Override the map div id if specified, apply default CSS
    var defaultMapElId = &quot;leaflet-map-ffabf3872e419d5045141cdedc004c15&quot;;
   var defaultMapElStyle = &quot;height:300px; margin-top:15px; margin-bottom:15px&quot;;
    var mapEl = document.getElementById(defaultMapElId);
    if(&apos;divId&apos; in tagInputArg){
        mapEl.id = tagInputArg[&apos;divId&apos;];
    }
    var defaultMapCssEl = document.createElement(&quot;style&quot;);
    defaultMapCssEl.innerHTML = 
        &quot;#&quot; + defaultMapElId + &quot;{&quot; + defaultMapElStyle + &quot;}&quot;;
    document.head.appendChild(defaultMapCssEl);

    var newWindowImgSrcBase64 = &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wUVFzAHq2j99AAAAV9JREFUSMdjYKAxYCRHk5ubG9+1a9fm/v//H6cadnb2G/fu3atlIceC379/c3z9+jUEn5q/f/8eYWBgYECxQE5OroqA2Y8ePXq0hJWV9Qc3N/caZB8wMjJKff361QpvEAkKCv4nYMGh9+/f26MLamhoyLx9+3b/nz9/VJCC6MiLFy9sWXCE3xlGRsZvWKQu4DOciYnpCzc396HPnz97weRxWRD/8OHDa4TiAt1wfn5+z79//zoxMDDALWAiN/lhM/zevXtH0NUx0dJwsiwgxXCccUCJ4dzc3DP+//+/gZ2d/duLFy9Is+Djx4+rCbn82rVrrxgYGF6RFUR8fHyZbGxsD7AZLiEhUSAiIrJSUlIyjOw4uHnz5gVHR0d1bC7/8+eP5d+/f8P+/PmjS1Ekr1ix4hcp6ploXVwPfQuwJlMmJiYBLS0tIVIMev36NRvRFnz48OHohw8fhkYQjQKCAAChiL6Pj/LM2QAAAABJRU5ErkJggg==&quot;;

// Actual mapping section; Specify a function to be called later that 
// assembles the correct JS components based on what the user specified in the 
// tag input arg, the block section of features, etc. Actually creates the map
// that is visible on the page

    function _getCenter(){
        var defaultCenter = [0,0];
        if(&quot;center&quot; in tagInputArg){
            return tagInputArg.center;
        } else {
            return defaultCenter;
        }
    }

    function _getZoom(){
        var defaultZoom = 1;
        if(&quot;zoom&quot; in tagInputArg){
            return tagInputArg.zoom
        } else {
            return defaultZoom;
        }
    }

    function _getProviderBasemap(){
        var defaultProviderBasemap = &quot;OpenStreetMap.Mapnik&quot;;
        if(&quot;providerBasemap&quot; in tagInputArg){
            return tagInputArg.providerBasemap;
        } else {
            return defaultProviderBasemap;
        }
    }


    function _addMarkerToMap(leafletItem, map){
        var m = leafletItem.value;
        var result = L.marker([m.latitude, m.longitude]).addTo(map);
        var potentialPopup = &quot;&quot;;
        if(&apos;popupContent&apos; in m){
                potentialPopup += m.popupContent;}
        if(&apos;href&apos; in m){
            potentialPopup += &apos;&lt;a href=&quot;&apos; + m.href + &apos;&quot;&gt;&apos; + 
                &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            result.bindPopup(potentialPopup);}
        if(!(&apos;center&apos; in tagInputArg)){
            // If the user didn&apos;t specify a center, infer from marker
            map.panTo(new L.LatLng(m.latitude, m.longitude));
        }
    }

    function _onEachFeature(feature, layer){
        var potentialPopup = &quot;&quot;
        if(feature.properties &amp;&amp; feature.properties.popupContent){
            potentialPopup += feature.properties.popupContent;
        }
        if(feature.properties &amp;&amp; feature.properties.href){
            potentialPopup += 
                &apos;&lt;a href=&quot;&apos; + feature.properties.href + &apos;&quot;&gt;&apos; + 
                    &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            layer.bindPopup(potentialPopup);
        }
    }

    function _addGeoJSONToMap(leafletItem, map){
        if(typeof leafletItem.value === &quot;string&quot;){
            fetch(leafletItem.value).then((resp) =&gt; {
                return resp.json();
            }).then((data) =&gt; {
                leafletItem.value = data;
                _addGeoJSONObjToMap(leafletItem, map);
            }).catch((err) =&gt; {
                console.log(&quot;Encountered err w/ geojson, attempting to fix..&quot;);
                console.log(err);
                _addGeoJSONObjToMap(leafletItem, map);
            });
        } else {
            _addGeoJSONObjToMap(leafletItem, map);
        }
     }

    function _addGeoJSONObjToMap(leafletItem, map){
         var geojson = L.geoJSON(leafletItem.value, { 
            onEachFeature: _onEachFeature 
        });
        layers = geojson.getLayers();
        for(var i=0; i&lt;layers.length; i++){
            try{
                var geom = layers[i].feature.geometry;
                if(!(&apos;center&apos; in tagInputArg)){
                    // If the user didn&apos;t specify a center, infer from geojson
                    //console.log(&quot;panning to &quot; + geom.coordinates);
                    map.panTo(new L.LatLng(geom.coordinates[1],
                                           geom.coordinates[0]));
                }
            } catch(e){}
        }
       
        geojson.addTo(map);
       
    }

    function _processLeafletItem(leafletItem, map){
        switch(leafletItem.type){
            case &quot;LeafletMarker&quot;:
                _addMarkerToMap(leafletItem, map);
                break;
            case &quot;LeafletGeoJSON&quot;:
                _addGeoJSONToMap(leafletItem, map);
                break;
            case undefined:
                break; 
            default:
                console.log(&quot;Couldn&apos;t add item &quot; + leafletItem.id);
                break;
        }
    }

//The actual section that is called that creates a map
    function createMap(){
        console.log(&quot;Creating map ffabf3872e419d5045141cdedc004c15 with these args:&quot;);
        console.log(tagInputArg);

        //Initialize Map with the correct input arguments
        var map = L.map(mapEl.id, 
            {worldCopyJump: true}).setView(_getCenter(), _getZoom());
        L.tileLayer.provider(_getProviderBasemap()).addTo(map);
        if(&quot;esriBasemap&quot; in tagInputArg){
            L.esri.basemapLayer(tagInputArg.esriBasemap).addTo(map);
        }

        //process each Leaflet Item passed in between the block tag middle
        for(var i=0; i&lt;blockLeafletItems.length; i++){
            var leafletItem = blockLeafletItems[i];
            console.log(&quot;Adding leaflet item &quot; + leafletItem.id + &quot;:&quot;);
            console.log(leafletItem);
            _processLeafletItem(leafletItem, map);
        }
    }

// Load the correct JS libraries/CSS by adding to head: 
// When ready, call createMap() to create the map on the page

    function _createMap(){
        // helper function to draw the map only when everything is loaded,
        // safeguards against multiple calls to window.onload
        var prevOnLoad;
        if(window.onload){
            prevOnLoad = window.onload;
        }
        window.onload = () =&gt; {
            createMap();
            if(prevOnLoad){
                prevOnLoad();
            }
        }
    }

    var leafletCssId = &quot;leaflet-css-head&quot;;
    var leafletJsId = &quot;leaflet-js-head&quot;;
    var esriLeafletJsId = &quot;esri-leaflet-js-head&quot;;
    var leafletProvidersJsId = &quot;leaflet-providers-js-head&quot;;

    // Add the leaflet CSS first, don&apos;t worry about when it loads
    var leafletCssEl = document.createElement(&quot;link&quot;);
    leafletCssEl.id = leafletCssId;
    leafletCssEl.rel = &quot;stylesheet&quot;;
    leafletCssEl.href = leafletCdn + &quot;leaflet.css&quot;;
    if(!document.getElementById(leafletCssEl.id)){
        document.head.appendChild(leafletCssEl);
    }

    function addToHeadIfNotLoaded(el) {
        //Add the el to the head if it doesn&apos;t exist already. If it does,
        //everything we need is already loaded, so draw the map
        if(!document.getElementById(el.id)){
            document.head.appendChild(el);
        } else {
            _createMap();
        }
    }

    // Load the main leaflet.js code, wait for it to load
    var leafletJsEl = document.createElement(&quot;script&quot;);
    leafletJsEl.id = leafletJsId;
    leafletJsEl.onload = () =&gt; {
        //After loaded, load the esri-leaflet.js code, wait for it to load
        var esriEl = document.createElement(&quot;script&quot;);
        esriEl.id = esriLeafletJsId;
        esriEl.onload = () =&gt; {
            //After loaded, add the inline leaflet-providers &lt;script&gt;
            provEl = document.createElement(&quot;script&quot;);
            provEl.id = leafletProvidersJsId;
            provEl.innerHTML = `//Taken from https://github.com/leaflet-extras/leaflet-providers
(function (root, factory) {
	if (typeof define === &apos;function&apos; &amp;&amp; define.amd) {
		// AMD. Register as an anonymous module.
		define([&apos;leaflet&apos;], factory);
	} else if (typeof modules === &apos;object&apos; &amp;&amp; module.exports) {
		// define a Common JS module that relies on &apos;leaflet&apos;
		module.exports = factory(require(&apos;leaflet&apos;));
	} else {
		// Assume Leaflet is loaded into global object L already
		factory(L);
	}
}(this, function (L) {
	&apos;use strict&apos;;

	L.TileLayer.Provider = L.TileLayer.extend({
		initialize: function (arg, options) {
			var providers = L.TileLayer.Provider.providers;

			var parts = arg.split(&apos;.&apos;);

			var providerName = parts[0];
			var variantName = parts[1];

			if (!providers[providerName]) {
				throw &apos;No such provider (&apos; + providerName + &apos;)&apos;;
			}

			var provider = {
				url: providers[providerName].url,
				options: providers[providerName].options
			};

			// overwrite values in provider from variant.
			if (variantName &amp;&amp; &apos;variants&apos; in providers[providerName]) {
				if (!(variantName in providers[providerName].variants)) {
					throw &apos;No such variant of &apos; + providerName + &apos; (&apos; + variantName + &apos;)&apos;;
				}
				var variant = providers[providerName].variants[variantName];
				var variantOptions;
				if (typeof variant === &apos;string&apos;) {
					variantOptions = {
						variant: variant
					};
				} else {
					variantOptions = variant.options;
				}
				provider = {
					url: variant.url || provider.url,
					options: L.Util.extend({}, provider.options, variantOptions)
				};
			}

			// replace attribution placeholders with their values from toplevel provider attribution,
			// recursively
			var attributionReplacer = function (attr) {
				if (attr.indexOf(&apos;{attribution.&apos;) === -1) {
					return attr;
				}
				return attr.replace(/\{attribution.(\w*)\}/g,
					function (match, attributionName) {
						return attributionReplacer(providers[attributionName].options.attribution);
					}
				);
			};
			provider.options.attribution = attributionReplacer(provider.options.attribution);

			// Compute final options combining provider options with any user overrides
			var layerOpts = L.Util.extend({}, provider.options, options);
			L.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);
		}
	});

	/**
	 * Definition of providers.
	 * see http://leafletjs.com/reference.html#tilelayer for options in the options map.
	 */

	L.TileLayer.Provider.providers = {
		OpenStreetMap: {
			url: &apos;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&apos;
			},
			variants: {
				Mapnik: {},
				DE: {
					url: &apos;https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18
					}
				},
				CH: {
					url: &apos;https://tile.osm.ch/switzerland/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18,
						bounds: [[45, 5], [48, 11]]
					}
				},
				France: {
					url: &apos;https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 20,
						attribution: &apos;&amp;copy; Openstreetmap France | {attribution.OpenStreetMap}&apos;
					}
				},
				HOT: {
					url: &apos;https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png&apos;,
					options: {
						attribution:
							&apos;{attribution.OpenStreetMap}, &apos; +
							&apos;Tiles style by &lt;a href=&quot;https://www.hotosm.org/&quot; target=&quot;_blank&quot;&gt;Humanitarian OpenStreetMap Team&lt;/a&gt; &apos; +
							&apos;hosted by &lt;a href=&quot;https://openstreetmap.fr/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap France&lt;/a&gt;&apos;
					}
				},
				BZH: {
					url: &apos;https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png&apos;,
					options: {
						attribution: &apos;{attribution.OpenStreetMap}, Tiles courtesy of &lt;a href=&quot;http://www.openstreetmap.bzh/&quot; target=&quot;_blank&quot;&gt;Breton OpenStreetMap Team&lt;/a&gt;&apos;,
						bounds: [[46.2, -5.5], [50, 0.7]]
					}
				}
			}
		},
		OpenSeaMap: {
			url: &apos;https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openseamap.org&quot;&gt;OpenSeaMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenPtMap: {
			url: &apos;http://openptmap.org/tiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openptmap.org&quot;&gt;OpenPtMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenTopoMap: {
			url: &apos;https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: {attribution.OpenStreetMap}, &lt;a href=&quot;http://viewfinderpanoramas.org&quot;&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=&quot;https://opentopomap.org&quot;&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenRailwayMap: {
			url: &apos;https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://www.OpenRailwayMap.org&quot;&gt;OpenRailwayMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenFireMap: {
			url: &apos;http://openfiremap.org/hytiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;http://www.openfiremap.org&quot;&gt;OpenFireMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		SafeCast: {
			url: &apos;https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 16,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://blog.safecast.org/about/&quot;&gt;SafeCast&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		Thunderforest: {
			url: &apos;https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}&apos;,
			options: {
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;http://www.thunderforest.com/&quot;&gt;Thunderforest&lt;/a&gt;, {attribution.OpenStreetMap}&apos;,
				variant: &apos;cycle&apos;,
				apikey: &apos;&lt;insert your api key here&gt;&apos;,
				maxZoom: 22
			},
			variants: {
				OpenCycleMap: &apos;cycle&apos;,
				Transport: {
					options: {
						variant: &apos;transport&apos;
					}
				},
				TransportDark: {
					options: {
						variant: &apos;transport-dark&apos;
					}
				},
				SpinalMap: {
					options: {
						variant: &apos;spinal-map&apos;
					}
				},
				Landscape: &apos;landscape&apos;,
				Outdoors: &apos;outdoors&apos;,
				Pioneer: &apos;pioneer&apos;
			}
		},
		OpenMapSurfer: {
			url: &apos;https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				variant: &apos;roads&apos;,
				attribution: &apos;Imagery from &lt;a href=&quot;http://giscience.uni-hd.de/&quot;&gt;GIScience Research Group @ University of Heidelberg&lt;/a&gt; | Map data &apos;
			},
			variants: {
				Roads: {
					options: {
						variant: &apos;roads&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				Hybrid: {
					options: {
						variant: &apos;hybrid&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				AdminBounds: {
					options: {
						variant: &apos;adminb&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				ContourLines: {
					options: {
						variant: &apos;asterc&apos;,
						maxZoom: 18,
						minZoom: 13,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;&apos;
					}
				},
				Hillshade: {
					options: {
						variant: &apos;asterh&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;, &lt;a href=&quot;http://srtm.csi.cgiar.org/&quot;&gt;SRTM&lt;/a&gt;&apos;
					}
				},
				ElementsAtRisk: {
					options: {
						variant: &apos;elements_at_risk&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				}
			}
		},
		Hydda: {
			url: &apos;https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 18,
				variant: &apos;full&apos;,
				attribution: &apos;Tiles courtesy of &lt;a href=&quot;http://openstreetmap.se/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap Sweden&lt;/a&gt; &amp;mdash; Map data {attribution.OpenStreetMap}&apos;
			},
			variants: {
				Full: &apos;full&apos;,
				Base: &apos;base&apos;,
				RoadsAndLabels: &apos;roads_and_labels&apos;
			}
		},
		MapBox: {
			url: &apos;https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}{r}.png?access_token={accessToken}&apos;,
			options: {
				attribution:
					&apos;&lt;a href=&quot;https://www.mapbox.com/about/maps/&quot; target=&quot;_blank&quot;&gt;&amp;copy; Mapbox&lt;/a&gt; &apos; +
					&apos;{attribution.OpenStreetMap} &apos; +
					&apos;&lt;a href=&quot;https://www.mapbox.com/map-feedback/&quot; target=&quot;_blank&quot;&gt;Improve this map&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				id: &apos;mapbox.streets&apos;,
				accessToken: &apos;&lt;insert your access token here&gt;&apos;,
			}
		},
		Stamen: {
			url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}&apos;,
			options: {
				attribution:
					&apos;Map tiles by &lt;a href=&quot;http://stamen.com&quot;&gt;Stamen Design&lt;/a&gt;, &apos; +
					&apos;&lt;a href=&quot;http://creativecommons.org/licenses/by/3.0&quot;&gt;CC BY 3.0&lt;/a&gt; &amp;mdash; &apos; +
					&apos;Map data {attribution.OpenStreetMap}&apos;,
				subdomains: &apos;abcd&apos;,
				minZoom: 0,
				maxZoom: 20,
				variant: &apos;toner&apos;,
				ext: &apos;png&apos;
			},
			variants: {
				Toner: &apos;toner&apos;,
				TonerBackground: &apos;toner-background&apos;,
				TonerHybrid: &apos;toner-hybrid&apos;,
				TonerLines: &apos;toner-lines&apos;,
				TonerLabels: &apos;toner-labels&apos;,
				TonerLite: &apos;toner-lite&apos;,
				Watercolor: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;watercolor&apos;,
						ext: &apos;jpg&apos;,
						minZoom: 1,
						maxZoom: 16
					}
				},
				Terrain: {
					options: {
						variant: &apos;terrain&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TerrainBackground: {
					options: {
						variant: &apos;terrain-background&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TopOSMRelief: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;toposm-color-relief&apos;,
						ext: &apos;jpg&apos;,
						bounds: [[22, -132], [51, -56]]
					}
				},
				TopOSMFeatures: {
					options: {
						variant: &apos;toposm-features&apos;,
						bounds: [[22, -132], [51, -56]],
						opacity: 0.9
					}
				}
			}
		},
		Esri: {
			url: &apos;https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}&apos;,
			options: {
				variant: &apos;World_Street_Map&apos;,
				attribution: &apos;Tiles &amp;copy; Esri&apos;
			},
			variants: {
				WorldStreetMap: {
					options: {
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012&apos;
					}
				},
				DeLorme: {
					options: {
						variant: &apos;Specialty/DeLorme_World_Base_Map&apos;,
						minZoom: 1,
						maxZoom: 11,
						attribution: &apos;{attribution.Esri} &amp;mdash; Copyright: &amp;copy;2012 DeLorme&apos;
					}
				},
				WorldTopoMap: {
					options: {
						variant: &apos;World_Topo_Map&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community&apos;
					}
				},
				WorldImagery: {
					options: {
						variant: &apos;World_Imagery&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community&apos;
					}
				},
				WorldTerrain: {
					options: {
						variant: &apos;World_Terrain_Base&apos;,
						maxZoom: 13,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: USGS, Esri, TANA, DeLorme, and NPS&apos;
					}
				},
				WorldShadedRelief: {
					options: {
						variant: &apos;World_Shaded_Relief&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: Esri&apos;
					}
				},
				WorldPhysical: {
					options: {
						variant: &apos;World_Physical_Map&apos;,
						maxZoom: 8,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: US National Park Service&apos;
					}
				},
				OceanBasemap: {
					options: {
						variant: &apos;Ocean_Basemap&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri&apos;
					}
				},
				NatGeoWorldMap: {
					options: {
						variant: &apos;NatGeo_World_Map&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC&apos;
					}
				},
				WorldGrayCanvas: {
					options: {
						variant: &apos;Canvas/World_Light_Gray_Base&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; Esri, DeLorme, NAVTEQ&apos;
					}
				}
			}
		},
		OpenWeatherMap: {
			url: &apos;http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data &amp;copy; &lt;a href=&quot;http://openweathermap.org&quot;&gt;OpenWeatherMap&lt;/a&gt;&apos;,
				apiKey:&apos;&lt;insert your api key here&gt;&apos;,
				opacity: 0.5
			},
			variants: {
				Clouds: &apos;clouds&apos;,
				CloudsClassic: &apos;clouds_cls&apos;,
				Precipitation: &apos;precipitation&apos;,
				PrecipitationClassic: &apos;precipitation_cls&apos;,
				Rain: &apos;rain&apos;,
				RainClassic: &apos;rain_cls&apos;,
				Pressure: &apos;pressure&apos;,
				PressureContour: &apos;pressure_cntr&apos;,
				Wind: &apos;wind&apos;,
				Temperature: &apos;temp&apos;,
				Snow: &apos;snow&apos;
			}
		},
		HERE: {
			/*
			 * HERE maps, formerly Nokia maps.
			 * These basemaps are free, but you need an API key. Please sign up at
			 * https://developer.here.com/plans
			 */
			url:
				&apos;https://{s}.{base}.maps.api.here.com/maptile/2.1/&apos; +
				&apos;{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?&apos; +
				&apos;app_id={app_id}&amp;app_code={app_code}&amp;lg={language}&apos;,
			options: {
				attribution:
					&apos;Map &amp;copy; 1987-&apos; + new Date().getFullYear() + &apos; &lt;a href=&quot;http://developer.here.com&quot;&gt;HERE&lt;/a&gt;&apos;,
				subdomains: &apos;1234&apos;,
				mapID: &apos;newest&apos;,
				&apos;app_id&apos;: &apos;&lt;insert your app_id here&gt;&apos;,
				&apos;app_code&apos;: &apos;&lt;insert your app_code here&gt;&apos;,
				base: &apos;base&apos;,
				variant: &apos;normal.day&apos;,
				maxZoom: 20,
				type: &apos;maptile&apos;,
				language: &apos;eng&apos;,
				format: &apos;png8&apos;,
				size: &apos;256&apos;
			},
			variants: {
				normalDay: &apos;normal.day&apos;,
				normalDayCustom: &apos;normal.day.custom&apos;,
				normalDayGrey: &apos;normal.day.grey&apos;,
				normalDayMobile: &apos;normal.day.mobile&apos;,
				normalDayGreyMobile: &apos;normal.day.grey.mobile&apos;,
				normalDayTransit: &apos;normal.day.transit&apos;,
				normalDayTransitMobile: &apos;normal.day.transit.mobile&apos;,
				normalNight: &apos;normal.night&apos;,
				normalNightMobile: &apos;normal.night.mobile&apos;,
				normalNightGrey: &apos;normal.night.grey&apos;,
				normalNightGreyMobile: &apos;normal.night.grey.mobile&apos;,
				normalNightTransit: &apos;normal.night.transit&apos;,
				normalNightTransitMobile: &apos;normal.night.transit.mobile&apos;,
				reducedDay: &apos;reduced.day&apos;,
				reducedNight: &apos;reduced.night&apos;,
				basicMap: {
					options: {
						type: &apos;basetile&apos;
					}
				},
				mapLabels: {
					options: {
						type: &apos;labeltile&apos;,
						format: &apos;png&apos;
					}
				},
				trafficFlow: {
					options: {
						base: &apos;traffic&apos;,
						type: &apos;flowtile&apos;
					}
				},
				carnavDayGrey: &apos;carnav.day.grey&apos;,
				hybridDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day&apos;
					}
				},
				hybridDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.mobile&apos;
					}
				},
				hybridDayTransit: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.transit&apos;
					}
				},
				hybridDayGrey: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.grey.day&apos;
					}
				},
				pedestrianDay: &apos;pedestrian.day&apos;,
				pedestrianNight: &apos;pedestrian.night&apos;,
				satelliteDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;satellite.day&apos;
					}
				},
				terrainDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day&apos;
					}
				},
				terrainDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day.mobile&apos;
					}
				}
			}
		},
		FreeMapSK: {
			url: &apos;http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg&apos;,
			options: {
				minZoom: 8,
				maxZoom: 16,
				subdomains: &apos;1234&apos;,
				bounds: [[47.204642, 15.996093], [49.830896, 22.576904]],
				attribution:
					&apos;{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 &lt;a href=&quot;http://freemap.sk&quot;&gt;Freemap.sk&lt;/a&gt;&apos;
			}
		},
		MtbMap: {
			url: &apos;http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png&apos;,
			options: {
				attribution:
					&apos;{attribution.OpenStreetMap} &amp;amp; USGS&apos;
			}
		},
		CartoDB: {
			url: &apos;https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;{attribution.OpenStreetMap} &amp;copy; &lt;a href=&quot;https://carto.com/attributions&quot;&gt;CARTO&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				maxZoom: 19,
				variant: &apos;light_all&apos;
			},
			variants: {
				Positron: &apos;light_all&apos;,
				PositronNoLabels: &apos;light_nolabels&apos;,
				PositronOnlyLabels: &apos;light_only_labels&apos;,
				DarkMatter: &apos;dark_all&apos;,
				DarkMatterNoLabels: &apos;dark_nolabels&apos;,
				DarkMatterOnlyLabels: &apos;dark_only_labels&apos;,
				Voyager: &apos;rastertiles/voyager&apos;,
				VoyagerNoLabels: &apos;rastertiles/voyager_nolabels&apos;,
				VoyagerOnlyLabels: &apos;rastertiles/voyager_only_labels&apos;,
				VoyagerLabelsUnder: &apos;rastertiles/voyager_labels_under&apos;
			}
		},
		HikeBike: {
			url: &apos;https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;{attribution.OpenStreetMap}&apos;,
				variant: &apos;hikebike&apos;
			},
			variants: {
				HikeBike: {},
				HillShading: {
					options: {
						maxZoom: 15,
						variant: &apos;hillshading&apos;
					}
				}
			}
		},
		BasemapAT: {
			url: &apos;https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Datenquelle: &lt;a href=&quot;https://www.basemap.at&quot;&gt;basemap.at&lt;/a&gt;&apos;,
				subdomains: [&apos;&apos;, &apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;],
				format: &apos;png&apos;,
				bounds: [[46.358770, 8.782379], [49.037872, 17.189532]],
				variant: &apos;geolandbasemap&apos;
			},
			variants: {
				basemap: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;geolandbasemap&apos;
					}
				},
				grau: &apos;bmapgrau&apos;,
				overlay: &apos;bmapoverlay&apos;,
				highdpi: {
					options: {
						variant: &apos;bmaphidpi&apos;,
						format: &apos;jpeg&apos;
					}
				},
				orthofoto: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;bmaporthofoto30cm&apos;,
						format: &apos;jpeg&apos;
					}
				}
			}
		},
		nlmaps: {
			url: &apos;https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png&apos;,
			options: {
				minZoom: 6,
				maxZoom: 19,
				bounds: [[50.5, 3.25], [54, 7.6]],
				attribution: &apos;Kaartgegevens &amp;copy; &lt;a href=&quot;kadaster.nl&quot;&gt;Kadaster&lt;/a&gt;&apos;
			},
			variants: {
				&apos;standaard&apos;: &apos;brtachtergrondkaart&apos;,
				&apos;pastel&apos;: &apos;brtachtergrondkaartpastel&apos;,
				&apos;grijs&apos;: &apos;brtachtergrondkaartgrijs&apos;,
				&apos;luchtfoto&apos;: {
					&apos;url&apos;: &apos;https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts/1.0.0/2016_ortho25/EPSG:3857/{z}/{x}/{y}.png&apos;,
				}
			}
		},
		NASAGIBS: {
			url: &apos;https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}&apos;,
			options: {
				attribution:
					&apos;Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System &apos; +
					&apos;(&lt;a href=&quot;https://earthdata.nasa.gov&quot;&gt;ESDIS&lt;/a&gt;) with funding provided by NASA/HQ.&apos;,
				bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],
				minZoom: 1,
				maxZoom: 9,
				format: &apos;jpg&apos;,
				time: &apos;&apos;,
				tilematrixset: &apos;GoogleMapsCompatible_Level&apos;
			},
			variants: {
				ModisTerraTrueColorCR: &apos;MODIS_Terra_CorrectedReflectance_TrueColor&apos;,
				ModisTerraBands367CR: &apos;MODIS_Terra_CorrectedReflectance_Bands367&apos;,
				ViirsEarthAtNight2012: {
					options: {
						variant: &apos;VIIRS_CityLights_2012&apos;,
						maxZoom: 8
					}
				},
				ModisTerraLSTDay: {
					options: {
						variant: &apos;MODIS_Terra_Land_Surface_Temp_Day&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				},
				ModisTerraSnowCover: {
					options: {
						variant: &apos;MODIS_Terra_Snow_Cover&apos;,
						format: &apos;png&apos;,
						maxZoom: 8,
						opacity: 0.75
					}
				},
				ModisTerraAOD: {
					options: {
						variant: &apos;MODIS_Terra_Aerosol&apos;,
						format: &apos;png&apos;,
						maxZoom: 6,
						opacity: 0.75
					}
				},
				ModisTerraChlorophyll: {
					options: {
						variant: &apos;MODIS_Terra_Chlorophyll_A&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				}
			}
		},
		NLS: {
			// NLS maps are copyright National library of Scotland.
			// http://maps.nls.uk/projects/api/index.html
			// Please contact NLS for anything other than non-commercial low volume usage
			//
			// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s
			//   z0-9  - 1:1m
			//  z10-11 - quarter inch (1:253440)
			//  z12-18 - one inch (1:63360)
			url: &apos;https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://geo.nls.uk/maps/&quot;&gt;National Library of Scotland Historic Maps&lt;/a&gt;&apos;,
				bounds: [[49.6, -12], [61.7, 3]],
				minZoom: 1,
				maxZoom: 18,
				subdomains: &apos;0123&apos;,
			}
		},
		JusticeMap: {
			// Justice Map (http://www.justicemap.org/)
			// Visualize race and income data for your community, county and country.
			// Includes tools for data journalists, bloggers and community activists.
			url: &apos;http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://www.justicemap.org/terms.php&quot;&gt;Justice Map&lt;/a&gt;&apos;,
				// one of &apos;county&apos;, &apos;tract&apos;, &apos;block&apos;
				size: &apos;county&apos;,
				// Bounds for USA, including Alaska and Hawaii
				bounds: [[14, -180], [72, -56]]
			},
			variants: {
				income: &apos;income&apos;,
				americanIndian: &apos;indian&apos;,
				asian: &apos;asian&apos;,
				black: &apos;black&apos;,
				hispanic: &apos;hispanic&apos;,
				multi: &apos;multi&apos;,
				nonWhite: &apos;nonwhite&apos;,
				white: &apos;white&apos;,
				plurality: &apos;plural&apos;
			}
		},
		Wikimedia: {
			url: &apos;https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;https://wikimediafoundation.org/wiki/Maps_Terms_of_Use&quot;&gt;Wikimedia&lt;/a&gt;&apos;,
				minZoom: 1,
				maxZoom: 19
			}
		},
		GeoportailFrance: {
			url: &apos;https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&amp;SERVICE=WMTS&amp;VERSION=1.0.0&amp;STYLE={style}&amp;TILEMATRIXSET=PM&amp;FORMAT={format}&amp;LAYER={variant}&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}&apos;,
			options: {
				attribution: &apos;&lt;a target=&quot;_blank&quot; href=&quot;https://www.geoportail.gouv.fr/&quot;&gt;Geoportail France&lt;/a&gt;&apos;,
				bounds: [[-75, -180], [81, 180]],
				minZoom: 2,
				maxZoom: 18,
				// Get your own geoportail apikey here : http://professionnels.ign.fr/ign/contrats/
				// NB : &apos;choisirgeoportail&apos; is a demonstration key that comes with no guarantee
				apikey: &apos;choisirgeoportail&apos;,
				format: &apos;image/jpeg&apos;,
				style : &apos;normal&apos;,
				variant: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;
			},
			variants: {
				parcels: {
					options : {
						variant: &apos;CADASTRALPARCELS.PARCELS&apos;,
						maxZoom: 20,
						style : &apos;bdparcellaire&apos;,
						format: &apos;image/png&apos;
					}
				},
				ignMaps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS&apos;,
				maps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;,
				orthos: {
					options: {
						maxZoom: 19,
						variant: &apos;ORTHOIMAGERY.ORTHOPHOTOS&apos;
					}
				}
			}
		},
		OneMapSG: {
			url: &apos;https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				variant: &apos;Default&apos;,
				minZoom: 11,
				maxZoom: 18,
				bounds: [[1.56073, 104.11475], [1.16, 103.502]],
				attribution: &apos;&lt;img src=&quot;https://docs.onemap.sg/maps/images/oneMap64-01.png&quot; style=&quot;height:20px;width:20px;&quot;/&gt; New OneMap | Map data &amp;copy; contributors, &lt;a href=&quot;http://SLA.gov.sg&quot;&gt;Singapore Land Authority&lt;/a&gt;&apos;
			},
			variants: {
				Default: &apos;Default&apos;,
				Night: &apos;Night&apos;,
				Original: &apos;Original&apos;,
				Grey: &apos;Grey&apos;,
				LandLot: &apos;LandLot&apos;
			}
		}
	};

	L.tileLayer.provider = function (provider, options) {
		return new L.TileLayer.Provider(provider, options);
	};

	return L;
}));
`;
            if(!document.getElementById(provEl.id)){
                 document.head.appendChild(provEl);        
            }
            _createMap();
            }
        esriEl.src = esriLeafletCdn + &quot;esri-leaflet.js&quot;;
        addToHeadIfNotLoaded(esriEl);
        };
    leafletJsEl.src = leafletCdn + &quot;leaflet.js&quot;;
    addToHeadIfNotLoaded(leafletJsEl);
})();
&lt;/script&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Map of route taken&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>sarah</name></author><category term="Northumberland" /><category term="walks" /><category term="northumberland" /><category term="history" /><summary type="html"></summary></entry><entry><title type="html">Cat Wheel Speedo 2</title><link href="https://sarahdal.github.io//home%20assistant/2025/03/30/Cat-speedo-2.html" rel="alternate" type="text/html" title="Cat Wheel Speedo 2" /><published>2025-03-30T00:00:00+00:00</published><updated>2025-03-30T00:00:00+00:00</updated><id>https://sarahdal.github.io//home%20assistant/2025/03/30/Cat-speedo-2</id><content type="html" xml:base="https://sarahdal.github.io//home%20assistant/2025/03/30/Cat-speedo-2.html">&lt;p&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/wheel/wheel1.jpg&quot; alt=&quot;a black cat with a yellow collar sits in an upright wheel about 1m high.&quot; width=&quot;75%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Previously I tried to write about how to set up a speedometer for a cat wheel &lt;a href=&quot;/arduino-esp32/2025/02/11/CatWheel.html&quot;&gt;using an ESP32, hall sensor and some magnets&lt;/a&gt;. I have now found a much easier way to get the speed into &lt;a href=&quot;https://www.home-assistant.io/&quot;&gt;Home Assistant&lt;/a&gt; via &lt;a href=&quot;https://esphome.io/&quot;&gt;ESPHome&lt;/a&gt;. If you use Home Assistant but don’t already use ESPhome, it’s a great and simple way to get DIY devices made with ESP32 boards into Home Assistant.&lt;/p&gt;

&lt;p&gt;As the cat wheel speedo runs on an ESP32, I realised that there’s probably a way to use ESPhome to do this. At first I attempted to get speed by using automations and helpers to try and calculate the speed by keeping a tally of change-of-state of the hall sensor, but it got ridiculously complicated and didn’t work, and then I saw that there’s a &lt;a href=&quot;https://esphome.io/components/sensor/pulse_counter.html&quot;&gt;pulse counter component&lt;/a&gt; in ESPHome that will keep track of a count of “pulses per minute”, simply registering each time the hall sensor activated as a pulse. This was much, much easier as now I had a speed value I just needed to convert to m/s.&lt;/p&gt;

&lt;p&gt;This is the YAML for the ESPHome running on the ESP32 that is attached to the wheel. 4 magnets around the edge of the wheel trigger the hall sensor when they pass, generating a “pulse” that is measured by the pulse counter. My hall sensor is connected to GPIO Pin 14 on the ESP32.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;sensor&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;platform&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pulse_counter&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;pin&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;GPIO14&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;wheel_counter&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;unit_of_measurement&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;m/s&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Cat&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Wheel&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Speed&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;icon&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;mdi:mdi-rotate-right&quot;&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;update_interval&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;1s&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;multiply&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.01167&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;cat&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;wheel&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;revolutions&quot;&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;unit_of_measurement&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;revs&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The distance between the magnets is 0.7m, so to convert from “pulses per minute” to “meters per second” I multiply it by 0.01167 (the result of (0.7 / 1 pulse) x (1 minute / 60 seconds)). You can also set the update_interval to whatever you want; ms values would give you a real-time speed which could look good if you then added in a physical display to the speedo too.&lt;/p&gt;

&lt;p&gt;Also here is the “total” value, which keeps a tally of the total number of pulses. I thought I could multiply it by 0.7 here and get a total distance travelled, but it’s an int and wouldn’t store the decimal, so it’s just a tally of the total number of times the magnets have triggered the hall sensor.&lt;/p&gt;

&lt;p&gt;Now to add in useful/fun entities, I created the following in Home Assistant’s config.yaml to get the distance travelled in metres:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;sensor&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Cat&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Wheel&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Total&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Distance&quot;&lt;/span&gt;        
      &lt;span class=&quot;na&quot;&gt;unique_id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cat_wheel_distance&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&apos;{{ (states(&apos;sensor.esp32_cam_cat_wheel_distance&apos;) | float * 0.7) | round(2) }}&apos; &lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;unit_of_measurement&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;m&quot;&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;device_class&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;distance&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Cat&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Wheel&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Daily&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Distance&quot;&lt;/span&gt;        
      &lt;span class=&quot;na&quot;&gt;unique_id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cat_wheel_day_distance&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&apos;{{ (states(&apos;sensor.daily_cat_wheel_distance&apos;) | float * 0.7) | round(2) }}&apos;&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;unit_of_measurement&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;m&quot;&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;device_class&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;distance&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here, I’m calculating a total distance and a daily distance by taking the “cat wheel distance” total and multiplying it by 0.7. It’s the same for both sensors, but for one of them is linked to a helper (Settings -&amp;gt; devices &amp;amp; services -&amp;gt; helpers) that resets the value at midnight.&lt;/p&gt;

&lt;p&gt;Also in the helpers section , you can create a Statistics Sensor that gives you the Max value for Cat Wheel Speed, and the time period (eg 1 day, or all time). Or average daily distance? Can you calculate how many calories the cat burns runnign on the wheel? How about rigging up a Home Assistant controlled treat dispenser that issues a dreamie every 50m?&lt;/p&gt;</content><author><name>sarah</name></author><category term="Home Assistant" /><summary type="html"></summary></entry><entry><title type="html">Nellie Herons Memorial</title><link href="https://sarahdal.github.io//northumberland/2025/03/02/Nellie-Herons-Memorial.html" rel="alternate" type="text/html" title="Nellie Herons Memorial" /><published>2025-03-02T00:00:00+00:00</published><updated>2025-03-02T00:00:00+00:00</updated><id>https://sarahdal.github.io//northumberland/2025/03/02/Nellie-Herons-Memorial</id><content type="html" xml:base="https://sarahdal.github.io//northumberland/2025/03/02/Nellie-Herons-Memorial.html">&lt;hr /&gt;

&lt;p&gt;(If you use a screen reader, image descriptions should now be in the “alt” tags but do let me know if this isn’t working)&lt;/p&gt;

&lt;p&gt;While looking for new walks, I found a book &lt;a href=&quot;https://archive.org/details/bestwalksinnorth0000duer&quot;&gt;Best Walks in Northumberland, by Frank Duerden&lt;/a&gt; and published in 1990, on Internet Archive. Although you can borrow the whole thing on Internet Archive, I bought a secondhand copy and chose this walk - Salter’s Road - because it didn’t look super interesting on the ground, a walk mostly along stream valleys and a bit of going over the top of moorland, so I was curious as to why it was one of the Best Walks in Northumberland.&lt;/p&gt;

&lt;p&gt;I was very wrong, the scenery was stunning, although spoilt a bit by the big tracks that have been put in along most of the bridleways. I also plotted the route on an OS map rather than try to follow Frank’s beautifully detailed, but probably a little outdated, hand-drawn route.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/nellie/Duerden.jpg&quot; alt=&quot;A scan of a hand drawn route map of a walk through trees and hills&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I followed the Salter’s Road out of Alnham again (thinking about planning a walk of the whole length of the Salter’s Road to Kirk Yetholm at some point soon), through the White Gate and across some boggy moorland. The wind really started picking up as I reached the shepherd’s cottage Ewartly Shank, where the path then dropped down to cross the Shank Burn, followed by a steep climb up a fairly new track.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/nellie/Hedge.jpg&quot; alt=&quot;A view over a broad valley of yellow grass and young saplings. in the foreground, the ground is boggy and crossed with a fence; the mid-distance holds some young broadleaf planting. Hills rise up in the distance to Hedgehope on the horizon.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Hedgehope in the distance, from the Shank Burn&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Once at the top I started descending into the head of the Breamish Valley, and it looked stunning. A shepherd on a quad bike stopped to chat and complain about the wind, which put me in a good mood too. Once at Low Bleakhope, I left the Salter’s Road and followed the tarmac road along the Breamish River, where it was a little more sheltered from the wind and almost warm in the sunshine.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/nellie/Bleakhope.jpg&quot; alt=&quot;A view down a narrow valley from high up. The grass is yellowy and tussocky; a reddish dirt track leads away on the right hand side of the picture, travelling down the valley which has patches of brown heather and at the bottom, steep banks to a burn. The track leads in the far distance to a cottage (Low Bleakhope) surrounded by conifer trees. Above it further hills rise to the blue sky&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A view down Salter’s Road to Low Bleakhope&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/nellie/Breamish.jpg&quot; alt=&quot;A steep-sided valley in the sunshine with a burn, the Breamish River, bubbling and crashing over rocks. A narrow road runs alongside it, with telegraph poles every so often.&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The Breamish River at Snuffies Scar&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;After lunch by the river and another 3 miles, I reached Alnhamoor and turned to climb back up onto the moors, stopping briefly at Cobden, where the first OS Map marks as “in Ruins” but there’s nothing here now except a badly wind-blown plantation. I followed the track up until I spotted the memorial stone for Nellie Heron, a small carved stone surrounded by a pile of rocks.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/nellie/NellieHeron2.jpg&quot; alt=&quot;A small square sided stone, covered with lichen and with stones around it&apos;s base stands in the grass. It is roughly carved with &amp;quot;Eleanor Heron Died Dec 1863&amp;quot;&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Eleanor Heron’s Memorial Stone&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Eleanor (Nellie) Heron was tending to a sick shepherd in Alnham on 3 December, 1862. At 3pm she set off for home, despite the pleas of two of her friends not to risk it in the dreadful weather. Sadly she never made it; her frozen body was found at this spot.&lt;/p&gt;

&lt;p&gt;“The grief of the two was great when they saw her mount the hills in the blinding drift of snow, singing in her cheery and resounding voice the popular revival hymn of the time “A Day’s March Nearer Home”, never to be seen alive again but buried in the drift.” (from &lt;a href=&quot;http://www.alnandbreamishlhs.org.uk/uploads/pdf/R&amp;amp;R%20Volume%202%20No%2010%20(Dec%202013)%20complete.pdf&quot;&gt;Records &amp;amp; Recollections&lt;/a&gt;, the newsletter of the Aln &amp;amp; Breamish Local History Society)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/nellie/NellieHeron1.jpg&quot; alt=&quot;Nellie Heron&apos;s memorial stone can be seen as the only feature in a vast expanse of yellowy moorland grass, stretching off to the horizon&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Eleanor Heron’s Memorial Stone stands in the moorland&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The small stone feels very small indeed when surrounded by such a vast expanse of bleak moorland, let alone what it must have been like as darkness fell on a snowy December night. The spot lies less than a mile from the Shepherd’s Cairn, where Jock Scott and Willie Middlemas lost their lives in a blizzard 100 years later, that &lt;a href=&quot;/northumberland/2024/12/14/Alnham.html&quot;&gt;I visited a few weeks ago&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;From here there was a little bit of bog-hopping to get back onto the bridleway. Up to the 1930s maps, a Cross (remains of) or (site of) is marked on the map at the track here, but if there was anything left it’s probably been obliterated by yet another broad crushed stone track that are covering the hills now. I walked to the Salter’s Road and back down into Alnham; I had a look in the lovely church there but Nellie Heron’s final resting place is at Whittingham Church, 5 miles to the east.&lt;/p&gt;

&lt;div id=&quot;leaflet-map-d9034a1d972e5ec642b26ff0adf31535&quot; class=&quot;leaflet-map&quot;&gt;&lt;/div&gt;
&lt;script&gt;(() =&gt; {
// Specify configuration variables, setup any elements and styling
    var leafletCdn = &quot;https://unpkg.com/leaflet@1.6.0/dist/&quot;;
    var esriLeafletCdn = &quot;https://unpkg.com/esri-leaflet/dist/&quot;;

    // Get tag input arguments &amp; inside block object list
    var tagInputArg = { &quot;center&quot; : [55.417997,-2.053994],
                 &quot;zoom&quot; : 12,
                 &quot;providerBasemap&quot;: &quot;OpenTopoMap&quot; } ;
    var blockLeafletItems = [
          {id: &quot;58a77d16ed76ea86a99e14b7d276a106&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.414786,
                       &quot;longitude&quot; : -2.0348172,
                       &quot;popupContent&quot; : &quot;Nellie Heron&apos;s Memorial Stone&quot;} },	               
    {id: &quot;6cf7b3b43ac7b1808d09df2c83c045bb&quot;,
              type: &quot;LeafletGeoJSON&quot;,
              value: &quot;/assets/geojson/NellieHerons.geojson&quot; },
];

    // Override the map div id if specified, apply default CSS
    var defaultMapElId = &quot;leaflet-map-d9034a1d972e5ec642b26ff0adf31535&quot;;
   var defaultMapElStyle = &quot;height:300px; margin-top:15px; margin-bottom:15px&quot;;
    var mapEl = document.getElementById(defaultMapElId);
    if(&apos;divId&apos; in tagInputArg){
        mapEl.id = tagInputArg[&apos;divId&apos;];
    }
    var defaultMapCssEl = document.createElement(&quot;style&quot;);
    defaultMapCssEl.innerHTML = 
        &quot;#&quot; + defaultMapElId + &quot;{&quot; + defaultMapElStyle + &quot;}&quot;;
    document.head.appendChild(defaultMapCssEl);

    var newWindowImgSrcBase64 = &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wUVFzAHq2j99AAAAV9JREFUSMdjYKAxYCRHk5ubG9+1a9fm/v//H6cadnb2G/fu3atlIceC379/c3z9+jUEn5q/f/8eYWBgYECxQE5OroqA2Y8ePXq0hJWV9Qc3N/caZB8wMjJKff361QpvEAkKCv4nYMGh9+/f26MLamhoyLx9+3b/nz9/VJCC6MiLFy9sWXCE3xlGRsZvWKQu4DOciYnpCzc396HPnz97weRxWRD/8OHDa4TiAt1wfn5+z79//zoxMDDALWAiN/lhM/zevXtH0NUx0dJwsiwgxXCccUCJ4dzc3DP+//+/gZ2d/duLFy9Is+Djx4+rCbn82rVrrxgYGF6RFUR8fHyZbGxsD7AZLiEhUSAiIrJSUlIyjOw4uHnz5gVHR0d1bC7/8+eP5d+/f8P+/PmjS1Ekr1ix4hcp6ploXVwPfQuwJlMmJiYBLS0tIVIMev36NRvRFnz48OHohw8fhkYQjQKCAAChiL6Pj/LM2QAAAABJRU5ErkJggg==&quot;;

// Actual mapping section; Specify a function to be called later that 
// assembles the correct JS components based on what the user specified in the 
// tag input arg, the block section of features, etc. Actually creates the map
// that is visible on the page

    function _getCenter(){
        var defaultCenter = [0,0];
        if(&quot;center&quot; in tagInputArg){
            return tagInputArg.center;
        } else {
            return defaultCenter;
        }
    }

    function _getZoom(){
        var defaultZoom = 1;
        if(&quot;zoom&quot; in tagInputArg){
            return tagInputArg.zoom
        } else {
            return defaultZoom;
        }
    }

    function _getProviderBasemap(){
        var defaultProviderBasemap = &quot;OpenStreetMap.Mapnik&quot;;
        if(&quot;providerBasemap&quot; in tagInputArg){
            return tagInputArg.providerBasemap;
        } else {
            return defaultProviderBasemap;
        }
    }


    function _addMarkerToMap(leafletItem, map){
        var m = leafletItem.value;
        var result = L.marker([m.latitude, m.longitude]).addTo(map);
        var potentialPopup = &quot;&quot;;
        if(&apos;popupContent&apos; in m){
                potentialPopup += m.popupContent;}
        if(&apos;href&apos; in m){
            potentialPopup += &apos;&lt;a href=&quot;&apos; + m.href + &apos;&quot;&gt;&apos; + 
                &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            result.bindPopup(potentialPopup);}
        if(!(&apos;center&apos; in tagInputArg)){
            // If the user didn&apos;t specify a center, infer from marker
            map.panTo(new L.LatLng(m.latitude, m.longitude));
        }
    }

    function _onEachFeature(feature, layer){
        var potentialPopup = &quot;&quot;
        if(feature.properties &amp;&amp; feature.properties.popupContent){
            potentialPopup += feature.properties.popupContent;
        }
        if(feature.properties &amp;&amp; feature.properties.href){
            potentialPopup += 
                &apos;&lt;a href=&quot;&apos; + feature.properties.href + &apos;&quot;&gt;&apos; + 
                    &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            layer.bindPopup(potentialPopup);
        }
    }

    function _addGeoJSONToMap(leafletItem, map){
        if(typeof leafletItem.value === &quot;string&quot;){
            fetch(leafletItem.value).then((resp) =&gt; {
                return resp.json();
            }).then((data) =&gt; {
                leafletItem.value = data;
                _addGeoJSONObjToMap(leafletItem, map);
            }).catch((err) =&gt; {
                console.log(&quot;Encountered err w/ geojson, attempting to fix..&quot;);
                console.log(err);
                _addGeoJSONObjToMap(leafletItem, map);
            });
        } else {
            _addGeoJSONObjToMap(leafletItem, map);
        }
     }

    function _addGeoJSONObjToMap(leafletItem, map){
         var geojson = L.geoJSON(leafletItem.value, { 
            onEachFeature: _onEachFeature 
        });
        layers = geojson.getLayers();
        for(var i=0; i&lt;layers.length; i++){
            try{
                var geom = layers[i].feature.geometry;
                if(!(&apos;center&apos; in tagInputArg)){
                    // If the user didn&apos;t specify a center, infer from geojson
                    //console.log(&quot;panning to &quot; + geom.coordinates);
                    map.panTo(new L.LatLng(geom.coordinates[1],
                                           geom.coordinates[0]));
                }
            } catch(e){}
        }
       
        geojson.addTo(map);
       
    }

    function _processLeafletItem(leafletItem, map){
        switch(leafletItem.type){
            case &quot;LeafletMarker&quot;:
                _addMarkerToMap(leafletItem, map);
                break;
            case &quot;LeafletGeoJSON&quot;:
                _addGeoJSONToMap(leafletItem, map);
                break;
            case undefined:
                break; 
            default:
                console.log(&quot;Couldn&apos;t add item &quot; + leafletItem.id);
                break;
        }
    }

//The actual section that is called that creates a map
    function createMap(){
        console.log(&quot;Creating map d9034a1d972e5ec642b26ff0adf31535 with these args:&quot;);
        console.log(tagInputArg);

        //Initialize Map with the correct input arguments
        var map = L.map(mapEl.id, 
            {worldCopyJump: true}).setView(_getCenter(), _getZoom());
        L.tileLayer.provider(_getProviderBasemap()).addTo(map);
        if(&quot;esriBasemap&quot; in tagInputArg){
            L.esri.basemapLayer(tagInputArg.esriBasemap).addTo(map);
        }

        //process each Leaflet Item passed in between the block tag middle
        for(var i=0; i&lt;blockLeafletItems.length; i++){
            var leafletItem = blockLeafletItems[i];
            console.log(&quot;Adding leaflet item &quot; + leafletItem.id + &quot;:&quot;);
            console.log(leafletItem);
            _processLeafletItem(leafletItem, map);
        }
    }

// Load the correct JS libraries/CSS by adding to head: 
// When ready, call createMap() to create the map on the page

    function _createMap(){
        // helper function to draw the map only when everything is loaded,
        // safeguards against multiple calls to window.onload
        var prevOnLoad;
        if(window.onload){
            prevOnLoad = window.onload;
        }
        window.onload = () =&gt; {
            createMap();
            if(prevOnLoad){
                prevOnLoad();
            }
        }
    }

    var leafletCssId = &quot;leaflet-css-head&quot;;
    var leafletJsId = &quot;leaflet-js-head&quot;;
    var esriLeafletJsId = &quot;esri-leaflet-js-head&quot;;
    var leafletProvidersJsId = &quot;leaflet-providers-js-head&quot;;

    // Add the leaflet CSS first, don&apos;t worry about when it loads
    var leafletCssEl = document.createElement(&quot;link&quot;);
    leafletCssEl.id = leafletCssId;
    leafletCssEl.rel = &quot;stylesheet&quot;;
    leafletCssEl.href = leafletCdn + &quot;leaflet.css&quot;;
    if(!document.getElementById(leafletCssEl.id)){
        document.head.appendChild(leafletCssEl);
    }

    function addToHeadIfNotLoaded(el) {
        //Add the el to the head if it doesn&apos;t exist already. If it does,
        //everything we need is already loaded, so draw the map
        if(!document.getElementById(el.id)){
            document.head.appendChild(el);
        } else {
            _createMap();
        }
    }

    // Load the main leaflet.js code, wait for it to load
    var leafletJsEl = document.createElement(&quot;script&quot;);
    leafletJsEl.id = leafletJsId;
    leafletJsEl.onload = () =&gt; {
        //After loaded, load the esri-leaflet.js code, wait for it to load
        var esriEl = document.createElement(&quot;script&quot;);
        esriEl.id = esriLeafletJsId;
        esriEl.onload = () =&gt; {
            //After loaded, add the inline leaflet-providers &lt;script&gt;
            provEl = document.createElement(&quot;script&quot;);
            provEl.id = leafletProvidersJsId;
            provEl.innerHTML = `//Taken from https://github.com/leaflet-extras/leaflet-providers
(function (root, factory) {
	if (typeof define === &apos;function&apos; &amp;&amp; define.amd) {
		// AMD. Register as an anonymous module.
		define([&apos;leaflet&apos;], factory);
	} else if (typeof modules === &apos;object&apos; &amp;&amp; module.exports) {
		// define a Common JS module that relies on &apos;leaflet&apos;
		module.exports = factory(require(&apos;leaflet&apos;));
	} else {
		// Assume Leaflet is loaded into global object L already
		factory(L);
	}
}(this, function (L) {
	&apos;use strict&apos;;

	L.TileLayer.Provider = L.TileLayer.extend({
		initialize: function (arg, options) {
			var providers = L.TileLayer.Provider.providers;

			var parts = arg.split(&apos;.&apos;);

			var providerName = parts[0];
			var variantName = parts[1];

			if (!providers[providerName]) {
				throw &apos;No such provider (&apos; + providerName + &apos;)&apos;;
			}

			var provider = {
				url: providers[providerName].url,
				options: providers[providerName].options
			};

			// overwrite values in provider from variant.
			if (variantName &amp;&amp; &apos;variants&apos; in providers[providerName]) {
				if (!(variantName in providers[providerName].variants)) {
					throw &apos;No such variant of &apos; + providerName + &apos; (&apos; + variantName + &apos;)&apos;;
				}
				var variant = providers[providerName].variants[variantName];
				var variantOptions;
				if (typeof variant === &apos;string&apos;) {
					variantOptions = {
						variant: variant
					};
				} else {
					variantOptions = variant.options;
				}
				provider = {
					url: variant.url || provider.url,
					options: L.Util.extend({}, provider.options, variantOptions)
				};
			}

			// replace attribution placeholders with their values from toplevel provider attribution,
			// recursively
			var attributionReplacer = function (attr) {
				if (attr.indexOf(&apos;{attribution.&apos;) === -1) {
					return attr;
				}
				return attr.replace(/\{attribution.(\w*)\}/g,
					function (match, attributionName) {
						return attributionReplacer(providers[attributionName].options.attribution);
					}
				);
			};
			provider.options.attribution = attributionReplacer(provider.options.attribution);

			// Compute final options combining provider options with any user overrides
			var layerOpts = L.Util.extend({}, provider.options, options);
			L.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);
		}
	});

	/**
	 * Definition of providers.
	 * see http://leafletjs.com/reference.html#tilelayer for options in the options map.
	 */

	L.TileLayer.Provider.providers = {
		OpenStreetMap: {
			url: &apos;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&apos;
			},
			variants: {
				Mapnik: {},
				DE: {
					url: &apos;https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18
					}
				},
				CH: {
					url: &apos;https://tile.osm.ch/switzerland/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18,
						bounds: [[45, 5], [48, 11]]
					}
				},
				France: {
					url: &apos;https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 20,
						attribution: &apos;&amp;copy; Openstreetmap France | {attribution.OpenStreetMap}&apos;
					}
				},
				HOT: {
					url: &apos;https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png&apos;,
					options: {
						attribution:
							&apos;{attribution.OpenStreetMap}, &apos; +
							&apos;Tiles style by &lt;a href=&quot;https://www.hotosm.org/&quot; target=&quot;_blank&quot;&gt;Humanitarian OpenStreetMap Team&lt;/a&gt; &apos; +
							&apos;hosted by &lt;a href=&quot;https://openstreetmap.fr/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap France&lt;/a&gt;&apos;
					}
				},
				BZH: {
					url: &apos;https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png&apos;,
					options: {
						attribution: &apos;{attribution.OpenStreetMap}, Tiles courtesy of &lt;a href=&quot;http://www.openstreetmap.bzh/&quot; target=&quot;_blank&quot;&gt;Breton OpenStreetMap Team&lt;/a&gt;&apos;,
						bounds: [[46.2, -5.5], [50, 0.7]]
					}
				}
			}
		},
		OpenSeaMap: {
			url: &apos;https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openseamap.org&quot;&gt;OpenSeaMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenPtMap: {
			url: &apos;http://openptmap.org/tiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openptmap.org&quot;&gt;OpenPtMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenTopoMap: {
			url: &apos;https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: {attribution.OpenStreetMap}, &lt;a href=&quot;http://viewfinderpanoramas.org&quot;&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=&quot;https://opentopomap.org&quot;&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenRailwayMap: {
			url: &apos;https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://www.OpenRailwayMap.org&quot;&gt;OpenRailwayMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenFireMap: {
			url: &apos;http://openfiremap.org/hytiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;http://www.openfiremap.org&quot;&gt;OpenFireMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		SafeCast: {
			url: &apos;https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 16,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://blog.safecast.org/about/&quot;&gt;SafeCast&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		Thunderforest: {
			url: &apos;https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}&apos;,
			options: {
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;http://www.thunderforest.com/&quot;&gt;Thunderforest&lt;/a&gt;, {attribution.OpenStreetMap}&apos;,
				variant: &apos;cycle&apos;,
				apikey: &apos;&lt;insert your api key here&gt;&apos;,
				maxZoom: 22
			},
			variants: {
				OpenCycleMap: &apos;cycle&apos;,
				Transport: {
					options: {
						variant: &apos;transport&apos;
					}
				},
				TransportDark: {
					options: {
						variant: &apos;transport-dark&apos;
					}
				},
				SpinalMap: {
					options: {
						variant: &apos;spinal-map&apos;
					}
				},
				Landscape: &apos;landscape&apos;,
				Outdoors: &apos;outdoors&apos;,
				Pioneer: &apos;pioneer&apos;
			}
		},
		OpenMapSurfer: {
			url: &apos;https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				variant: &apos;roads&apos;,
				attribution: &apos;Imagery from &lt;a href=&quot;http://giscience.uni-hd.de/&quot;&gt;GIScience Research Group @ University of Heidelberg&lt;/a&gt; | Map data &apos;
			},
			variants: {
				Roads: {
					options: {
						variant: &apos;roads&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				Hybrid: {
					options: {
						variant: &apos;hybrid&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				AdminBounds: {
					options: {
						variant: &apos;adminb&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				ContourLines: {
					options: {
						variant: &apos;asterc&apos;,
						maxZoom: 18,
						minZoom: 13,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;&apos;
					}
				},
				Hillshade: {
					options: {
						variant: &apos;asterh&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;, &lt;a href=&quot;http://srtm.csi.cgiar.org/&quot;&gt;SRTM&lt;/a&gt;&apos;
					}
				},
				ElementsAtRisk: {
					options: {
						variant: &apos;elements_at_risk&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				}
			}
		},
		Hydda: {
			url: &apos;https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 18,
				variant: &apos;full&apos;,
				attribution: &apos;Tiles courtesy of &lt;a href=&quot;http://openstreetmap.se/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap Sweden&lt;/a&gt; &amp;mdash; Map data {attribution.OpenStreetMap}&apos;
			},
			variants: {
				Full: &apos;full&apos;,
				Base: &apos;base&apos;,
				RoadsAndLabels: &apos;roads_and_labels&apos;
			}
		},
		MapBox: {
			url: &apos;https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}{r}.png?access_token={accessToken}&apos;,
			options: {
				attribution:
					&apos;&lt;a href=&quot;https://www.mapbox.com/about/maps/&quot; target=&quot;_blank&quot;&gt;&amp;copy; Mapbox&lt;/a&gt; &apos; +
					&apos;{attribution.OpenStreetMap} &apos; +
					&apos;&lt;a href=&quot;https://www.mapbox.com/map-feedback/&quot; target=&quot;_blank&quot;&gt;Improve this map&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				id: &apos;mapbox.streets&apos;,
				accessToken: &apos;&lt;insert your access token here&gt;&apos;,
			}
		},
		Stamen: {
			url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}&apos;,
			options: {
				attribution:
					&apos;Map tiles by &lt;a href=&quot;http://stamen.com&quot;&gt;Stamen Design&lt;/a&gt;, &apos; +
					&apos;&lt;a href=&quot;http://creativecommons.org/licenses/by/3.0&quot;&gt;CC BY 3.0&lt;/a&gt; &amp;mdash; &apos; +
					&apos;Map data {attribution.OpenStreetMap}&apos;,
				subdomains: &apos;abcd&apos;,
				minZoom: 0,
				maxZoom: 20,
				variant: &apos;toner&apos;,
				ext: &apos;png&apos;
			},
			variants: {
				Toner: &apos;toner&apos;,
				TonerBackground: &apos;toner-background&apos;,
				TonerHybrid: &apos;toner-hybrid&apos;,
				TonerLines: &apos;toner-lines&apos;,
				TonerLabels: &apos;toner-labels&apos;,
				TonerLite: &apos;toner-lite&apos;,
				Watercolor: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;watercolor&apos;,
						ext: &apos;jpg&apos;,
						minZoom: 1,
						maxZoom: 16
					}
				},
				Terrain: {
					options: {
						variant: &apos;terrain&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TerrainBackground: {
					options: {
						variant: &apos;terrain-background&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TopOSMRelief: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;toposm-color-relief&apos;,
						ext: &apos;jpg&apos;,
						bounds: [[22, -132], [51, -56]]
					}
				},
				TopOSMFeatures: {
					options: {
						variant: &apos;toposm-features&apos;,
						bounds: [[22, -132], [51, -56]],
						opacity: 0.9
					}
				}
			}
		},
		Esri: {
			url: &apos;https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}&apos;,
			options: {
				variant: &apos;World_Street_Map&apos;,
				attribution: &apos;Tiles &amp;copy; Esri&apos;
			},
			variants: {
				WorldStreetMap: {
					options: {
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012&apos;
					}
				},
				DeLorme: {
					options: {
						variant: &apos;Specialty/DeLorme_World_Base_Map&apos;,
						minZoom: 1,
						maxZoom: 11,
						attribution: &apos;{attribution.Esri} &amp;mdash; Copyright: &amp;copy;2012 DeLorme&apos;
					}
				},
				WorldTopoMap: {
					options: {
						variant: &apos;World_Topo_Map&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community&apos;
					}
				},
				WorldImagery: {
					options: {
						variant: &apos;World_Imagery&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community&apos;
					}
				},
				WorldTerrain: {
					options: {
						variant: &apos;World_Terrain_Base&apos;,
						maxZoom: 13,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: USGS, Esri, TANA, DeLorme, and NPS&apos;
					}
				},
				WorldShadedRelief: {
					options: {
						variant: &apos;World_Shaded_Relief&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: Esri&apos;
					}
				},
				WorldPhysical: {
					options: {
						variant: &apos;World_Physical_Map&apos;,
						maxZoom: 8,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: US National Park Service&apos;
					}
				},
				OceanBasemap: {
					options: {
						variant: &apos;Ocean_Basemap&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri&apos;
					}
				},
				NatGeoWorldMap: {
					options: {
						variant: &apos;NatGeo_World_Map&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC&apos;
					}
				},
				WorldGrayCanvas: {
					options: {
						variant: &apos;Canvas/World_Light_Gray_Base&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; Esri, DeLorme, NAVTEQ&apos;
					}
				}
			}
		},
		OpenWeatherMap: {
			url: &apos;http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data &amp;copy; &lt;a href=&quot;http://openweathermap.org&quot;&gt;OpenWeatherMap&lt;/a&gt;&apos;,
				apiKey:&apos;&lt;insert your api key here&gt;&apos;,
				opacity: 0.5
			},
			variants: {
				Clouds: &apos;clouds&apos;,
				CloudsClassic: &apos;clouds_cls&apos;,
				Precipitation: &apos;precipitation&apos;,
				PrecipitationClassic: &apos;precipitation_cls&apos;,
				Rain: &apos;rain&apos;,
				RainClassic: &apos;rain_cls&apos;,
				Pressure: &apos;pressure&apos;,
				PressureContour: &apos;pressure_cntr&apos;,
				Wind: &apos;wind&apos;,
				Temperature: &apos;temp&apos;,
				Snow: &apos;snow&apos;
			}
		},
		HERE: {
			/*
			 * HERE maps, formerly Nokia maps.
			 * These basemaps are free, but you need an API key. Please sign up at
			 * https://developer.here.com/plans
			 */
			url:
				&apos;https://{s}.{base}.maps.api.here.com/maptile/2.1/&apos; +
				&apos;{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?&apos; +
				&apos;app_id={app_id}&amp;app_code={app_code}&amp;lg={language}&apos;,
			options: {
				attribution:
					&apos;Map &amp;copy; 1987-&apos; + new Date().getFullYear() + &apos; &lt;a href=&quot;http://developer.here.com&quot;&gt;HERE&lt;/a&gt;&apos;,
				subdomains: &apos;1234&apos;,
				mapID: &apos;newest&apos;,
				&apos;app_id&apos;: &apos;&lt;insert your app_id here&gt;&apos;,
				&apos;app_code&apos;: &apos;&lt;insert your app_code here&gt;&apos;,
				base: &apos;base&apos;,
				variant: &apos;normal.day&apos;,
				maxZoom: 20,
				type: &apos;maptile&apos;,
				language: &apos;eng&apos;,
				format: &apos;png8&apos;,
				size: &apos;256&apos;
			},
			variants: {
				normalDay: &apos;normal.day&apos;,
				normalDayCustom: &apos;normal.day.custom&apos;,
				normalDayGrey: &apos;normal.day.grey&apos;,
				normalDayMobile: &apos;normal.day.mobile&apos;,
				normalDayGreyMobile: &apos;normal.day.grey.mobile&apos;,
				normalDayTransit: &apos;normal.day.transit&apos;,
				normalDayTransitMobile: &apos;normal.day.transit.mobile&apos;,
				normalNight: &apos;normal.night&apos;,
				normalNightMobile: &apos;normal.night.mobile&apos;,
				normalNightGrey: &apos;normal.night.grey&apos;,
				normalNightGreyMobile: &apos;normal.night.grey.mobile&apos;,
				normalNightTransit: &apos;normal.night.transit&apos;,
				normalNightTransitMobile: &apos;normal.night.transit.mobile&apos;,
				reducedDay: &apos;reduced.day&apos;,
				reducedNight: &apos;reduced.night&apos;,
				basicMap: {
					options: {
						type: &apos;basetile&apos;
					}
				},
				mapLabels: {
					options: {
						type: &apos;labeltile&apos;,
						format: &apos;png&apos;
					}
				},
				trafficFlow: {
					options: {
						base: &apos;traffic&apos;,
						type: &apos;flowtile&apos;
					}
				},
				carnavDayGrey: &apos;carnav.day.grey&apos;,
				hybridDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day&apos;
					}
				},
				hybridDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.mobile&apos;
					}
				},
				hybridDayTransit: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.transit&apos;
					}
				},
				hybridDayGrey: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.grey.day&apos;
					}
				},
				pedestrianDay: &apos;pedestrian.day&apos;,
				pedestrianNight: &apos;pedestrian.night&apos;,
				satelliteDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;satellite.day&apos;
					}
				},
				terrainDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day&apos;
					}
				},
				terrainDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day.mobile&apos;
					}
				}
			}
		},
		FreeMapSK: {
			url: &apos;http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg&apos;,
			options: {
				minZoom: 8,
				maxZoom: 16,
				subdomains: &apos;1234&apos;,
				bounds: [[47.204642, 15.996093], [49.830896, 22.576904]],
				attribution:
					&apos;{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 &lt;a href=&quot;http://freemap.sk&quot;&gt;Freemap.sk&lt;/a&gt;&apos;
			}
		},
		MtbMap: {
			url: &apos;http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png&apos;,
			options: {
				attribution:
					&apos;{attribution.OpenStreetMap} &amp;amp; USGS&apos;
			}
		},
		CartoDB: {
			url: &apos;https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;{attribution.OpenStreetMap} &amp;copy; &lt;a href=&quot;https://carto.com/attributions&quot;&gt;CARTO&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				maxZoom: 19,
				variant: &apos;light_all&apos;
			},
			variants: {
				Positron: &apos;light_all&apos;,
				PositronNoLabels: &apos;light_nolabels&apos;,
				PositronOnlyLabels: &apos;light_only_labels&apos;,
				DarkMatter: &apos;dark_all&apos;,
				DarkMatterNoLabels: &apos;dark_nolabels&apos;,
				DarkMatterOnlyLabels: &apos;dark_only_labels&apos;,
				Voyager: &apos;rastertiles/voyager&apos;,
				VoyagerNoLabels: &apos;rastertiles/voyager_nolabels&apos;,
				VoyagerOnlyLabels: &apos;rastertiles/voyager_only_labels&apos;,
				VoyagerLabelsUnder: &apos;rastertiles/voyager_labels_under&apos;
			}
		},
		HikeBike: {
			url: &apos;https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;{attribution.OpenStreetMap}&apos;,
				variant: &apos;hikebike&apos;
			},
			variants: {
				HikeBike: {},
				HillShading: {
					options: {
						maxZoom: 15,
						variant: &apos;hillshading&apos;
					}
				}
			}
		},
		BasemapAT: {
			url: &apos;https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Datenquelle: &lt;a href=&quot;https://www.basemap.at&quot;&gt;basemap.at&lt;/a&gt;&apos;,
				subdomains: [&apos;&apos;, &apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;],
				format: &apos;png&apos;,
				bounds: [[46.358770, 8.782379], [49.037872, 17.189532]],
				variant: &apos;geolandbasemap&apos;
			},
			variants: {
				basemap: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;geolandbasemap&apos;
					}
				},
				grau: &apos;bmapgrau&apos;,
				overlay: &apos;bmapoverlay&apos;,
				highdpi: {
					options: {
						variant: &apos;bmaphidpi&apos;,
						format: &apos;jpeg&apos;
					}
				},
				orthofoto: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;bmaporthofoto30cm&apos;,
						format: &apos;jpeg&apos;
					}
				}
			}
		},
		nlmaps: {
			url: &apos;https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png&apos;,
			options: {
				minZoom: 6,
				maxZoom: 19,
				bounds: [[50.5, 3.25], [54, 7.6]],
				attribution: &apos;Kaartgegevens &amp;copy; &lt;a href=&quot;kadaster.nl&quot;&gt;Kadaster&lt;/a&gt;&apos;
			},
			variants: {
				&apos;standaard&apos;: &apos;brtachtergrondkaart&apos;,
				&apos;pastel&apos;: &apos;brtachtergrondkaartpastel&apos;,
				&apos;grijs&apos;: &apos;brtachtergrondkaartgrijs&apos;,
				&apos;luchtfoto&apos;: {
					&apos;url&apos;: &apos;https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts/1.0.0/2016_ortho25/EPSG:3857/{z}/{x}/{y}.png&apos;,
				}
			}
		},
		NASAGIBS: {
			url: &apos;https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}&apos;,
			options: {
				attribution:
					&apos;Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System &apos; +
					&apos;(&lt;a href=&quot;https://earthdata.nasa.gov&quot;&gt;ESDIS&lt;/a&gt;) with funding provided by NASA/HQ.&apos;,
				bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],
				minZoom: 1,
				maxZoom: 9,
				format: &apos;jpg&apos;,
				time: &apos;&apos;,
				tilematrixset: &apos;GoogleMapsCompatible_Level&apos;
			},
			variants: {
				ModisTerraTrueColorCR: &apos;MODIS_Terra_CorrectedReflectance_TrueColor&apos;,
				ModisTerraBands367CR: &apos;MODIS_Terra_CorrectedReflectance_Bands367&apos;,
				ViirsEarthAtNight2012: {
					options: {
						variant: &apos;VIIRS_CityLights_2012&apos;,
						maxZoom: 8
					}
				},
				ModisTerraLSTDay: {
					options: {
						variant: &apos;MODIS_Terra_Land_Surface_Temp_Day&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				},
				ModisTerraSnowCover: {
					options: {
						variant: &apos;MODIS_Terra_Snow_Cover&apos;,
						format: &apos;png&apos;,
						maxZoom: 8,
						opacity: 0.75
					}
				},
				ModisTerraAOD: {
					options: {
						variant: &apos;MODIS_Terra_Aerosol&apos;,
						format: &apos;png&apos;,
						maxZoom: 6,
						opacity: 0.75
					}
				},
				ModisTerraChlorophyll: {
					options: {
						variant: &apos;MODIS_Terra_Chlorophyll_A&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				}
			}
		},
		NLS: {
			// NLS maps are copyright National library of Scotland.
			// http://maps.nls.uk/projects/api/index.html
			// Please contact NLS for anything other than non-commercial low volume usage
			//
			// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s
			//   z0-9  - 1:1m
			//  z10-11 - quarter inch (1:253440)
			//  z12-18 - one inch (1:63360)
			url: &apos;https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://geo.nls.uk/maps/&quot;&gt;National Library of Scotland Historic Maps&lt;/a&gt;&apos;,
				bounds: [[49.6, -12], [61.7, 3]],
				minZoom: 1,
				maxZoom: 18,
				subdomains: &apos;0123&apos;,
			}
		},
		JusticeMap: {
			// Justice Map (http://www.justicemap.org/)
			// Visualize race and income data for your community, county and country.
			// Includes tools for data journalists, bloggers and community activists.
			url: &apos;http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://www.justicemap.org/terms.php&quot;&gt;Justice Map&lt;/a&gt;&apos;,
				// one of &apos;county&apos;, &apos;tract&apos;, &apos;block&apos;
				size: &apos;county&apos;,
				// Bounds for USA, including Alaska and Hawaii
				bounds: [[14, -180], [72, -56]]
			},
			variants: {
				income: &apos;income&apos;,
				americanIndian: &apos;indian&apos;,
				asian: &apos;asian&apos;,
				black: &apos;black&apos;,
				hispanic: &apos;hispanic&apos;,
				multi: &apos;multi&apos;,
				nonWhite: &apos;nonwhite&apos;,
				white: &apos;white&apos;,
				plurality: &apos;plural&apos;
			}
		},
		Wikimedia: {
			url: &apos;https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;https://wikimediafoundation.org/wiki/Maps_Terms_of_Use&quot;&gt;Wikimedia&lt;/a&gt;&apos;,
				minZoom: 1,
				maxZoom: 19
			}
		},
		GeoportailFrance: {
			url: &apos;https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&amp;SERVICE=WMTS&amp;VERSION=1.0.0&amp;STYLE={style}&amp;TILEMATRIXSET=PM&amp;FORMAT={format}&amp;LAYER={variant}&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}&apos;,
			options: {
				attribution: &apos;&lt;a target=&quot;_blank&quot; href=&quot;https://www.geoportail.gouv.fr/&quot;&gt;Geoportail France&lt;/a&gt;&apos;,
				bounds: [[-75, -180], [81, 180]],
				minZoom: 2,
				maxZoom: 18,
				// Get your own geoportail apikey here : http://professionnels.ign.fr/ign/contrats/
				// NB : &apos;choisirgeoportail&apos; is a demonstration key that comes with no guarantee
				apikey: &apos;choisirgeoportail&apos;,
				format: &apos;image/jpeg&apos;,
				style : &apos;normal&apos;,
				variant: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;
			},
			variants: {
				parcels: {
					options : {
						variant: &apos;CADASTRALPARCELS.PARCELS&apos;,
						maxZoom: 20,
						style : &apos;bdparcellaire&apos;,
						format: &apos;image/png&apos;
					}
				},
				ignMaps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS&apos;,
				maps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;,
				orthos: {
					options: {
						maxZoom: 19,
						variant: &apos;ORTHOIMAGERY.ORTHOPHOTOS&apos;
					}
				}
			}
		},
		OneMapSG: {
			url: &apos;https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				variant: &apos;Default&apos;,
				minZoom: 11,
				maxZoom: 18,
				bounds: [[1.56073, 104.11475], [1.16, 103.502]],
				attribution: &apos;&lt;img src=&quot;https://docs.onemap.sg/maps/images/oneMap64-01.png&quot; style=&quot;height:20px;width:20px;&quot;/&gt; New OneMap | Map data &amp;copy; contributors, &lt;a href=&quot;http://SLA.gov.sg&quot;&gt;Singapore Land Authority&lt;/a&gt;&apos;
			},
			variants: {
				Default: &apos;Default&apos;,
				Night: &apos;Night&apos;,
				Original: &apos;Original&apos;,
				Grey: &apos;Grey&apos;,
				LandLot: &apos;LandLot&apos;
			}
		}
	};

	L.tileLayer.provider = function (provider, options) {
		return new L.TileLayer.Provider(provider, options);
	};

	return L;
}));
`;
            if(!document.getElementById(provEl.id)){
                 document.head.appendChild(provEl);        
            }
            _createMap();
            }
        esriEl.src = esriLeafletCdn + &quot;esri-leaflet.js&quot;;
        addToHeadIfNotLoaded(esriEl);
        };
    leafletJsEl.src = leafletCdn + &quot;leaflet.js&quot;;
    addToHeadIfNotLoaded(leafletJsEl);
})();
&lt;/script&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Map of route taken&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>sarah</name></author><category term="Northumberland" /><category term="walks" /><category term="northumberland" /><category term="history" /><summary type="html"></summary></entry><entry><title type="html">Cat Wheel Speedo</title><link href="https://sarahdal.github.io//arduino-esp32/2025/02/11/CatWheel.html" rel="alternate" type="text/html" title="Cat Wheel Speedo" /><published>2025-02-11T00:00:00+00:00</published><updated>2025-02-11T00:00:00+00:00</updated><id>https://sarahdal.github.io//arduino-esp32/2025/02/11/CatWheel</id><content type="html" xml:base="https://sarahdal.github.io//arduino-esp32/2025/02/11/CatWheel.html">&lt;p&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/wheel/wheel1.jpg&quot; alt=&quot;a black cat with a yellow collar sits in an upright wheel about 1m high.&quot; width=&quot;75%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Here is a basic speedometer/odometer for your cat wheel. It measures the speed in m/s, and keeps the total distance travelled while it’s powered on.&lt;/p&gt;

&lt;p&gt;You will need:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A &lt;a href=&quot;https://onefastcat.com/products/cat-wheel&quot;&gt;cat wheel&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;An ESP or Arduino&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;A &lt;a href=&quot;https://components101.com/modules/reed-switch-sensor-module&quot;&gt;reed switch module&lt;/a&gt; &lt;img src=&quot;https://sarahdal.github.io///assets/images/wheel/reed_switch.jpg&quot; alt=&quot;a small blue circuit board. at one end is a tiny glass tube switch. it is connected by short wire to the board, which has a potentiometer and three pins at the opposite end.&quot; width=&quot;45%&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Some strong magnets &lt;img src=&quot;https://sarahdal.github.io///assets/images/wheel/magnets.jpg&quot; alt=&quot;&quot; width=&quot;45%&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://randomnerdtutorials.com/esp32-esp8266-i2c-lcd-arduino-ide/&quot;&gt;LCD module with I2C adaptor&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/wheel/I2C_LCD.jpg&quot; alt=&quot;&quot; width=&quot;45%&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;double sided tape to attach the magnets and the switch to the wheel eg 3M tape&lt;/li&gt;
  &lt;li&gt;wires, power source etc&lt;/li&gt;
  &lt;li&gt;a cat&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/fury-blep.jpg&quot; alt=&quot;Fury, a black cat, sticking his tongue out &quot; width=&quot;50%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I did have some extremely cheap magentic switches lying about, the kind that are used on alarm systems to signal if a door or window has been opened or closed. But they didn’t work great, so while the reed switch module looked a bit overkill, it worked much better.&lt;/p&gt;

&lt;h3 id=&quot;esp32-or-arduino&quot;&gt;ESP32 or Arduino?&lt;/h3&gt;

&lt;p&gt;I prefer ESP32s to Arduino these days. Most of them have pins with built-in resistors, they come with wifi and many modules have BLE, they tend to be cheaper than Arduino and they come in a vast array of shapes and sizes. You can program exactly the same as an Arduino with the IDE. Have a search online for guides on how to do this.&lt;/p&gt;

&lt;h3 id=&quot;setting-up&quot;&gt;Setting up&lt;/h3&gt;

&lt;p&gt;You need to find a place where the magnets can be stuck at equal distances around the outside of the wheel, and you need to find a spot where the reed switch sensor can sit so the magnets pass very close by without knocking it. My cat wheel had a handy bit at the base and raised sections all around the edge of the wheel. I used a 30cm long 3-core cable to connect the reed switch module to the ESP32, so the ESP32 could sit somewhere comfortably.&lt;/p&gt;

&lt;p&gt;Connect the reed switch to 3.3V, Ground and the DO or Data pin to a data pin on your ESP32, eg, pin 19.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;ESP32&lt;/th&gt;
      &lt;th&gt;Reed Switch&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;3.3v&lt;/td&gt;
      &lt;td&gt;V+&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;GND&lt;/td&gt;
      &lt;td&gt;GND&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;GPIO 19&lt;/td&gt;
      &lt;td&gt;DO&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Now measure the diameter of the inside of the wheel, I used a laser measure so super accurate - 1.08m. The circumference is π times the diameter, in my case, 3.4m. I divide this by 4, because I have 4 magnets on the wheel, which gives us a value of 0.85.&lt;/p&gt;

&lt;p&gt;This value goes in the following line:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wheelCircumference&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;85&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Connect up an I2C LCD unit. It needs 5v, GND and SCL and SDA pins. Look up a pinout of your &lt;a href=&quot;https://www.espboards.dev/esp32/&quot;&gt;ESP32 model&lt;/a&gt; to find out which those are; it’s usually pins 21 and 22 on ESP32. Once connected you can adjust the potentiometer at the back to change the contrast.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;ESP32&lt;/th&gt;
      &lt;th&gt;LCD I2C&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;5V&lt;/td&gt;
      &lt;td&gt;V+&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;GND&lt;/td&gt;
      &lt;td&gt;GND&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SCL (21)&lt;/td&gt;
      &lt;td&gt;SCL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SDA (22)&lt;/td&gt;
      &lt;td&gt;SDA&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Here it is all connected up and put in a nice plastic box:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/wheel/speedo.jpg&quot; alt=&quot;A translucent blue box containing a small form ESP32 on a solderless breadboard, with various wires and connectors. the back of the lid has the LCD unit connected to it.&quot; /&gt;&lt;/p&gt;

&lt;p&gt;That’s all it needs - the code below (or &lt;a href=&quot;https://sarahdal.github.io///assets/images/wheel/speedo.ino&quot;&gt;download here&lt;/a&gt;) will increment a count every time a magnet passes a sensor. It will multiply that by the value you entered in wheelCircumference to work out speed and distance.&lt;/p&gt;

&lt;video width=&quot;480&quot; height=&quot;320&quot; controls=&quot;controls&quot;&gt;
  &lt;source src=&quot;/assets/images/wheel/wheel.mp4 &quot; type=&quot;video/mp4&quot; alt=&quot;Fury, a black cat, walks slowly on a large cat wheel&quot; /&gt;
&lt;/video&gt;

&lt;h3 id=&quot;code&quot;&gt;Code&lt;/h3&gt;

&lt;p&gt;I have it set so it sends all the information to the serial monitor: Number of revolutions, the count, the speed and the distance. Underneath is the code for the LCD display of speed and distance. This all just resets if you unplug or reset the device.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// A simple LCD speedo for a cat wheel. &lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Change wheelCircumference to the distance between magnets on the wheel&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// work out the total circumference of your wheel (diameter times pi) &lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// then divide that by the number of magnets.&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;Wire.h&amp;gt;
#include &amp;lt;LiquidCrystal_I2C.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reedPin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                 &lt;span class=&quot;c1&quot;&gt;// Pin for the magentic sensor&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wheelCircumference&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;84823&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Distance between magnets in metres &lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// Counts the number of wheel rotations&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;revolutions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Time to calculate speed&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;// Total distance covered&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;// Speed in meters per second&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastTriggerTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Last interrupt trigger time&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;debounceDelay&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// Debounce delay in milliseconds&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#define I2C_SCL 22
#define I2C_SDA 21
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//set up LCD display&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LiquidCrystal_I2C&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// set the LCD address to 0x27 for a 16 chars and 2 line display&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;millis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastTriggerTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;debounceDelay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cnt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;revolutions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                  &lt;span class=&quot;c1&quot;&gt;// Increment the total revolutions count&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lastTriggerTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Update the last trigger time&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;115200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Wire&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;I2C_SDA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;I2C_SCL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;pinMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reedPin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INPUT_PULLUP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;                                   &lt;span class=&quot;c1&quot;&gt;// Set reed pin as input&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;attachInterrupt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;digitalPinToInterrupt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reedPin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FALLING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Trigger count on rising edge&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;                                                       &lt;span class=&quot;c1&quot;&gt;// initialise the LCD&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;backlight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;                                                  &lt;span class=&quot;c1&quot;&gt;// Light the beacons&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Every 5 seconds, calculate the speed and distance&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;millis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeInSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lastTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Calculate speed in meters per second&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;speed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wheelCircumference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeInSeconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Calculate total distance&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wheelCircumference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Go to the Write subroutine to output the results&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Reset the count and update the last time&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cnt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;lastTime&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;//Writes the results to the serial monitor and the LCD&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// information for Serial Monitor&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Data:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Revolutions: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;revolutions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cnt: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cnt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Current Speed: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Distance: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; -- &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// print to LCD&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setCursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Speed: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;m/s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setCursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Dist: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//lcd.print(&quot;count: &quot;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//lcd.print(revolutions);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

 &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;training-the-cat&quot;&gt;Training the cat&lt;/h3&gt;

&lt;p&gt;You’re on your own with this one.. I found &lt;a href=&quot;https://youtu.be/V7uwE9Iw0ps?si=Q8kM09melfvizR3m&quot;&gt;this video&lt;/a&gt; really helpful; as with all things it takes regular perseverence. Mine got the hang of it after a fortnight but it can take up to 6 weeks of coaxing.&lt;/p&gt;</content><author><name>sarah</name></author><category term="Arduino-ESP32" /><summary type="html"></summary></entry><entry><title type="html">The Border Stones</title><link href="https://sarahdal.github.io//northumberland/2025/02/02/BorderStones.html" rel="alternate" type="text/html" title="The Border Stones" /><published>2025-02-02T00:00:00+00:00</published><updated>2025-02-02T00:00:00+00:00</updated><id>https://sarahdal.github.io//northumberland/2025/02/02/BorderStones</id><content type="html" xml:base="https://sarahdal.github.io//northumberland/2025/02/02/BorderStones.html">&lt;hr /&gt;

&lt;p&gt;I always assumed the border between England and Scotland was fixed when King James IV became the I of England. I was looking at a post on the &lt;a href=&quot;http://heddonhistory.weebly.com/blog/the-named-stones-of-northumberland-revisited&quot;&gt;Heddon-on-the-Wall’s history society&lt;/a&gt;, about the Named Stones of Northumberland, a list published in the Berwickshire Naturalist’s Club in 1879, &lt;a href=&quot;https://archive.org/details/historyofberwick09berw/page/531/mode/2up&quot;&gt;p531-536, link here&lt;/a&gt;. As well as an interesting article, the author had also converted the locations in the 1879 publication to a handy KML file, so I put it into QGIS to see if there was anything near any walks I was planning.&lt;/p&gt;

&lt;p&gt;A small cluster of stones above College Valley caught my attention: The Two Gray Stones, Tuppie’s Grave nearby, a bit further north were the Stob Stones and The Grey Stone. These were recorded as marking the former line of the Scottish-English Border, so, I thought, must be quite old.&lt;/p&gt;

&lt;p&gt;I went to the excellent NLS Maps to have a look at the first 6” maps, published in the mid 1800s, and straight away noticed that the border is completely different in this area. The modern border goes more or less north-south from the Gray stone past Tuppie’s Grave to Whitelaw Nick; the 1800s border zigzags between Grey Stone, then to the Stob Stones, then past Tuppie’s Grave to The Two Gray Stones, Wideopen Head, to join the modern border south of White Law. I’ve drawn the old border (dark blue) on this map to compare with the modern border (red), or you can compare them on &lt;a href=&quot;https://maps.nls.uk/geo/explore/#zoom=15.8&amp;amp;lat=55.53611&amp;amp;lon=-2.22900&amp;amp;layers=257&amp;amp;b=osm&amp;amp;o=96&quot;&gt;NLS Maps here&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/Map1.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/Map1.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;//assets/images/BorderStones/Map1.jpg&quot;&gt;&lt;img src=&quot;//assets/images/BorderStones/Map1.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The Heddon-on-the-Wall history page has a lot, lot more detail on both &lt;a href=&quot;https://heddonhistory.weebly.com/blog/the-stob-stanes-yetholm-common-and-the-anglo-scottish-border&quot;&gt;the stones marking the border&lt;/a&gt; and the &lt;a href=&quot;http://heddonhistory.weebly.com/blog/yetholm-common&quot;&gt;border itself and why and how it changed&lt;/a&gt;. In summary: the area was used by the residents of Kirk Yetholm for grazing and peat cutting despite technically being in England, and it was referred to as “debateable land” (which I didn’t realise there was any of this far east - there was some debateable land nearer Carlisle and I think in Redesdale) and called Yetholm Common. The border was supposedly fixed in the 1200s, but various people didn’t agree; by the late 1700s there are regular legal battles over it but by the time you get to the 1800s and the industrialisation of agriculture, common land is less important so in 1861 the various lairds came together, declared it was no longer common land and divvied it between Tankerville’s estate in Northumberland and Kirk Yetholm in Scotland. 63 acres went to Scotland and 101 to England, and the border was finally settled.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.geograph.org.uk/photo/3165688&quot;&gt;Andrew Curtis on Geograph went out to look for all these stones and the border in 2012&lt;/a&gt;, so I was sure that only The Stob Stones and Tuppie’s Grave are still visible. I took a walk up anyway, from the College Valley Car Park at Hethpool,&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/CollegeValley.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/CollegeValley.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A view up the College Valley, steep sided hills with patches of plantation forestry and dotted with sheep&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Taking in one of the many hillforts in the area at Great Hetha&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/GtHetha.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/GtHetha.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A hilltop strewn with rocky ground and a cairn on top, the remains of an Iron Age hillfort. In the distance is the snow-covered flat top of The Cheviot. The sky has early morning hazy wispy clouds.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here a wonderful walk along the shoulder of Great Hetha and down to the isolated farmhouse at Trowupburn&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/SheepGate.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/SheepGate.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A drystone wall encloses a large field dotted with molehipps. Behind it, heather hills overlap into the distance. In the wall near us there is a small gate at ground level to let sheep out.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Then the old track up from Trowupburn Farm to Wideopen Head.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/Track.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/Track.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Looking back down a grassy track to Trowupburn, with gorse bushes further down. I think this must be a very old track as the surface was very good under the grass.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I love this broad valley, I think this is the Trowup Burn? It’s not named on the OS maps. I felt a big sense of scale here.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/Trowupburn.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/Trowupburn.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Looking across the valley to a large, U-shaped valley draining the side of another hill in the distance&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I came this way on a previous walk I don’t think I wrote about, looking for several of the WW2 plane crashes in the Cheviots. A German plane came down on the slope below, but there’s no trace here now.&lt;/p&gt;

&lt;p&gt;Then getting to the expanse of what used to be “Yetholm Common”. The first view is from Wideopen Head looking West, across an wet area marked as Maddie’s Well. This was Scotland in the 1860s OS Maps, but is now England&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/MaddiesWell.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/MaddiesWell.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;An area of greeny yellowy grassland, stretching away to the horizon. The ground slopes to a valley on the right, and behind a ridge in the distance are more hills.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Down the slope is the site of the Two Gray Stones, but I don’t think there’s anything to see there and I didn’t fancy traipsing through bog. I did, however, walk to see Tuppie’s Grave. In the &lt;a href=&quot;http://namebooks.org.uk/browse/main/?OSref=390&amp;amp;Page=62.0&quot;&gt;OS Name Book&lt;/a&gt; (that is, a book of placenames listed in the first OS survey, with evidence from local people to spelling and provenance) it is recorded as “This name applies to the grave of a “suicide” who hung himself about 60 years ago”. There was nothing at the grid ref given, I did find a groundfast rock about 120m away. Was this Tuppies Grave? And who was Tuppie?&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/Tuppie.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/Tuppie.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A rock with patches of white lichen pokes out of the yellow grass on a hillside slope.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here I walked straight to the Stob Stones, now on the Scottish Side, previously this view from the current border wall to the stones was part of England. To my dismay the place was crowded, with a horde of two tourists already there. The Cheviots are just getting too popular these days. It’s out of control.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/StobStones1.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/StobStones1.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Looking down a grassy slope, two figures stand next to a recumbant stone and a standing stone. In the distnace, various hills of yellow grass, brown heather and bracken, and a square of plantation.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;These stones are reputed to be where the “King of the Gypsies” was crowned. About 3km to the west is the village of Kirk Yetholm, where Scottish Gypsies had winter accomodation and a King - the Faa family, who had been given authority by King James V to “police and punish their subjects”. There is an excellent &lt;a href=&quot;https://blog.historicenvironment.scot/2022/10/the-gypsy-kings-and-queens-of-kirk-yetholm/&quot;&gt;blog post about this community from Historic Environment&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/StobStones.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/StobStones.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A closer view of the Stob Stones&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here, the old border crossed back to The Grey Stone, which is marked to lie on the current border “near Eccles Cairn”. Following St Cuthbert’s Way I crossed back into modern England, but I couldn’t see any large boulder, presumably at some point it was incorporated into the dry stone wall.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/BorderWall.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/BorderWall.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A gate crossing a dry stone wall, with a wooden fingerpost by it. The wall curves along the side of the grassy hill, while beyond the gate two quad-bike tracks snake up the hill to the summit.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/Crossing.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/Crossing.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A wooden finger post with two pointers in opposite directions; both say ST CUTHBERT’S WAY but underneath one says WELCOME TO SCOTLAND and the other WELCOME TO ENGLAND&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here, I walked up to Eccles Cairn. I don’t know who Eccles was, I don’t think he was that lad in the Goon Show (one for the oldies there).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/BorderStones/eccles.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/BorderStones/eccles.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A stone cairn on top of a grassy hill. In the distance rolling hills under a blue sky with clouds.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here I followed St Cuthbert’s Way down to Elsdonburn Farm where I had wonderful views of a stoat in white ermine coat bouncing about the forest edge. I stopped to watch him for a few minutes until he noticed me, stood up on his back legs and looked at me then dove into the undergrowth. Magical! Almost made me wish I had a half decent camera.&lt;/p&gt;

&lt;div id=&quot;leaflet-map-e3cfa208b2e3fcb84d03b1a731516f57&quot; class=&quot;leaflet-map&quot;&gt;&lt;/div&gt;
&lt;script&gt;(() =&gt; {
// Specify configuration variables, setup any elements and styling
    var leafletCdn = &quot;https://unpkg.com/leaflet@1.6.0/dist/&quot;;
    var esriLeafletCdn = &quot;https://unpkg.com/esri-leaflet/dist/&quot;;

    // Get tag input arguments &amp; inside block object list
    var tagInputArg = { &quot;center&quot; : [55.541026, -2.199510],
                 &quot;zoom&quot; : 12,
                 &quot;providerBasemap&quot;: &quot;OpenTopoMap&quot; } ;
    var blockLeafletItems = [
          {id: &quot;abf9c0da21b9db1b712129fe2842ae85&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.5365129722222,
                       &quot;longitude&quot; : -2.236739,
                       &quot;popupContent&quot; : &quot;The Stob Stones&quot;} },	
          {id: &quot;355fe1848ba87e98657d7daef58202c3&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.5365129722222,
                       &quot;longitude&quot; : -2.22962497222222,
                       &quot;popupContent&quot; : &quot;Tuppies Grave&quot;} },	                    
    {id: &quot;a55702dcc16d606bc6c01738816b48e3&quot;,
              type: &quot;LeafletGeoJSON&quot;,
              value: &quot;/assets/geojson/GtHetha.geojson&quot; },
];

    // Override the map div id if specified, apply default CSS
    var defaultMapElId = &quot;leaflet-map-e3cfa208b2e3fcb84d03b1a731516f57&quot;;
   var defaultMapElStyle = &quot;height:300px; margin-top:15px; margin-bottom:15px&quot;;
    var mapEl = document.getElementById(defaultMapElId);
    if(&apos;divId&apos; in tagInputArg){
        mapEl.id = tagInputArg[&apos;divId&apos;];
    }
    var defaultMapCssEl = document.createElement(&quot;style&quot;);
    defaultMapCssEl.innerHTML = 
        &quot;#&quot; + defaultMapElId + &quot;{&quot; + defaultMapElStyle + &quot;}&quot;;
    document.head.appendChild(defaultMapCssEl);

    var newWindowImgSrcBase64 = &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wUVFzAHq2j99AAAAV9JREFUSMdjYKAxYCRHk5ubG9+1a9fm/v//H6cadnb2G/fu3atlIceC379/c3z9+jUEn5q/f/8eYWBgYECxQE5OroqA2Y8ePXq0hJWV9Qc3N/caZB8wMjJKff361QpvEAkKCv4nYMGh9+/f26MLamhoyLx9+3b/nz9/VJCC6MiLFy9sWXCE3xlGRsZvWKQu4DOciYnpCzc396HPnz97weRxWRD/8OHDa4TiAt1wfn5+z79//zoxMDDALWAiN/lhM/zevXtH0NUx0dJwsiwgxXCccUCJ4dzc3DP+//+/gZ2d/duLFy9Is+Djx4+rCbn82rVrrxgYGF6RFUR8fHyZbGxsD7AZLiEhUSAiIrJSUlIyjOw4uHnz5gVHR0d1bC7/8+eP5d+/f8P+/PmjS1Ekr1ix4hcp6ploXVwPfQuwJlMmJiYBLS0tIVIMev36NRvRFnz48OHohw8fhkYQjQKCAAChiL6Pj/LM2QAAAABJRU5ErkJggg==&quot;;

// Actual mapping section; Specify a function to be called later that 
// assembles the correct JS components based on what the user specified in the 
// tag input arg, the block section of features, etc. Actually creates the map
// that is visible on the page

    function _getCenter(){
        var defaultCenter = [0,0];
        if(&quot;center&quot; in tagInputArg){
            return tagInputArg.center;
        } else {
            return defaultCenter;
        }
    }

    function _getZoom(){
        var defaultZoom = 1;
        if(&quot;zoom&quot; in tagInputArg){
            return tagInputArg.zoom
        } else {
            return defaultZoom;
        }
    }

    function _getProviderBasemap(){
        var defaultProviderBasemap = &quot;OpenStreetMap.Mapnik&quot;;
        if(&quot;providerBasemap&quot; in tagInputArg){
            return tagInputArg.providerBasemap;
        } else {
            return defaultProviderBasemap;
        }
    }


    function _addMarkerToMap(leafletItem, map){
        var m = leafletItem.value;
        var result = L.marker([m.latitude, m.longitude]).addTo(map);
        var potentialPopup = &quot;&quot;;
        if(&apos;popupContent&apos; in m){
                potentialPopup += m.popupContent;}
        if(&apos;href&apos; in m){
            potentialPopup += &apos;&lt;a href=&quot;&apos; + m.href + &apos;&quot;&gt;&apos; + 
                &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            result.bindPopup(potentialPopup);}
        if(!(&apos;center&apos; in tagInputArg)){
            // If the user didn&apos;t specify a center, infer from marker
            map.panTo(new L.LatLng(m.latitude, m.longitude));
        }
    }

    function _onEachFeature(feature, layer){
        var potentialPopup = &quot;&quot;
        if(feature.properties &amp;&amp; feature.properties.popupContent){
            potentialPopup += feature.properties.popupContent;
        }
        if(feature.properties &amp;&amp; feature.properties.href){
            potentialPopup += 
                &apos;&lt;a href=&quot;&apos; + feature.properties.href + &apos;&quot;&gt;&apos; + 
                    &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            layer.bindPopup(potentialPopup);
        }
    }

    function _addGeoJSONToMap(leafletItem, map){
        if(typeof leafletItem.value === &quot;string&quot;){
            fetch(leafletItem.value).then((resp) =&gt; {
                return resp.json();
            }).then((data) =&gt; {
                leafletItem.value = data;
                _addGeoJSONObjToMap(leafletItem, map);
            }).catch((err) =&gt; {
                console.log(&quot;Encountered err w/ geojson, attempting to fix..&quot;);
                console.log(err);
                _addGeoJSONObjToMap(leafletItem, map);
            });
        } else {
            _addGeoJSONObjToMap(leafletItem, map);
        }
     }

    function _addGeoJSONObjToMap(leafletItem, map){
         var geojson = L.geoJSON(leafletItem.value, { 
            onEachFeature: _onEachFeature 
        });
        layers = geojson.getLayers();
        for(var i=0; i&lt;layers.length; i++){
            try{
                var geom = layers[i].feature.geometry;
                if(!(&apos;center&apos; in tagInputArg)){
                    // If the user didn&apos;t specify a center, infer from geojson
                    //console.log(&quot;panning to &quot; + geom.coordinates);
                    map.panTo(new L.LatLng(geom.coordinates[1],
                                           geom.coordinates[0]));
                }
            } catch(e){}
        }
       
        geojson.addTo(map);
       
    }

    function _processLeafletItem(leafletItem, map){
        switch(leafletItem.type){
            case &quot;LeafletMarker&quot;:
                _addMarkerToMap(leafletItem, map);
                break;
            case &quot;LeafletGeoJSON&quot;:
                _addGeoJSONToMap(leafletItem, map);
                break;
            case undefined:
                break; 
            default:
                console.log(&quot;Couldn&apos;t add item &quot; + leafletItem.id);
                break;
        }
    }

//The actual section that is called that creates a map
    function createMap(){
        console.log(&quot;Creating map e3cfa208b2e3fcb84d03b1a731516f57 with these args:&quot;);
        console.log(tagInputArg);

        //Initialize Map with the correct input arguments
        var map = L.map(mapEl.id, 
            {worldCopyJump: true}).setView(_getCenter(), _getZoom());
        L.tileLayer.provider(_getProviderBasemap()).addTo(map);
        if(&quot;esriBasemap&quot; in tagInputArg){
            L.esri.basemapLayer(tagInputArg.esriBasemap).addTo(map);
        }

        //process each Leaflet Item passed in between the block tag middle
        for(var i=0; i&lt;blockLeafletItems.length; i++){
            var leafletItem = blockLeafletItems[i];
            console.log(&quot;Adding leaflet item &quot; + leafletItem.id + &quot;:&quot;);
            console.log(leafletItem);
            _processLeafletItem(leafletItem, map);
        }
    }

// Load the correct JS libraries/CSS by adding to head: 
// When ready, call createMap() to create the map on the page

    function _createMap(){
        // helper function to draw the map only when everything is loaded,
        // safeguards against multiple calls to window.onload
        var prevOnLoad;
        if(window.onload){
            prevOnLoad = window.onload;
        }
        window.onload = () =&gt; {
            createMap();
            if(prevOnLoad){
                prevOnLoad();
            }
        }
    }

    var leafletCssId = &quot;leaflet-css-head&quot;;
    var leafletJsId = &quot;leaflet-js-head&quot;;
    var esriLeafletJsId = &quot;esri-leaflet-js-head&quot;;
    var leafletProvidersJsId = &quot;leaflet-providers-js-head&quot;;

    // Add the leaflet CSS first, don&apos;t worry about when it loads
    var leafletCssEl = document.createElement(&quot;link&quot;);
    leafletCssEl.id = leafletCssId;
    leafletCssEl.rel = &quot;stylesheet&quot;;
    leafletCssEl.href = leafletCdn + &quot;leaflet.css&quot;;
    if(!document.getElementById(leafletCssEl.id)){
        document.head.appendChild(leafletCssEl);
    }

    function addToHeadIfNotLoaded(el) {
        //Add the el to the head if it doesn&apos;t exist already. If it does,
        //everything we need is already loaded, so draw the map
        if(!document.getElementById(el.id)){
            document.head.appendChild(el);
        } else {
            _createMap();
        }
    }

    // Load the main leaflet.js code, wait for it to load
    var leafletJsEl = document.createElement(&quot;script&quot;);
    leafletJsEl.id = leafletJsId;
    leafletJsEl.onload = () =&gt; {
        //After loaded, load the esri-leaflet.js code, wait for it to load
        var esriEl = document.createElement(&quot;script&quot;);
        esriEl.id = esriLeafletJsId;
        esriEl.onload = () =&gt; {
            //After loaded, add the inline leaflet-providers &lt;script&gt;
            provEl = document.createElement(&quot;script&quot;);
            provEl.id = leafletProvidersJsId;
            provEl.innerHTML = `//Taken from https://github.com/leaflet-extras/leaflet-providers
(function (root, factory) {
	if (typeof define === &apos;function&apos; &amp;&amp; define.amd) {
		// AMD. Register as an anonymous module.
		define([&apos;leaflet&apos;], factory);
	} else if (typeof modules === &apos;object&apos; &amp;&amp; module.exports) {
		// define a Common JS module that relies on &apos;leaflet&apos;
		module.exports = factory(require(&apos;leaflet&apos;));
	} else {
		// Assume Leaflet is loaded into global object L already
		factory(L);
	}
}(this, function (L) {
	&apos;use strict&apos;;

	L.TileLayer.Provider = L.TileLayer.extend({
		initialize: function (arg, options) {
			var providers = L.TileLayer.Provider.providers;

			var parts = arg.split(&apos;.&apos;);

			var providerName = parts[0];
			var variantName = parts[1];

			if (!providers[providerName]) {
				throw &apos;No such provider (&apos; + providerName + &apos;)&apos;;
			}

			var provider = {
				url: providers[providerName].url,
				options: providers[providerName].options
			};

			// overwrite values in provider from variant.
			if (variantName &amp;&amp; &apos;variants&apos; in providers[providerName]) {
				if (!(variantName in providers[providerName].variants)) {
					throw &apos;No such variant of &apos; + providerName + &apos; (&apos; + variantName + &apos;)&apos;;
				}
				var variant = providers[providerName].variants[variantName];
				var variantOptions;
				if (typeof variant === &apos;string&apos;) {
					variantOptions = {
						variant: variant
					};
				} else {
					variantOptions = variant.options;
				}
				provider = {
					url: variant.url || provider.url,
					options: L.Util.extend({}, provider.options, variantOptions)
				};
			}

			// replace attribution placeholders with their values from toplevel provider attribution,
			// recursively
			var attributionReplacer = function (attr) {
				if (attr.indexOf(&apos;{attribution.&apos;) === -1) {
					return attr;
				}
				return attr.replace(/\{attribution.(\w*)\}/g,
					function (match, attributionName) {
						return attributionReplacer(providers[attributionName].options.attribution);
					}
				);
			};
			provider.options.attribution = attributionReplacer(provider.options.attribution);

			// Compute final options combining provider options with any user overrides
			var layerOpts = L.Util.extend({}, provider.options, options);
			L.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);
		}
	});

	/**
	 * Definition of providers.
	 * see http://leafletjs.com/reference.html#tilelayer for options in the options map.
	 */

	L.TileLayer.Provider.providers = {
		OpenStreetMap: {
			url: &apos;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&apos;
			},
			variants: {
				Mapnik: {},
				DE: {
					url: &apos;https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18
					}
				},
				CH: {
					url: &apos;https://tile.osm.ch/switzerland/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18,
						bounds: [[45, 5], [48, 11]]
					}
				},
				France: {
					url: &apos;https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 20,
						attribution: &apos;&amp;copy; Openstreetmap France | {attribution.OpenStreetMap}&apos;
					}
				},
				HOT: {
					url: &apos;https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png&apos;,
					options: {
						attribution:
							&apos;{attribution.OpenStreetMap}, &apos; +
							&apos;Tiles style by &lt;a href=&quot;https://www.hotosm.org/&quot; target=&quot;_blank&quot;&gt;Humanitarian OpenStreetMap Team&lt;/a&gt; &apos; +
							&apos;hosted by &lt;a href=&quot;https://openstreetmap.fr/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap France&lt;/a&gt;&apos;
					}
				},
				BZH: {
					url: &apos;https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png&apos;,
					options: {
						attribution: &apos;{attribution.OpenStreetMap}, Tiles courtesy of &lt;a href=&quot;http://www.openstreetmap.bzh/&quot; target=&quot;_blank&quot;&gt;Breton OpenStreetMap Team&lt;/a&gt;&apos;,
						bounds: [[46.2, -5.5], [50, 0.7]]
					}
				}
			}
		},
		OpenSeaMap: {
			url: &apos;https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openseamap.org&quot;&gt;OpenSeaMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenPtMap: {
			url: &apos;http://openptmap.org/tiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openptmap.org&quot;&gt;OpenPtMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenTopoMap: {
			url: &apos;https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: {attribution.OpenStreetMap}, &lt;a href=&quot;http://viewfinderpanoramas.org&quot;&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=&quot;https://opentopomap.org&quot;&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenRailwayMap: {
			url: &apos;https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://www.OpenRailwayMap.org&quot;&gt;OpenRailwayMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenFireMap: {
			url: &apos;http://openfiremap.org/hytiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;http://www.openfiremap.org&quot;&gt;OpenFireMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		SafeCast: {
			url: &apos;https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 16,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://blog.safecast.org/about/&quot;&gt;SafeCast&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		Thunderforest: {
			url: &apos;https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}&apos;,
			options: {
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;http://www.thunderforest.com/&quot;&gt;Thunderforest&lt;/a&gt;, {attribution.OpenStreetMap}&apos;,
				variant: &apos;cycle&apos;,
				apikey: &apos;&lt;insert your api key here&gt;&apos;,
				maxZoom: 22
			},
			variants: {
				OpenCycleMap: &apos;cycle&apos;,
				Transport: {
					options: {
						variant: &apos;transport&apos;
					}
				},
				TransportDark: {
					options: {
						variant: &apos;transport-dark&apos;
					}
				},
				SpinalMap: {
					options: {
						variant: &apos;spinal-map&apos;
					}
				},
				Landscape: &apos;landscape&apos;,
				Outdoors: &apos;outdoors&apos;,
				Pioneer: &apos;pioneer&apos;
			}
		},
		OpenMapSurfer: {
			url: &apos;https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				variant: &apos;roads&apos;,
				attribution: &apos;Imagery from &lt;a href=&quot;http://giscience.uni-hd.de/&quot;&gt;GIScience Research Group @ University of Heidelberg&lt;/a&gt; | Map data &apos;
			},
			variants: {
				Roads: {
					options: {
						variant: &apos;roads&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				Hybrid: {
					options: {
						variant: &apos;hybrid&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				AdminBounds: {
					options: {
						variant: &apos;adminb&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				ContourLines: {
					options: {
						variant: &apos;asterc&apos;,
						maxZoom: 18,
						minZoom: 13,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;&apos;
					}
				},
				Hillshade: {
					options: {
						variant: &apos;asterh&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;, &lt;a href=&quot;http://srtm.csi.cgiar.org/&quot;&gt;SRTM&lt;/a&gt;&apos;
					}
				},
				ElementsAtRisk: {
					options: {
						variant: &apos;elements_at_risk&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				}
			}
		},
		Hydda: {
			url: &apos;https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 18,
				variant: &apos;full&apos;,
				attribution: &apos;Tiles courtesy of &lt;a href=&quot;http://openstreetmap.se/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap Sweden&lt;/a&gt; &amp;mdash; Map data {attribution.OpenStreetMap}&apos;
			},
			variants: {
				Full: &apos;full&apos;,
				Base: &apos;base&apos;,
				RoadsAndLabels: &apos;roads_and_labels&apos;
			}
		},
		MapBox: {
			url: &apos;https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}{r}.png?access_token={accessToken}&apos;,
			options: {
				attribution:
					&apos;&lt;a href=&quot;https://www.mapbox.com/about/maps/&quot; target=&quot;_blank&quot;&gt;&amp;copy; Mapbox&lt;/a&gt; &apos; +
					&apos;{attribution.OpenStreetMap} &apos; +
					&apos;&lt;a href=&quot;https://www.mapbox.com/map-feedback/&quot; target=&quot;_blank&quot;&gt;Improve this map&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				id: &apos;mapbox.streets&apos;,
				accessToken: &apos;&lt;insert your access token here&gt;&apos;,
			}
		},
		Stamen: {
			url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}&apos;,
			options: {
				attribution:
					&apos;Map tiles by &lt;a href=&quot;http://stamen.com&quot;&gt;Stamen Design&lt;/a&gt;, &apos; +
					&apos;&lt;a href=&quot;http://creativecommons.org/licenses/by/3.0&quot;&gt;CC BY 3.0&lt;/a&gt; &amp;mdash; &apos; +
					&apos;Map data {attribution.OpenStreetMap}&apos;,
				subdomains: &apos;abcd&apos;,
				minZoom: 0,
				maxZoom: 20,
				variant: &apos;toner&apos;,
				ext: &apos;png&apos;
			},
			variants: {
				Toner: &apos;toner&apos;,
				TonerBackground: &apos;toner-background&apos;,
				TonerHybrid: &apos;toner-hybrid&apos;,
				TonerLines: &apos;toner-lines&apos;,
				TonerLabels: &apos;toner-labels&apos;,
				TonerLite: &apos;toner-lite&apos;,
				Watercolor: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;watercolor&apos;,
						ext: &apos;jpg&apos;,
						minZoom: 1,
						maxZoom: 16
					}
				},
				Terrain: {
					options: {
						variant: &apos;terrain&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TerrainBackground: {
					options: {
						variant: &apos;terrain-background&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TopOSMRelief: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;toposm-color-relief&apos;,
						ext: &apos;jpg&apos;,
						bounds: [[22, -132], [51, -56]]
					}
				},
				TopOSMFeatures: {
					options: {
						variant: &apos;toposm-features&apos;,
						bounds: [[22, -132], [51, -56]],
						opacity: 0.9
					}
				}
			}
		},
		Esri: {
			url: &apos;https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}&apos;,
			options: {
				variant: &apos;World_Street_Map&apos;,
				attribution: &apos;Tiles &amp;copy; Esri&apos;
			},
			variants: {
				WorldStreetMap: {
					options: {
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012&apos;
					}
				},
				DeLorme: {
					options: {
						variant: &apos;Specialty/DeLorme_World_Base_Map&apos;,
						minZoom: 1,
						maxZoom: 11,
						attribution: &apos;{attribution.Esri} &amp;mdash; Copyright: &amp;copy;2012 DeLorme&apos;
					}
				},
				WorldTopoMap: {
					options: {
						variant: &apos;World_Topo_Map&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community&apos;
					}
				},
				WorldImagery: {
					options: {
						variant: &apos;World_Imagery&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community&apos;
					}
				},
				WorldTerrain: {
					options: {
						variant: &apos;World_Terrain_Base&apos;,
						maxZoom: 13,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: USGS, Esri, TANA, DeLorme, and NPS&apos;
					}
				},
				WorldShadedRelief: {
					options: {
						variant: &apos;World_Shaded_Relief&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: Esri&apos;
					}
				},
				WorldPhysical: {
					options: {
						variant: &apos;World_Physical_Map&apos;,
						maxZoom: 8,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: US National Park Service&apos;
					}
				},
				OceanBasemap: {
					options: {
						variant: &apos;Ocean_Basemap&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri&apos;
					}
				},
				NatGeoWorldMap: {
					options: {
						variant: &apos;NatGeo_World_Map&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC&apos;
					}
				},
				WorldGrayCanvas: {
					options: {
						variant: &apos;Canvas/World_Light_Gray_Base&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; Esri, DeLorme, NAVTEQ&apos;
					}
				}
			}
		},
		OpenWeatherMap: {
			url: &apos;http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data &amp;copy; &lt;a href=&quot;http://openweathermap.org&quot;&gt;OpenWeatherMap&lt;/a&gt;&apos;,
				apiKey:&apos;&lt;insert your api key here&gt;&apos;,
				opacity: 0.5
			},
			variants: {
				Clouds: &apos;clouds&apos;,
				CloudsClassic: &apos;clouds_cls&apos;,
				Precipitation: &apos;precipitation&apos;,
				PrecipitationClassic: &apos;precipitation_cls&apos;,
				Rain: &apos;rain&apos;,
				RainClassic: &apos;rain_cls&apos;,
				Pressure: &apos;pressure&apos;,
				PressureContour: &apos;pressure_cntr&apos;,
				Wind: &apos;wind&apos;,
				Temperature: &apos;temp&apos;,
				Snow: &apos;snow&apos;
			}
		},
		HERE: {
			/*
			 * HERE maps, formerly Nokia maps.
			 * These basemaps are free, but you need an API key. Please sign up at
			 * https://developer.here.com/plans
			 */
			url:
				&apos;https://{s}.{base}.maps.api.here.com/maptile/2.1/&apos; +
				&apos;{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?&apos; +
				&apos;app_id={app_id}&amp;app_code={app_code}&amp;lg={language}&apos;,
			options: {
				attribution:
					&apos;Map &amp;copy; 1987-&apos; + new Date().getFullYear() + &apos; &lt;a href=&quot;http://developer.here.com&quot;&gt;HERE&lt;/a&gt;&apos;,
				subdomains: &apos;1234&apos;,
				mapID: &apos;newest&apos;,
				&apos;app_id&apos;: &apos;&lt;insert your app_id here&gt;&apos;,
				&apos;app_code&apos;: &apos;&lt;insert your app_code here&gt;&apos;,
				base: &apos;base&apos;,
				variant: &apos;normal.day&apos;,
				maxZoom: 20,
				type: &apos;maptile&apos;,
				language: &apos;eng&apos;,
				format: &apos;png8&apos;,
				size: &apos;256&apos;
			},
			variants: {
				normalDay: &apos;normal.day&apos;,
				normalDayCustom: &apos;normal.day.custom&apos;,
				normalDayGrey: &apos;normal.day.grey&apos;,
				normalDayMobile: &apos;normal.day.mobile&apos;,
				normalDayGreyMobile: &apos;normal.day.grey.mobile&apos;,
				normalDayTransit: &apos;normal.day.transit&apos;,
				normalDayTransitMobile: &apos;normal.day.transit.mobile&apos;,
				normalNight: &apos;normal.night&apos;,
				normalNightMobile: &apos;normal.night.mobile&apos;,
				normalNightGrey: &apos;normal.night.grey&apos;,
				normalNightGreyMobile: &apos;normal.night.grey.mobile&apos;,
				normalNightTransit: &apos;normal.night.transit&apos;,
				normalNightTransitMobile: &apos;normal.night.transit.mobile&apos;,
				reducedDay: &apos;reduced.day&apos;,
				reducedNight: &apos;reduced.night&apos;,
				basicMap: {
					options: {
						type: &apos;basetile&apos;
					}
				},
				mapLabels: {
					options: {
						type: &apos;labeltile&apos;,
						format: &apos;png&apos;
					}
				},
				trafficFlow: {
					options: {
						base: &apos;traffic&apos;,
						type: &apos;flowtile&apos;
					}
				},
				carnavDayGrey: &apos;carnav.day.grey&apos;,
				hybridDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day&apos;
					}
				},
				hybridDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.mobile&apos;
					}
				},
				hybridDayTransit: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.transit&apos;
					}
				},
				hybridDayGrey: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.grey.day&apos;
					}
				},
				pedestrianDay: &apos;pedestrian.day&apos;,
				pedestrianNight: &apos;pedestrian.night&apos;,
				satelliteDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;satellite.day&apos;
					}
				},
				terrainDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day&apos;
					}
				},
				terrainDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day.mobile&apos;
					}
				}
			}
		},
		FreeMapSK: {
			url: &apos;http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg&apos;,
			options: {
				minZoom: 8,
				maxZoom: 16,
				subdomains: &apos;1234&apos;,
				bounds: [[47.204642, 15.996093], [49.830896, 22.576904]],
				attribution:
					&apos;{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 &lt;a href=&quot;http://freemap.sk&quot;&gt;Freemap.sk&lt;/a&gt;&apos;
			}
		},
		MtbMap: {
			url: &apos;http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png&apos;,
			options: {
				attribution:
					&apos;{attribution.OpenStreetMap} &amp;amp; USGS&apos;
			}
		},
		CartoDB: {
			url: &apos;https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;{attribution.OpenStreetMap} &amp;copy; &lt;a href=&quot;https://carto.com/attributions&quot;&gt;CARTO&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				maxZoom: 19,
				variant: &apos;light_all&apos;
			},
			variants: {
				Positron: &apos;light_all&apos;,
				PositronNoLabels: &apos;light_nolabels&apos;,
				PositronOnlyLabels: &apos;light_only_labels&apos;,
				DarkMatter: &apos;dark_all&apos;,
				DarkMatterNoLabels: &apos;dark_nolabels&apos;,
				DarkMatterOnlyLabels: &apos;dark_only_labels&apos;,
				Voyager: &apos;rastertiles/voyager&apos;,
				VoyagerNoLabels: &apos;rastertiles/voyager_nolabels&apos;,
				VoyagerOnlyLabels: &apos;rastertiles/voyager_only_labels&apos;,
				VoyagerLabelsUnder: &apos;rastertiles/voyager_labels_under&apos;
			}
		},
		HikeBike: {
			url: &apos;https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;{attribution.OpenStreetMap}&apos;,
				variant: &apos;hikebike&apos;
			},
			variants: {
				HikeBike: {},
				HillShading: {
					options: {
						maxZoom: 15,
						variant: &apos;hillshading&apos;
					}
				}
			}
		},
		BasemapAT: {
			url: &apos;https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Datenquelle: &lt;a href=&quot;https://www.basemap.at&quot;&gt;basemap.at&lt;/a&gt;&apos;,
				subdomains: [&apos;&apos;, &apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;],
				format: &apos;png&apos;,
				bounds: [[46.358770, 8.782379], [49.037872, 17.189532]],
				variant: &apos;geolandbasemap&apos;
			},
			variants: {
				basemap: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;geolandbasemap&apos;
					}
				},
				grau: &apos;bmapgrau&apos;,
				overlay: &apos;bmapoverlay&apos;,
				highdpi: {
					options: {
						variant: &apos;bmaphidpi&apos;,
						format: &apos;jpeg&apos;
					}
				},
				orthofoto: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;bmaporthofoto30cm&apos;,
						format: &apos;jpeg&apos;
					}
				}
			}
		},
		nlmaps: {
			url: &apos;https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png&apos;,
			options: {
				minZoom: 6,
				maxZoom: 19,
				bounds: [[50.5, 3.25], [54, 7.6]],
				attribution: &apos;Kaartgegevens &amp;copy; &lt;a href=&quot;kadaster.nl&quot;&gt;Kadaster&lt;/a&gt;&apos;
			},
			variants: {
				&apos;standaard&apos;: &apos;brtachtergrondkaart&apos;,
				&apos;pastel&apos;: &apos;brtachtergrondkaartpastel&apos;,
				&apos;grijs&apos;: &apos;brtachtergrondkaartgrijs&apos;,
				&apos;luchtfoto&apos;: {
					&apos;url&apos;: &apos;https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts/1.0.0/2016_ortho25/EPSG:3857/{z}/{x}/{y}.png&apos;,
				}
			}
		},
		NASAGIBS: {
			url: &apos;https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}&apos;,
			options: {
				attribution:
					&apos;Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System &apos; +
					&apos;(&lt;a href=&quot;https://earthdata.nasa.gov&quot;&gt;ESDIS&lt;/a&gt;) with funding provided by NASA/HQ.&apos;,
				bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],
				minZoom: 1,
				maxZoom: 9,
				format: &apos;jpg&apos;,
				time: &apos;&apos;,
				tilematrixset: &apos;GoogleMapsCompatible_Level&apos;
			},
			variants: {
				ModisTerraTrueColorCR: &apos;MODIS_Terra_CorrectedReflectance_TrueColor&apos;,
				ModisTerraBands367CR: &apos;MODIS_Terra_CorrectedReflectance_Bands367&apos;,
				ViirsEarthAtNight2012: {
					options: {
						variant: &apos;VIIRS_CityLights_2012&apos;,
						maxZoom: 8
					}
				},
				ModisTerraLSTDay: {
					options: {
						variant: &apos;MODIS_Terra_Land_Surface_Temp_Day&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				},
				ModisTerraSnowCover: {
					options: {
						variant: &apos;MODIS_Terra_Snow_Cover&apos;,
						format: &apos;png&apos;,
						maxZoom: 8,
						opacity: 0.75
					}
				},
				ModisTerraAOD: {
					options: {
						variant: &apos;MODIS_Terra_Aerosol&apos;,
						format: &apos;png&apos;,
						maxZoom: 6,
						opacity: 0.75
					}
				},
				ModisTerraChlorophyll: {
					options: {
						variant: &apos;MODIS_Terra_Chlorophyll_A&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				}
			}
		},
		NLS: {
			// NLS maps are copyright National library of Scotland.
			// http://maps.nls.uk/projects/api/index.html
			// Please contact NLS for anything other than non-commercial low volume usage
			//
			// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s
			//   z0-9  - 1:1m
			//  z10-11 - quarter inch (1:253440)
			//  z12-18 - one inch (1:63360)
			url: &apos;https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://geo.nls.uk/maps/&quot;&gt;National Library of Scotland Historic Maps&lt;/a&gt;&apos;,
				bounds: [[49.6, -12], [61.7, 3]],
				minZoom: 1,
				maxZoom: 18,
				subdomains: &apos;0123&apos;,
			}
		},
		JusticeMap: {
			// Justice Map (http://www.justicemap.org/)
			// Visualize race and income data for your community, county and country.
			// Includes tools for data journalists, bloggers and community activists.
			url: &apos;http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://www.justicemap.org/terms.php&quot;&gt;Justice Map&lt;/a&gt;&apos;,
				// one of &apos;county&apos;, &apos;tract&apos;, &apos;block&apos;
				size: &apos;county&apos;,
				// Bounds for USA, including Alaska and Hawaii
				bounds: [[14, -180], [72, -56]]
			},
			variants: {
				income: &apos;income&apos;,
				americanIndian: &apos;indian&apos;,
				asian: &apos;asian&apos;,
				black: &apos;black&apos;,
				hispanic: &apos;hispanic&apos;,
				multi: &apos;multi&apos;,
				nonWhite: &apos;nonwhite&apos;,
				white: &apos;white&apos;,
				plurality: &apos;plural&apos;
			}
		},
		Wikimedia: {
			url: &apos;https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;https://wikimediafoundation.org/wiki/Maps_Terms_of_Use&quot;&gt;Wikimedia&lt;/a&gt;&apos;,
				minZoom: 1,
				maxZoom: 19
			}
		},
		GeoportailFrance: {
			url: &apos;https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&amp;SERVICE=WMTS&amp;VERSION=1.0.0&amp;STYLE={style}&amp;TILEMATRIXSET=PM&amp;FORMAT={format}&amp;LAYER={variant}&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}&apos;,
			options: {
				attribution: &apos;&lt;a target=&quot;_blank&quot; href=&quot;https://www.geoportail.gouv.fr/&quot;&gt;Geoportail France&lt;/a&gt;&apos;,
				bounds: [[-75, -180], [81, 180]],
				minZoom: 2,
				maxZoom: 18,
				// Get your own geoportail apikey here : http://professionnels.ign.fr/ign/contrats/
				// NB : &apos;choisirgeoportail&apos; is a demonstration key that comes with no guarantee
				apikey: &apos;choisirgeoportail&apos;,
				format: &apos;image/jpeg&apos;,
				style : &apos;normal&apos;,
				variant: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;
			},
			variants: {
				parcels: {
					options : {
						variant: &apos;CADASTRALPARCELS.PARCELS&apos;,
						maxZoom: 20,
						style : &apos;bdparcellaire&apos;,
						format: &apos;image/png&apos;
					}
				},
				ignMaps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS&apos;,
				maps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;,
				orthos: {
					options: {
						maxZoom: 19,
						variant: &apos;ORTHOIMAGERY.ORTHOPHOTOS&apos;
					}
				}
			}
		},
		OneMapSG: {
			url: &apos;https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				variant: &apos;Default&apos;,
				minZoom: 11,
				maxZoom: 18,
				bounds: [[1.56073, 104.11475], [1.16, 103.502]],
				attribution: &apos;&lt;img src=&quot;https://docs.onemap.sg/maps/images/oneMap64-01.png&quot; style=&quot;height:20px;width:20px;&quot;/&gt; New OneMap | Map data &amp;copy; contributors, &lt;a href=&quot;http://SLA.gov.sg&quot;&gt;Singapore Land Authority&lt;/a&gt;&apos;
			},
			variants: {
				Default: &apos;Default&apos;,
				Night: &apos;Night&apos;,
				Original: &apos;Original&apos;,
				Grey: &apos;Grey&apos;,
				LandLot: &apos;LandLot&apos;
			}
		}
	};

	L.tileLayer.provider = function (provider, options) {
		return new L.TileLayer.Provider(provider, options);
	};

	return L;
}));
`;
            if(!document.getElementById(provEl.id)){
                 document.head.appendChild(provEl);        
            }
            _createMap();
            }
        esriEl.src = esriLeafletCdn + &quot;esri-leaflet.js&quot;;
        addToHeadIfNotLoaded(esriEl);
        };
    leafletJsEl.src = leafletCdn + &quot;leaflet.js&quot;;
    addToHeadIfNotLoaded(leafletJsEl);
})();
&lt;/script&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Map of route taken&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>sarah</name></author><category term="Northumberland" /><category term="walks" /><category term="northumberland" /><category term="history" /><summary type="html"></summary></entry><entry><title type="html">Shepherd’s Cairn Walk</title><link href="https://sarahdal.github.io//northumberland/2024/12/14/Alnham.html" rel="alternate" type="text/html" title="Shepherd’s Cairn Walk" /><published>2024-12-14T00:00:00+00:00</published><updated>2024-12-14T00:00:00+00:00</updated><id>https://sarahdal.github.io//northumberland/2024/12/14/Alnham</id><content type="html" xml:base="https://sarahdal.github.io//northumberland/2024/12/14/Alnham.html">&lt;hr /&gt;

&lt;p&gt;An early start to walk up to the Shepherd’s Cairn, near Alnham. This marks the site where two shepherds, Jock Scott and Willie Middlemas, sadly perished while trying to drive their tractor home from Alnham to Ewartly Shank.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/Morning.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/Morning.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A view over a drystone wall of rolling hills in the early morning light. On the distant horizon is the familiar shape of the Simonside Hills.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I head up onto the moors following the Salter’s Road. This is an ancient route through the Cheviots that joins Clennel Street at the border; when it’s not crossing bog it runs in hollow-ways worn down by hundreds of years of use. This route starts in Alnham and climbs north-west steeply up into boggy moorland, passing through White Gate. (You can see where Salter’s Road joins Clennell Street when I was &lt;a href=&quot;/northumberland/2024/02/24/RorysStill.html&quot;&gt;walking up near Usway&lt;/a&gt;.)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/WhiteGate.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/WhiteGate.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A wooden 5-bar gate out on moorland in the morning light. To the right, the end of the a tumble-down wall has a wire fence running along it and a 4-step stile crossing it. The lefthand gate pillar has some small circular rights-of-way markers on it. The right hand wooden gatepost abuts a much stockier, anciend stone gate post, to which part of a wooden fence rests up against. There’s a frozen puddle visible through the lower bars of the gate; behind, the boggy moorland stretches away to a gente hill on the horizon, all very brown and orange in winter. The sky is clear and crisp&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here it should have been a pleasant walk up to the top of High Knowes then down to the cairn. Unfortunately, most of the hillside had been divvied up with electric fence, so I had to take a bit of detour round to the memorial cairn.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/Mem2.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/Mem2.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A sandstone boulder stands amid a cairn of smaller rocks on the brown grassy hillside. One face is smooth and the words below are carved into it. The stone is speckled with circular lichens.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;“Dedicated in memory of the shepherds Jock Scott - Willie Middlemas who perished here in the snow 17th November 1962. Erected by Northumberland National Park Authority and NNP Mountain Rescue Team”&lt;/p&gt;

&lt;p&gt;On Saturday 17 November, 1962, after a trip to Rothbury Mart, Jock Scott and Willie Middlemas dropped off Willie Bulloch at Castle Farm near Alnham, then set off home to Ewartly Shank. Two days later, Willie Bulloch was out with his sheep and stopped by Ewartly Shank to see them, only to find Jock’s wife asking when she should expect them back. Realising what had happened, Willie raised the alarm.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/Mem1.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/Mem1.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The memorial from further away. We can see the hills behind, the location is very bleak&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Rescue parties including the police, RAF, shepherds and farm workers began the search. The tractor was found abandoned and Jock’s body was discovered buried under drifting snow near High Knowes late on the Tuesday. He was only half a mile from home. The following day, Willie’s body was found only 100 yards away from where Jock had perished.&lt;/p&gt;

&lt;p&gt;This incident led to the National Park Voluntary Rangers creating what is now the Northumberland National Park Mountain Rescue service. &lt;a href=&quot;https://www.grough.co.uk/magazine/2007/11/17/cairn-marks-rescue-teams-tragic-beginnings#&quot;&gt;The memorial stone was raised in 2007.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Walking down from the memorial, I met the modern road between Alnham and Ewartly Shank (which didn’t exist in 1962). A footpath led a bit away from it, towards Pidon’s Leap. A large rocky outcrop surrounded by dead bracken sat above a cleugh, with a lovely little waterfall at the bottom. Pigdon was supposedly a sheep rustler who lept across the gorge with a stolen sheep to escape his pursuers.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/pigdon.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/pigdon.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A stream flows through the bottom of a steep sided little valley, cascading down a little rocky waterfall. The banks are covered in brown dead bracken.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Up from here and I stopped at Tod Stones to eat a sandwich. Here are the rocky remains of a medieval farmstead; a &lt;a href=&quot;https://keystothepast.info/search-records/results-of-search/results-of-search-2/site-details/?PRN=N1350&quot;&gt;1979 survey suggests that part of the building may have been an illicit whisky still&lt;/a&gt;! You know how I &lt;a href=&quot;/northumberland/2024/02/24/RorysStill.html&quot;&gt;like an&lt;/a&gt; &lt;a href=&quot;/northumberland/2024/01/27/WhiskyStills.html&quot;&gt;illicit&lt;/a&gt; &lt;a href=&quot;/northumberland/2024/02/17/BlindburnStill.html&quot;&gt;still&lt;/a&gt;.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/TodStones.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/TodStones.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Rocks and rubble remains of the Tod Stones farmstead enclose a grassy space on the hillside. The land beyond gently slopes down, then back up the opposite hillside; a few other gentle hills and a small bit of plantation are in the distance.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;From here, it was a pleasant enough walk back through pheasant rearing landscape and fields of sheep. I took a detour around some wind-blown plantation and found a boundary stone, marked with a S scored through with horizontal lines - I can’t find anything online about it.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/Hazletonrig.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/Hazletonrig.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The track curves down a steep slope between two hillsides. One has a plantation forestry, the other has naked broadleaf trees. More hills of grass and trees in the distance witha  view of gently sloping moorland. The sky is starting to cloud over.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/Alnham/stone.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/Alnham/stone.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A weathered sandstone pillar about 50cm high, stuck behind a 4-strand wire fence. An “S” can be seen with 4 horizontal lines carved across it&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;A nice morning’s walk, even with the extra faffing around electric fence. The route tried to follow &lt;a href=&quot;https://www.northumberlandnationalpark.org.uk/walk/the-shepherds-cairn-walk/&quot;&gt;this national park leaflet&lt;/a&gt; if the electric fences hadn’t been in the way.&lt;/p&gt;

&lt;div id=&quot;leaflet-map-9d979ea780b98ac4fa4715c233f0c6a7&quot; class=&quot;leaflet-map&quot;&gt;&lt;/div&gt;
&lt;script&gt;(() =&gt; {
// Specify configuration variables, setup any elements and styling
    var leafletCdn = &quot;https://unpkg.com/leaflet@1.6.0/dist/&quot;;
    var esriLeafletCdn = &quot;https://unpkg.com/esri-leaflet/dist/&quot;;

    // Get tag input arguments &amp; inside block object list
    var tagInputArg = { &quot;center&quot; : [55.400833, -2.034542],
                 &quot;zoom&quot; : 12,
                 &quot;providerBasemap&quot;: &quot;OpenTopoMap&quot; } ;
    var blockLeafletItems = [
          {id: &quot;0f8f769df21a3187d66369d028f71a57&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.408166,
                       &quot;longitude&quot; : -2.053505,
                       &quot;popupContent&quot; : &quot;The Shepherd&apos;s Cairn&quot;} },	
          {id: &quot;f8b3a6e9dd39bab69a7d833fb19d82a6&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.415367,
                       &quot;longitude&quot; : -2.063080,
                       &quot;popupContent&quot; : &quot;Ewartly Shank&quot;} },	
          {id: &quot;5f3a82bcb070abc446a1b27cc2e7edf1&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.391669,
                       &quot;longitude&quot; : -2.009231,
                       &quot;popupContent&quot; : &quot;Alnham&quot;} },	   
          {id: &quot;14fa6cfdb684c058292a3aa5a59c61ac&quot;,
              type: &quot;LeafletMarker&quot;,
              value: { &quot;latitude&quot; : 55.385408,
                       &quot;longitude&quot; : -2.057522,
                       &quot;popupContent&quot; : &quot;Boundary Stone&quot;} },                       
    {id: &quot;482c979164936b97bdc0b8947e4993b3&quot;,
              type: &quot;LeafletGeoJSON&quot;,
              value: &quot;/assets/geojson/Alnham.geojson&quot; },
];

    // Override the map div id if specified, apply default CSS
    var defaultMapElId = &quot;leaflet-map-9d979ea780b98ac4fa4715c233f0c6a7&quot;;
   var defaultMapElStyle = &quot;height:300px; margin-top:15px; margin-bottom:15px&quot;;
    var mapEl = document.getElementById(defaultMapElId);
    if(&apos;divId&apos; in tagInputArg){
        mapEl.id = tagInputArg[&apos;divId&apos;];
    }
    var defaultMapCssEl = document.createElement(&quot;style&quot;);
    defaultMapCssEl.innerHTML = 
        &quot;#&quot; + defaultMapElId + &quot;{&quot; + defaultMapElStyle + &quot;}&quot;;
    document.head.appendChild(defaultMapCssEl);

    var newWindowImgSrcBase64 = &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wUVFzAHq2j99AAAAV9JREFUSMdjYKAxYCRHk5ubG9+1a9fm/v//H6cadnb2G/fu3atlIceC379/c3z9+jUEn5q/f/8eYWBgYECxQE5OroqA2Y8ePXq0hJWV9Qc3N/caZB8wMjJKff361QpvEAkKCv4nYMGh9+/f26MLamhoyLx9+3b/nz9/VJCC6MiLFy9sWXCE3xlGRsZvWKQu4DOciYnpCzc396HPnz97weRxWRD/8OHDa4TiAt1wfn5+z79//zoxMDDALWAiN/lhM/zevXtH0NUx0dJwsiwgxXCccUCJ4dzc3DP+//+/gZ2d/duLFy9Is+Djx4+rCbn82rVrrxgYGF6RFUR8fHyZbGxsD7AZLiEhUSAiIrJSUlIyjOw4uHnz5gVHR0d1bC7/8+eP5d+/f8P+/PmjS1Ekr1ix4hcp6ploXVwPfQuwJlMmJiYBLS0tIVIMev36NRvRFnz48OHohw8fhkYQjQKCAAChiL6Pj/LM2QAAAABJRU5ErkJggg==&quot;;

// Actual mapping section; Specify a function to be called later that 
// assembles the correct JS components based on what the user specified in the 
// tag input arg, the block section of features, etc. Actually creates the map
// that is visible on the page

    function _getCenter(){
        var defaultCenter = [0,0];
        if(&quot;center&quot; in tagInputArg){
            return tagInputArg.center;
        } else {
            return defaultCenter;
        }
    }

    function _getZoom(){
        var defaultZoom = 1;
        if(&quot;zoom&quot; in tagInputArg){
            return tagInputArg.zoom
        } else {
            return defaultZoom;
        }
    }

    function _getProviderBasemap(){
        var defaultProviderBasemap = &quot;OpenStreetMap.Mapnik&quot;;
        if(&quot;providerBasemap&quot; in tagInputArg){
            return tagInputArg.providerBasemap;
        } else {
            return defaultProviderBasemap;
        }
    }


    function _addMarkerToMap(leafletItem, map){
        var m = leafletItem.value;
        var result = L.marker([m.latitude, m.longitude]).addTo(map);
        var potentialPopup = &quot;&quot;;
        if(&apos;popupContent&apos; in m){
                potentialPopup += m.popupContent;}
        if(&apos;href&apos; in m){
            potentialPopup += &apos;&lt;a href=&quot;&apos; + m.href + &apos;&quot;&gt;&apos; + 
                &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            result.bindPopup(potentialPopup);}
        if(!(&apos;center&apos; in tagInputArg)){
            // If the user didn&apos;t specify a center, infer from marker
            map.panTo(new L.LatLng(m.latitude, m.longitude));
        }
    }

    function _onEachFeature(feature, layer){
        var potentialPopup = &quot;&quot;
        if(feature.properties &amp;&amp; feature.properties.popupContent){
            potentialPopup += feature.properties.popupContent;
        }
        if(feature.properties &amp;&amp; feature.properties.href){
            potentialPopup += 
                &apos;&lt;a href=&quot;&apos; + feature.properties.href + &apos;&quot;&gt;&apos; + 
                    &apos;&lt;img src=&quot;&apos; + newWindowImgSrcBase64 + &apos;&quot;&gt;&lt;/img&gt;&lt;/a&gt;&apos;;}
        if(potentialPopup){
            layer.bindPopup(potentialPopup);
        }
    }

    function _addGeoJSONToMap(leafletItem, map){
        if(typeof leafletItem.value === &quot;string&quot;){
            fetch(leafletItem.value).then((resp) =&gt; {
                return resp.json();
            }).then((data) =&gt; {
                leafletItem.value = data;
                _addGeoJSONObjToMap(leafletItem, map);
            }).catch((err) =&gt; {
                console.log(&quot;Encountered err w/ geojson, attempting to fix..&quot;);
                console.log(err);
                _addGeoJSONObjToMap(leafletItem, map);
            });
        } else {
            _addGeoJSONObjToMap(leafletItem, map);
        }
     }

    function _addGeoJSONObjToMap(leafletItem, map){
         var geojson = L.geoJSON(leafletItem.value, { 
            onEachFeature: _onEachFeature 
        });
        layers = geojson.getLayers();
        for(var i=0; i&lt;layers.length; i++){
            try{
                var geom = layers[i].feature.geometry;
                if(!(&apos;center&apos; in tagInputArg)){
                    // If the user didn&apos;t specify a center, infer from geojson
                    //console.log(&quot;panning to &quot; + geom.coordinates);
                    map.panTo(new L.LatLng(geom.coordinates[1],
                                           geom.coordinates[0]));
                }
            } catch(e){}
        }
       
        geojson.addTo(map);
       
    }

    function _processLeafletItem(leafletItem, map){
        switch(leafletItem.type){
            case &quot;LeafletMarker&quot;:
                _addMarkerToMap(leafletItem, map);
                break;
            case &quot;LeafletGeoJSON&quot;:
                _addGeoJSONToMap(leafletItem, map);
                break;
            case undefined:
                break; 
            default:
                console.log(&quot;Couldn&apos;t add item &quot; + leafletItem.id);
                break;
        }
    }

//The actual section that is called that creates a map
    function createMap(){
        console.log(&quot;Creating map 9d979ea780b98ac4fa4715c233f0c6a7 with these args:&quot;);
        console.log(tagInputArg);

        //Initialize Map with the correct input arguments
        var map = L.map(mapEl.id, 
            {worldCopyJump: true}).setView(_getCenter(), _getZoom());
        L.tileLayer.provider(_getProviderBasemap()).addTo(map);
        if(&quot;esriBasemap&quot; in tagInputArg){
            L.esri.basemapLayer(tagInputArg.esriBasemap).addTo(map);
        }

        //process each Leaflet Item passed in between the block tag middle
        for(var i=0; i&lt;blockLeafletItems.length; i++){
            var leafletItem = blockLeafletItems[i];
            console.log(&quot;Adding leaflet item &quot; + leafletItem.id + &quot;:&quot;);
            console.log(leafletItem);
            _processLeafletItem(leafletItem, map);
        }
    }

// Load the correct JS libraries/CSS by adding to head: 
// When ready, call createMap() to create the map on the page

    function _createMap(){
        // helper function to draw the map only when everything is loaded,
        // safeguards against multiple calls to window.onload
        var prevOnLoad;
        if(window.onload){
            prevOnLoad = window.onload;
        }
        window.onload = () =&gt; {
            createMap();
            if(prevOnLoad){
                prevOnLoad();
            }
        }
    }

    var leafletCssId = &quot;leaflet-css-head&quot;;
    var leafletJsId = &quot;leaflet-js-head&quot;;
    var esriLeafletJsId = &quot;esri-leaflet-js-head&quot;;
    var leafletProvidersJsId = &quot;leaflet-providers-js-head&quot;;

    // Add the leaflet CSS first, don&apos;t worry about when it loads
    var leafletCssEl = document.createElement(&quot;link&quot;);
    leafletCssEl.id = leafletCssId;
    leafletCssEl.rel = &quot;stylesheet&quot;;
    leafletCssEl.href = leafletCdn + &quot;leaflet.css&quot;;
    if(!document.getElementById(leafletCssEl.id)){
        document.head.appendChild(leafletCssEl);
    }

    function addToHeadIfNotLoaded(el) {
        //Add the el to the head if it doesn&apos;t exist already. If it does,
        //everything we need is already loaded, so draw the map
        if(!document.getElementById(el.id)){
            document.head.appendChild(el);
        } else {
            _createMap();
        }
    }

    // Load the main leaflet.js code, wait for it to load
    var leafletJsEl = document.createElement(&quot;script&quot;);
    leafletJsEl.id = leafletJsId;
    leafletJsEl.onload = () =&gt; {
        //After loaded, load the esri-leaflet.js code, wait for it to load
        var esriEl = document.createElement(&quot;script&quot;);
        esriEl.id = esriLeafletJsId;
        esriEl.onload = () =&gt; {
            //After loaded, add the inline leaflet-providers &lt;script&gt;
            provEl = document.createElement(&quot;script&quot;);
            provEl.id = leafletProvidersJsId;
            provEl.innerHTML = `//Taken from https://github.com/leaflet-extras/leaflet-providers
(function (root, factory) {
	if (typeof define === &apos;function&apos; &amp;&amp; define.amd) {
		// AMD. Register as an anonymous module.
		define([&apos;leaflet&apos;], factory);
	} else if (typeof modules === &apos;object&apos; &amp;&amp; module.exports) {
		// define a Common JS module that relies on &apos;leaflet&apos;
		module.exports = factory(require(&apos;leaflet&apos;));
	} else {
		// Assume Leaflet is loaded into global object L already
		factory(L);
	}
}(this, function (L) {
	&apos;use strict&apos;;

	L.TileLayer.Provider = L.TileLayer.extend({
		initialize: function (arg, options) {
			var providers = L.TileLayer.Provider.providers;

			var parts = arg.split(&apos;.&apos;);

			var providerName = parts[0];
			var variantName = parts[1];

			if (!providers[providerName]) {
				throw &apos;No such provider (&apos; + providerName + &apos;)&apos;;
			}

			var provider = {
				url: providers[providerName].url,
				options: providers[providerName].options
			};

			// overwrite values in provider from variant.
			if (variantName &amp;&amp; &apos;variants&apos; in providers[providerName]) {
				if (!(variantName in providers[providerName].variants)) {
					throw &apos;No such variant of &apos; + providerName + &apos; (&apos; + variantName + &apos;)&apos;;
				}
				var variant = providers[providerName].variants[variantName];
				var variantOptions;
				if (typeof variant === &apos;string&apos;) {
					variantOptions = {
						variant: variant
					};
				} else {
					variantOptions = variant.options;
				}
				provider = {
					url: variant.url || provider.url,
					options: L.Util.extend({}, provider.options, variantOptions)
				};
			}

			// replace attribution placeholders with their values from toplevel provider attribution,
			// recursively
			var attributionReplacer = function (attr) {
				if (attr.indexOf(&apos;{attribution.&apos;) === -1) {
					return attr;
				}
				return attr.replace(/\{attribution.(\w*)\}/g,
					function (match, attributionName) {
						return attributionReplacer(providers[attributionName].options.attribution);
					}
				);
			};
			provider.options.attribution = attributionReplacer(provider.options.attribution);

			// Compute final options combining provider options with any user overrides
			var layerOpts = L.Util.extend({}, provider.options, options);
			L.TileLayer.prototype.initialize.call(this, provider.url, layerOpts);
		}
	});

	/**
	 * Definition of providers.
	 * see http://leafletjs.com/reference.html#tilelayer for options in the options map.
	 */

	L.TileLayer.Provider.providers = {
		OpenStreetMap: {
			url: &apos;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&apos;
			},
			variants: {
				Mapnik: {},
				DE: {
					url: &apos;https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18
					}
				},
				CH: {
					url: &apos;https://tile.osm.ch/switzerland/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 18,
						bounds: [[45, 5], [48, 11]]
					}
				},
				France: {
					url: &apos;https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png&apos;,
					options: {
						maxZoom: 20,
						attribution: &apos;&amp;copy; Openstreetmap France | {attribution.OpenStreetMap}&apos;
					}
				},
				HOT: {
					url: &apos;https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png&apos;,
					options: {
						attribution:
							&apos;{attribution.OpenStreetMap}, &apos; +
							&apos;Tiles style by &lt;a href=&quot;https://www.hotosm.org/&quot; target=&quot;_blank&quot;&gt;Humanitarian OpenStreetMap Team&lt;/a&gt; &apos; +
							&apos;hosted by &lt;a href=&quot;https://openstreetmap.fr/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap France&lt;/a&gt;&apos;
					}
				},
				BZH: {
					url: &apos;https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png&apos;,
					options: {
						attribution: &apos;{attribution.OpenStreetMap}, Tiles courtesy of &lt;a href=&quot;http://www.openstreetmap.bzh/&quot; target=&quot;_blank&quot;&gt;Breton OpenStreetMap Team&lt;/a&gt;&apos;,
						bounds: [[46.2, -5.5], [50, 0.7]]
					}
				}
			}
		},
		OpenSeaMap: {
			url: &apos;https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openseamap.org&quot;&gt;OpenSeaMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenPtMap: {
			url: &apos;http://openptmap.org/tiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: &amp;copy; &lt;a href=&quot;http://www.openptmap.org&quot;&gt;OpenPtMap&lt;/a&gt; contributors&apos;
			}
		},
		OpenTopoMap: {
			url: &apos;https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 17,
				attribution: &apos;Map data: {attribution.OpenStreetMap}, &lt;a href=&quot;http://viewfinderpanoramas.org&quot;&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=&quot;https://opentopomap.org&quot;&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenRailwayMap: {
			url: &apos;https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://www.OpenRailwayMap.org&quot;&gt;OpenRailwayMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		OpenFireMap: {
			url: &apos;http://openfiremap.org/hytiles/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;http://www.openfiremap.org&quot;&gt;OpenFireMap&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		SafeCast: {
			url: &apos;https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 16,
				attribution: &apos;Map data: {attribution.OpenStreetMap} | Map style: &amp;copy; &lt;a href=&quot;https://blog.safecast.org/about/&quot;&gt;SafeCast&lt;/a&gt; (&lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0/&quot;&gt;CC-BY-SA&lt;/a&gt;)&apos;
			}
		},
		Thunderforest: {
			url: &apos;https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}&apos;,
			options: {
				attribution:
					&apos;&amp;copy; &lt;a href=&quot;http://www.thunderforest.com/&quot;&gt;Thunderforest&lt;/a&gt;, {attribution.OpenStreetMap}&apos;,
				variant: &apos;cycle&apos;,
				apikey: &apos;&lt;insert your api key here&gt;&apos;,
				maxZoom: 22
			},
			variants: {
				OpenCycleMap: &apos;cycle&apos;,
				Transport: {
					options: {
						variant: &apos;transport&apos;
					}
				},
				TransportDark: {
					options: {
						variant: &apos;transport-dark&apos;
					}
				},
				SpinalMap: {
					options: {
						variant: &apos;spinal-map&apos;
					}
				},
				Landscape: &apos;landscape&apos;,
				Outdoors: &apos;outdoors&apos;,
				Pioneer: &apos;pioneer&apos;
			}
		},
		OpenMapSurfer: {
			url: &apos;https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				variant: &apos;roads&apos;,
				attribution: &apos;Imagery from &lt;a href=&quot;http://giscience.uni-hd.de/&quot;&gt;GIScience Research Group @ University of Heidelberg&lt;/a&gt; | Map data &apos;
			},
			variants: {
				Roads: {
					options: {
						variant: &apos;roads&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				Hybrid: {
					options: {
						variant: &apos;hybrid&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				AdminBounds: {
					options: {
						variant: &apos;adminb&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				},
				ContourLines: {
					options: {
						variant: &apos;asterc&apos;,
						maxZoom: 18,
						minZoom: 13,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;&apos;
					}
				},
				Hillshade: {
					options: {
						variant: &apos;asterh&apos;,
						maxZoom: 18,
						attribution: &apos;{attribution.OpenMapSurfer} &lt;a href=&quot;https://lpdaac.usgs.gov/products/aster_policies&quot;&gt;ASTER GDEM&lt;/a&gt;, &lt;a href=&quot;http://srtm.csi.cgiar.org/&quot;&gt;SRTM&lt;/a&gt;&apos;
					}
				},
				ElementsAtRisk: {
					options: {
						variant: &apos;elements_at_risk&apos;,
						attribution: &apos;{attribution.OpenMapSurfer}{attribution.OpenStreetMap}&apos;
					}
				}
			}
		},
		Hydda: {
			url: &apos;https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 18,
				variant: &apos;full&apos;,
				attribution: &apos;Tiles courtesy of &lt;a href=&quot;http://openstreetmap.se/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap Sweden&lt;/a&gt; &amp;mdash; Map data {attribution.OpenStreetMap}&apos;
			},
			variants: {
				Full: &apos;full&apos;,
				Base: &apos;base&apos;,
				RoadsAndLabels: &apos;roads_and_labels&apos;
			}
		},
		MapBox: {
			url: &apos;https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}{r}.png?access_token={accessToken}&apos;,
			options: {
				attribution:
					&apos;&lt;a href=&quot;https://www.mapbox.com/about/maps/&quot; target=&quot;_blank&quot;&gt;&amp;copy; Mapbox&lt;/a&gt; &apos; +
					&apos;{attribution.OpenStreetMap} &apos; +
					&apos;&lt;a href=&quot;https://www.mapbox.com/map-feedback/&quot; target=&quot;_blank&quot;&gt;Improve this map&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				id: &apos;mapbox.streets&apos;,
				accessToken: &apos;&lt;insert your access token here&gt;&apos;,
			}
		},
		Stamen: {
			url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}&apos;,
			options: {
				attribution:
					&apos;Map tiles by &lt;a href=&quot;http://stamen.com&quot;&gt;Stamen Design&lt;/a&gt;, &apos; +
					&apos;&lt;a href=&quot;http://creativecommons.org/licenses/by/3.0&quot;&gt;CC BY 3.0&lt;/a&gt; &amp;mdash; &apos; +
					&apos;Map data {attribution.OpenStreetMap}&apos;,
				subdomains: &apos;abcd&apos;,
				minZoom: 0,
				maxZoom: 20,
				variant: &apos;toner&apos;,
				ext: &apos;png&apos;
			},
			variants: {
				Toner: &apos;toner&apos;,
				TonerBackground: &apos;toner-background&apos;,
				TonerHybrid: &apos;toner-hybrid&apos;,
				TonerLines: &apos;toner-lines&apos;,
				TonerLabels: &apos;toner-labels&apos;,
				TonerLite: &apos;toner-lite&apos;,
				Watercolor: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;watercolor&apos;,
						ext: &apos;jpg&apos;,
						minZoom: 1,
						maxZoom: 16
					}
				},
				Terrain: {
					options: {
						variant: &apos;terrain&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TerrainBackground: {
					options: {
						variant: &apos;terrain-background&apos;,
						minZoom: 0,
						maxZoom: 18
					}
				},
				TopOSMRelief: {
					url: &apos;https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}&apos;,
					options: {
						variant: &apos;toposm-color-relief&apos;,
						ext: &apos;jpg&apos;,
						bounds: [[22, -132], [51, -56]]
					}
				},
				TopOSMFeatures: {
					options: {
						variant: &apos;toposm-features&apos;,
						bounds: [[22, -132], [51, -56]],
						opacity: 0.9
					}
				}
			}
		},
		Esri: {
			url: &apos;https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}&apos;,
			options: {
				variant: &apos;World_Street_Map&apos;,
				attribution: &apos;Tiles &amp;copy; Esri&apos;
			},
			variants: {
				WorldStreetMap: {
					options: {
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012&apos;
					}
				},
				DeLorme: {
					options: {
						variant: &apos;Specialty/DeLorme_World_Base_Map&apos;,
						minZoom: 1,
						maxZoom: 11,
						attribution: &apos;{attribution.Esri} &amp;mdash; Copyright: &amp;copy;2012 DeLorme&apos;
					}
				},
				WorldTopoMap: {
					options: {
						variant: &apos;World_Topo_Map&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community&apos;
					}
				},
				WorldImagery: {
					options: {
						variant: &apos;World_Imagery&apos;,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community&apos;
					}
				},
				WorldTerrain: {
					options: {
						variant: &apos;World_Terrain_Base&apos;,
						maxZoom: 13,
						attribution:
							&apos;{attribution.Esri} &amp;mdash; &apos; +
							&apos;Source: USGS, Esri, TANA, DeLorme, and NPS&apos;
					}
				},
				WorldShadedRelief: {
					options: {
						variant: &apos;World_Shaded_Relief&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: Esri&apos;
					}
				},
				WorldPhysical: {
					options: {
						variant: &apos;World_Physical_Map&apos;,
						maxZoom: 8,
						attribution: &apos;{attribution.Esri} &amp;mdash; Source: US National Park Service&apos;
					}
				},
				OceanBasemap: {
					options: {
						variant: &apos;Ocean_Basemap&apos;,
						maxZoom: 13,
						attribution: &apos;{attribution.Esri} &amp;mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri&apos;
					}
				},
				NatGeoWorldMap: {
					options: {
						variant: &apos;NatGeo_World_Map&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC&apos;
					}
				},
				WorldGrayCanvas: {
					options: {
						variant: &apos;Canvas/World_Light_Gray_Base&apos;,
						maxZoom: 16,
						attribution: &apos;{attribution.Esri} &amp;mdash; Esri, DeLorme, NAVTEQ&apos;
					}
				}
			}
		},
		OpenWeatherMap: {
			url: &apos;http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Map data &amp;copy; &lt;a href=&quot;http://openweathermap.org&quot;&gt;OpenWeatherMap&lt;/a&gt;&apos;,
				apiKey:&apos;&lt;insert your api key here&gt;&apos;,
				opacity: 0.5
			},
			variants: {
				Clouds: &apos;clouds&apos;,
				CloudsClassic: &apos;clouds_cls&apos;,
				Precipitation: &apos;precipitation&apos;,
				PrecipitationClassic: &apos;precipitation_cls&apos;,
				Rain: &apos;rain&apos;,
				RainClassic: &apos;rain_cls&apos;,
				Pressure: &apos;pressure&apos;,
				PressureContour: &apos;pressure_cntr&apos;,
				Wind: &apos;wind&apos;,
				Temperature: &apos;temp&apos;,
				Snow: &apos;snow&apos;
			}
		},
		HERE: {
			/*
			 * HERE maps, formerly Nokia maps.
			 * These basemaps are free, but you need an API key. Please sign up at
			 * https://developer.here.com/plans
			 */
			url:
				&apos;https://{s}.{base}.maps.api.here.com/maptile/2.1/&apos; +
				&apos;{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?&apos; +
				&apos;app_id={app_id}&amp;app_code={app_code}&amp;lg={language}&apos;,
			options: {
				attribution:
					&apos;Map &amp;copy; 1987-&apos; + new Date().getFullYear() + &apos; &lt;a href=&quot;http://developer.here.com&quot;&gt;HERE&lt;/a&gt;&apos;,
				subdomains: &apos;1234&apos;,
				mapID: &apos;newest&apos;,
				&apos;app_id&apos;: &apos;&lt;insert your app_id here&gt;&apos;,
				&apos;app_code&apos;: &apos;&lt;insert your app_code here&gt;&apos;,
				base: &apos;base&apos;,
				variant: &apos;normal.day&apos;,
				maxZoom: 20,
				type: &apos;maptile&apos;,
				language: &apos;eng&apos;,
				format: &apos;png8&apos;,
				size: &apos;256&apos;
			},
			variants: {
				normalDay: &apos;normal.day&apos;,
				normalDayCustom: &apos;normal.day.custom&apos;,
				normalDayGrey: &apos;normal.day.grey&apos;,
				normalDayMobile: &apos;normal.day.mobile&apos;,
				normalDayGreyMobile: &apos;normal.day.grey.mobile&apos;,
				normalDayTransit: &apos;normal.day.transit&apos;,
				normalDayTransitMobile: &apos;normal.day.transit.mobile&apos;,
				normalNight: &apos;normal.night&apos;,
				normalNightMobile: &apos;normal.night.mobile&apos;,
				normalNightGrey: &apos;normal.night.grey&apos;,
				normalNightGreyMobile: &apos;normal.night.grey.mobile&apos;,
				normalNightTransit: &apos;normal.night.transit&apos;,
				normalNightTransitMobile: &apos;normal.night.transit.mobile&apos;,
				reducedDay: &apos;reduced.day&apos;,
				reducedNight: &apos;reduced.night&apos;,
				basicMap: {
					options: {
						type: &apos;basetile&apos;
					}
				},
				mapLabels: {
					options: {
						type: &apos;labeltile&apos;,
						format: &apos;png&apos;
					}
				},
				trafficFlow: {
					options: {
						base: &apos;traffic&apos;,
						type: &apos;flowtile&apos;
					}
				},
				carnavDayGrey: &apos;carnav.day.grey&apos;,
				hybridDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day&apos;
					}
				},
				hybridDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.mobile&apos;
					}
				},
				hybridDayTransit: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.day.transit&apos;
					}
				},
				hybridDayGrey: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;hybrid.grey.day&apos;
					}
				},
				pedestrianDay: &apos;pedestrian.day&apos;,
				pedestrianNight: &apos;pedestrian.night&apos;,
				satelliteDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;satellite.day&apos;
					}
				},
				terrainDay: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day&apos;
					}
				},
				terrainDayMobile: {
					options: {
						base: &apos;aerial&apos;,
						variant: &apos;terrain.day.mobile&apos;
					}
				}
			}
		},
		FreeMapSK: {
			url: &apos;http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg&apos;,
			options: {
				minZoom: 8,
				maxZoom: 16,
				subdomains: &apos;1234&apos;,
				bounds: [[47.204642, 15.996093], [49.830896, 22.576904]],
				attribution:
					&apos;{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 &lt;a href=&quot;http://freemap.sk&quot;&gt;Freemap.sk&lt;/a&gt;&apos;
			}
		},
		MtbMap: {
			url: &apos;http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png&apos;,
			options: {
				attribution:
					&apos;{attribution.OpenStreetMap} &amp;amp; USGS&apos;
			}
		},
		CartoDB: {
			url: &apos;https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;{attribution.OpenStreetMap} &amp;copy; &lt;a href=&quot;https://carto.com/attributions&quot;&gt;CARTO&lt;/a&gt;&apos;,
				subdomains: &apos;abcd&apos;,
				maxZoom: 19,
				variant: &apos;light_all&apos;
			},
			variants: {
				Positron: &apos;light_all&apos;,
				PositronNoLabels: &apos;light_nolabels&apos;,
				PositronOnlyLabels: &apos;light_only_labels&apos;,
				DarkMatter: &apos;dark_all&apos;,
				DarkMatterNoLabels: &apos;dark_nolabels&apos;,
				DarkMatterOnlyLabels: &apos;dark_only_labels&apos;,
				Voyager: &apos;rastertiles/voyager&apos;,
				VoyagerNoLabels: &apos;rastertiles/voyager_nolabels&apos;,
				VoyagerOnlyLabels: &apos;rastertiles/voyager_only_labels&apos;,
				VoyagerLabelsUnder: &apos;rastertiles/voyager_labels_under&apos;
			}
		},
		HikeBike: {
			url: &apos;https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;{attribution.OpenStreetMap}&apos;,
				variant: &apos;hikebike&apos;
			},
			variants: {
				HikeBike: {},
				HillShading: {
					options: {
						maxZoom: 15,
						variant: &apos;hillshading&apos;
					}
				}
			}
		},
		BasemapAT: {
			url: &apos;https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}&apos;,
			options: {
				maxZoom: 19,
				attribution: &apos;Datenquelle: &lt;a href=&quot;https://www.basemap.at&quot;&gt;basemap.at&lt;/a&gt;&apos;,
				subdomains: [&apos;&apos;, &apos;1&apos;, &apos;2&apos;, &apos;3&apos;, &apos;4&apos;],
				format: &apos;png&apos;,
				bounds: [[46.358770, 8.782379], [49.037872, 17.189532]],
				variant: &apos;geolandbasemap&apos;
			},
			variants: {
				basemap: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;geolandbasemap&apos;
					}
				},
				grau: &apos;bmapgrau&apos;,
				overlay: &apos;bmapoverlay&apos;,
				highdpi: {
					options: {
						variant: &apos;bmaphidpi&apos;,
						format: &apos;jpeg&apos;
					}
				},
				orthofoto: {
					options: {
						maxZoom: 20, // currently only in Vienna
						variant: &apos;bmaporthofoto30cm&apos;,
						format: &apos;jpeg&apos;
					}
				}
			}
		},
		nlmaps: {
			url: &apos;https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png&apos;,
			options: {
				minZoom: 6,
				maxZoom: 19,
				bounds: [[50.5, 3.25], [54, 7.6]],
				attribution: &apos;Kaartgegevens &amp;copy; &lt;a href=&quot;kadaster.nl&quot;&gt;Kadaster&lt;/a&gt;&apos;
			},
			variants: {
				&apos;standaard&apos;: &apos;brtachtergrondkaart&apos;,
				&apos;pastel&apos;: &apos;brtachtergrondkaartpastel&apos;,
				&apos;grijs&apos;: &apos;brtachtergrondkaartgrijs&apos;,
				&apos;luchtfoto&apos;: {
					&apos;url&apos;: &apos;https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts/1.0.0/2016_ortho25/EPSG:3857/{z}/{x}/{y}.png&apos;,
				}
			}
		},
		NASAGIBS: {
			url: &apos;https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}&apos;,
			options: {
				attribution:
					&apos;Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System &apos; +
					&apos;(&lt;a href=&quot;https://earthdata.nasa.gov&quot;&gt;ESDIS&lt;/a&gt;) with funding provided by NASA/HQ.&apos;,
				bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],
				minZoom: 1,
				maxZoom: 9,
				format: &apos;jpg&apos;,
				time: &apos;&apos;,
				tilematrixset: &apos;GoogleMapsCompatible_Level&apos;
			},
			variants: {
				ModisTerraTrueColorCR: &apos;MODIS_Terra_CorrectedReflectance_TrueColor&apos;,
				ModisTerraBands367CR: &apos;MODIS_Terra_CorrectedReflectance_Bands367&apos;,
				ViirsEarthAtNight2012: {
					options: {
						variant: &apos;VIIRS_CityLights_2012&apos;,
						maxZoom: 8
					}
				},
				ModisTerraLSTDay: {
					options: {
						variant: &apos;MODIS_Terra_Land_Surface_Temp_Day&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				},
				ModisTerraSnowCover: {
					options: {
						variant: &apos;MODIS_Terra_Snow_Cover&apos;,
						format: &apos;png&apos;,
						maxZoom: 8,
						opacity: 0.75
					}
				},
				ModisTerraAOD: {
					options: {
						variant: &apos;MODIS_Terra_Aerosol&apos;,
						format: &apos;png&apos;,
						maxZoom: 6,
						opacity: 0.75
					}
				},
				ModisTerraChlorophyll: {
					options: {
						variant: &apos;MODIS_Terra_Chlorophyll_A&apos;,
						format: &apos;png&apos;,
						maxZoom: 7,
						opacity: 0.75
					}
				}
			}
		},
		NLS: {
			// NLS maps are copyright National library of Scotland.
			// http://maps.nls.uk/projects/api/index.html
			// Please contact NLS for anything other than non-commercial low volume usage
			//
			// Map sources: Ordnance Survey 1:1m to 1:63K, 1920s-1940s
			//   z0-9  - 1:1m
			//  z10-11 - quarter inch (1:253440)
			//  z12-18 - one inch (1:63360)
			url: &apos;https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://geo.nls.uk/maps/&quot;&gt;National Library of Scotland Historic Maps&lt;/a&gt;&apos;,
				bounds: [[49.6, -12], [61.7, 3]],
				minZoom: 1,
				maxZoom: 18,
				subdomains: &apos;0123&apos;,
			}
		},
		JusticeMap: {
			// Justice Map (http://www.justicemap.org/)
			// Visualize race and income data for your community, county and country.
			// Includes tools for data journalists, bloggers and community activists.
			url: &apos;http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;http://www.justicemap.org/terms.php&quot;&gt;Justice Map&lt;/a&gt;&apos;,
				// one of &apos;county&apos;, &apos;tract&apos;, &apos;block&apos;
				size: &apos;county&apos;,
				// Bounds for USA, including Alaska and Hawaii
				bounds: [[14, -180], [72, -56]]
			},
			variants: {
				income: &apos;income&apos;,
				americanIndian: &apos;indian&apos;,
				asian: &apos;asian&apos;,
				black: &apos;black&apos;,
				hispanic: &apos;hispanic&apos;,
				multi: &apos;multi&apos;,
				nonWhite: &apos;nonwhite&apos;,
				white: &apos;white&apos;,
				plurality: &apos;plural&apos;
			}
		},
		Wikimedia: {
			url: &apos;https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png&apos;,
			options: {
				attribution: &apos;&lt;a href=&quot;https://wikimediafoundation.org/wiki/Maps_Terms_of_Use&quot;&gt;Wikimedia&lt;/a&gt;&apos;,
				minZoom: 1,
				maxZoom: 19
			}
		},
		GeoportailFrance: {
			url: &apos;https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&amp;SERVICE=WMTS&amp;VERSION=1.0.0&amp;STYLE={style}&amp;TILEMATRIXSET=PM&amp;FORMAT={format}&amp;LAYER={variant}&amp;TILEMATRIX={z}&amp;TILEROW={y}&amp;TILECOL={x}&apos;,
			options: {
				attribution: &apos;&lt;a target=&quot;_blank&quot; href=&quot;https://www.geoportail.gouv.fr/&quot;&gt;Geoportail France&lt;/a&gt;&apos;,
				bounds: [[-75, -180], [81, 180]],
				minZoom: 2,
				maxZoom: 18,
				// Get your own geoportail apikey here : http://professionnels.ign.fr/ign/contrats/
				// NB : &apos;choisirgeoportail&apos; is a demonstration key that comes with no guarantee
				apikey: &apos;choisirgeoportail&apos;,
				format: &apos;image/jpeg&apos;,
				style : &apos;normal&apos;,
				variant: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;
			},
			variants: {
				parcels: {
					options : {
						variant: &apos;CADASTRALPARCELS.PARCELS&apos;,
						maxZoom: 20,
						style : &apos;bdparcellaire&apos;,
						format: &apos;image/png&apos;
					}
				},
				ignMaps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS&apos;,
				maps: &apos;GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD&apos;,
				orthos: {
					options: {
						maxZoom: 19,
						variant: &apos;ORTHOIMAGERY.ORTHOPHOTOS&apos;
					}
				}
			}
		},
		OneMapSG: {
			url: &apos;https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png&apos;,
			options: {
				variant: &apos;Default&apos;,
				minZoom: 11,
				maxZoom: 18,
				bounds: [[1.56073, 104.11475], [1.16, 103.502]],
				attribution: &apos;&lt;img src=&quot;https://docs.onemap.sg/maps/images/oneMap64-01.png&quot; style=&quot;height:20px;width:20px;&quot;/&gt; New OneMap | Map data &amp;copy; contributors, &lt;a href=&quot;http://SLA.gov.sg&quot;&gt;Singapore Land Authority&lt;/a&gt;&apos;
			},
			variants: {
				Default: &apos;Default&apos;,
				Night: &apos;Night&apos;,
				Original: &apos;Original&apos;,
				Grey: &apos;Grey&apos;,
				LandLot: &apos;LandLot&apos;
			}
		}
	};

	L.tileLayer.provider = function (provider, options) {
		return new L.TileLayer.Provider(provider, options);
	};

	return L;
}));
`;
            if(!document.getElementById(provEl.id)){
                 document.head.appendChild(provEl);        
            }
            _createMap();
            }
        esriEl.src = esriLeafletCdn + &quot;esri-leaflet.js&quot;;
        addToHeadIfNotLoaded(esriEl);
        };
    leafletJsEl.src = leafletCdn + &quot;leaflet.js&quot;;
    addToHeadIfNotLoaded(leafletJsEl);
})();
&lt;/script&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Map of route taken&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>sarah</name></author><category term="Northumberland" /><category term="walks" /><category term="northumberland" /><category term="history" /><summary type="html"></summary></entry><entry><title type="html">Automatic Counting of Gulls from Drone Images</title><link href="https://sarahdal.github.io//uav/2024/10/27/ML.html" rel="alternate" type="text/html" title="Automatic Counting of Gulls from Drone Images" /><published>2024-10-27T00:00:00+01:00</published><updated>2024-10-27T00:00:00+01:00</updated><id>https://sarahdal.github.io//uav/2024/10/27/ML</id><content type="html" xml:base="https://sarahdal.github.io//uav/2024/10/27/ML.html">&lt;p&gt;A big part of my career has involved counting seabirds. The UK and Ireland, a bunch of islands on the edge of the Atlantic and just south of the Arctic, have some of the most important seabird colonies in the world, with about &lt;a href=&quot;https://www.bto.org/our-science/focal-areas/our-seabirds&quot;&gt;8 million birds of 25 different species breeding here&lt;/a&gt;. Keeping track of them is hugely important so we know what’s going on both with the birds themselves, and with the wider oceanic ecosystem they rely on.&lt;/p&gt;

&lt;p&gt;Traditional counts involve heading into seabird colonies to count their nests (we no longer just count the legs and divide by two). Although accurate, it’s hugely disturbing to the birds, and for more remote islands, can be very difficult and expensive to organise and access. Images taken from drones are an obvious way to make seabird censusing a lot easier and cheaper.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/ML/gullcolony.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/ML/gullcolony.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;a view of the gull colony at South Walney on a summer’s evening. the grassy ground is dotted with hundreds of gulls, and another hundred are in the sky. On the horizon is the silhouette of Piel Castle.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I first started trying to use drone imagery to count a gull colony at South Walney in 2016. Even back then I was sure there must be a way to automatically count thousands of gulls in an orthomosaic; as Machine Learning has developed it’s become possible, but every time I had a look at papers that had done this, it involved programming and maths that was far beyond me. My dream was some sort of simple GUI where a site manager could drop in a drone photo, and get the total number of gulls as the output.&lt;/p&gt;

&lt;p&gt;Now finally I think we are almost there, with a QGIS plugin Deepness plus free accounts on a couple of commercial machine learning websites, following an incredibly simple tutorial:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/PUTvision/qgis-plugin-deepness/tree/master&quot;&gt;the Deepness plugin for QGIS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/PUTvision/qgis-plugin-deepness/blob/master/tutorials/detection/Deploy_object_detection_model_with_Deepness_without_a_single_line_of_code.pdf&quot;&gt;Tutorial “Deploy object detection mode with Deepness without a single line of code”&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The tutorial uses &lt;a href=&quot;http://www.roboflow.com&quot;&gt;Roboflow&lt;/a&gt; to easily train a dataset (and the images for the dataset itself can be prepared using Deepness in QGIS), then &lt;a href=&quot;http://https://www.ultralytics.com/&quot;&gt;Ultralytics&lt;/a&gt; to develop the model, which can be trained using the processing power in &lt;a href=&quot;https://colab.research.google.com/&quot;&gt;Google CoLab&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;All of these have “free” tiers that are suitable for relatively small amounts of data, but I did have to slip a tenner to google to get more power to train the datsets.&lt;/p&gt;

&lt;p&gt;Using this method, I split some aerial imagery of gulls from a saltmarsh, using the Deepness Plugin, into smaller squares. These were loaded into Roboflow, where I spent a good hour going through and tagging a few hundred birds. I followed the rest of the tutorial very easily, and ran the resulting ONNX file back in Deepness in QGIS:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/ML/example1.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/ML/example1.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;aerial view of gulls sitting on green saltmarsh&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/ML/example.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/ML/example.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;different aerial view of gulls sitting on green saltmarsh; now they have black bounding boxes as I’ve tagged them for the dataset&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/ML/example2.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/ML/example2.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;a much wider aerial view of the saltmarsh, a diamond of green with a muddy brown creek cutting through the centre. This is a stitched orthomosaic of several hundred drone images, covering an area of about 2ha. Hundreds of small red squares show where the ML has detected a gull.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;I ran the model on all ten 2-hectare areas of a large, sparse gull colony in North West England that we had mapped in the summer. On these images, I had previously spent about 90 minutes manually marking on all gulls for a total of 597 birds.&lt;/p&gt;

&lt;p&gt;The results weren’t great on the first run, as the model returned 870 registrations, with 20% of these being something that was not a bird, or the wrong type of bird - a flock of two dozen shelducks, for example, or a piece of driftwood. But it also returned around 100 gulls that I’d missed when manually checking the image.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io///assets/images/ML/shelduck.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/ML/shelduck.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;aerial view of two shelducks swimming in the water, with concentric ripples spreading out from them. They have been detected with a red bounding box by the model.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The solution here is to train it on more data, as I hadn’t included anything in the training data that wasn’t green saltmarsh, while the area I ran the model on did have areas of bare sand and mud containg pale, gull-sized rocks. Further refining of the training dataset will greatly improve this, and hopefully get us a model with a very high accuracy rate.&lt;/p&gt;

&lt;p&gt;Once I have gotten the model to this accuracy, it should be very simple to share it and show anyone who is used to QGIS, how to run the model in the deepness plugin. Now instead of spending hours manually counting gulls in the aerial imagery it can be easily done in a few minutes with QGIS, with very little technical knowledge required.&lt;/p&gt;

&lt;p&gt;For this colony, the traditional count took a team of about a dozen people two days to cover all the area, and because of this, was only censused once every 5 years at best. Now, potentially, the drone flight could be done by one person in an afternoon, and then counted by ML in about half an hour - a vast improvement in time and cost.&lt;/p&gt;</content><author><name>sarah</name></author><category term="UAV" /><category term="UAV" /><category term="GIS" /><summary type="html">A big part of my career has involved counting seabirds. The UK and Ireland, a bunch of islands on the edge of the Atlantic and just south of the Arctic, have some of the most important seabird colonies in the world, with about 8 million birds of 25 different species breeding here. Keeping track of them is hugely important so we know what’s going on both with the birds themselves, and with the wider oceanic ecosystem they rely on.</summary></entry><entry><title type="html">Walk Resources</title><link href="https://sarahdal.github.io//northumberland/2024/09/14/WalkResources.html" rel="alternate" type="text/html" title="Walk Resources" /><published>2024-09-14T00:00:00+01:00</published><updated>2024-09-14T00:00:00+01:00</updated><id>https://sarahdal.github.io//northumberland/2024/09/14/WalkResources</id><content type="html" xml:base="https://sarahdal.github.io//northumberland/2024/09/14/WalkResources.html">&lt;p&gt;I quite enjoy long walks in less-well travelled places. I live in Northumberland so that second one is quite easy, but what about the first - finding decent length walking routes?&lt;/p&gt;

&lt;p&gt;For walks north of the border, &lt;a href=&quot;https://www.walkhighlands.co.uk/&quot;&gt;walkhighlands&lt;/a&gt; is a well-known source, and I also look up routes on &lt;a href=&quot;https://www.outdooractive.com/en/member/sarah-dal/134917862/&quot;&gt;OutdoorActive&lt;/a&gt; and &lt;a href=&quot;https://osmaps.com/&quot;&gt;OSMaps&lt;/a&gt;. But the vast majority of the walks on these sites are less than 15km, or are long linear multi-day routes. I want walks 15km to 30km, but quite often when I make my own route, halfway round I’ll find it’s difficult bog, ankle-snapping tussocks and holes, or impassable forestry brash. I’ve been trying hard to find good sources for good walks, so I thought I’d share some of the ones I’ve found.&lt;/p&gt;

&lt;h2 id=&quot;long-distance-walkers-association&quot;&gt;&lt;a href=&quot;https://ldwa.org.uk/clubs/walksdatabasemap.php&quot;&gt;Long Distance Walkers Association&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;This great group, that I should probably join, have a databse of their local group social walks. For some of these gpx files are available - including the North East, but not, unfortunately, Scotland.&lt;/p&gt;

&lt;h2 id=&quot;bills-walks&quot;&gt;&lt;a href=&quot;https://www.billswalks.co.uk/&quot;&gt;Bill’s Walks&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;This is a personal website with a huge database of walks, many longer than 15km, across the north east of England, walked by a group of friends including eponymous Bill. 
The website was last updated in 2022, and unfortunately looks like it’s been hacked recently. There’s a version on &lt;a href=&quot;https://web.archive.org/web/20220706012713/https://www.billswalks.co.uk/&quot;&gt;internetarchive&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;the-big-walks-classic-walks-wild-walks-by-ken-wilson--richard-gilbert&quot;&gt;&lt;a href=&quot;https://www.needlesports.com/Information/Features/Hard-Rock/The-Big-Walks-Classic-Walks-Wild-Walks&quot;&gt;The Big Walks, Classic Walks, Wild Walks by Ken Wilson &amp;amp; Richard Gilbert&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;Published in the early 80s, these fantastic books not only full of great ideas for longer walks, but incredible photos (with plenty of bright red socks and bobble hats) and are very much of their time. You’ll feel quite sad at what used to be reachable by public transport, but the whole book is a joy to read in a time where it’s expected you can now easily look up transport arrangements online.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/walks/books.jpg&quot; alt=&quot;&quot; width=&quot;700px&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The three books, A4 hardback with glossy covers: Classic Walks, The Big Walks, Wild Walks. Each has human(s) on the cover standing in a suitably dramatic mountain landscape.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;For example, the instructions for getting to and from a 18 mile walk at the Cape Wrath Coast:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;“In summer a minibus plies between the Kyle of Durness and the lighthouse. This links with the passenger ferry over the Kyle at the Cape Wrath Hotel, but the service is not reliable, and before setting out, it is highly advisable to phone the ferry man, John Muir, at Durness 244, to ascertain the position. If there is no minibus, you will have an extra eleven miles to walk to the Kyle, and if you miss the last ferry, it is another five miles on top of that. In the winter months, the ferry operates on demand, and the walk could satisfactorily be completed in two days with a night spent at the (haunted) bothy beside Sandwood Loch.”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io///assets/images/walks/squad.jpg&quot; alt=&quot;&quot; width=&quot;700px&quot; /&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The 1970s in Hiking Form: Four men of varying ages pose in a bothy. They wear clothes predominantly grey, red and brown, with plus-fours, red socks, bobble hats. Draped on lines across the ceiling are hung nylon sleeping bags, blankets and thick-looking red mittens. The fireplace is stuffed with newspaper and tin pots stand on stone shelves.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;second-hand-books&quot;&gt;Second Hand Books&lt;/h2&gt;
&lt;p&gt;Have a look in a second hand bookshop, I just popped into &lt;a href=&quot;https://www.barterbooks.co.uk/&quot;&gt;Barter Books&lt;/a&gt; in Alnwick, where they have crates in the local section of pamphlets and leaflets, and picked out “The Hills of Upper Coquetdale” by Geoff Holland and published by &lt;a href=&quot;http://www.trailguides.co.uk/walking-in-northumberland/&quot;&gt;Trail Guides&lt;/a&gt;. Geoff I think runs the &lt;a href=&quot;www.cheviotwalks.co.uk&quot;&gt;Cheviot Walks website&lt;/a&gt;, which now of course has been replaced by a facebook page.&lt;/p&gt;

&lt;h2 id=&quot;walking-apps&quot;&gt;Walking Apps&lt;/h2&gt;
&lt;p&gt;A little known but great app for walking in the UK is &lt;a href=&quot;https://www.topo-gps.com/&quot;&gt;Topo GPS&lt;/a&gt;, where you can purchase the OS tiles you actually need (79p for a 8km x 8km square), rather than shelling out for a subscription, and keep them on your device (a bit like the old ViewRanger app, if you used that). You can easily upload a gpx, and then ask it to purchase and download the tiles you need. I don’t find it very easy to plan routes on it, so I use OutdoorActive or OSMaps, and then transfer the gpx across.&lt;/p&gt;

&lt;h2 id=&quot;here&quot;&gt;here&lt;/h2&gt;
&lt;p&gt;I am going to try and describe the (good) walks I do better, and provide the gpx files. I just need to go on some walks again now..&lt;/p&gt;</content><author><name>sarah</name></author><category term="Northumberland" /><category term="walks" /><summary type="html">I quite enjoy long walks in less-well travelled places. I live in Northumberland so that second one is quite easy, but what about the first - finding decent length walking routes?</summary></entry><entry><title type="html">Postboxes</title><link href="https://sarahdal.github.io//gis/2024/08/07/PostBoxes.html" rel="alternate" type="text/html" title="Postboxes" /><published>2024-08-07T00:00:00+01:00</published><updated>2024-08-07T00:00:00+01:00</updated><id>https://sarahdal.github.io//gis/2024/08/07/PostBoxes</id><content type="html" xml:base="https://sarahdal.github.io//gis/2024/08/07/PostBoxes.html">&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/postbox.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/postbox.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;a red “Type A” pillar postbox&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Because with GIS all things are possible, I was wondering if I could use it to find out where the most remote postbox in the UK is.&lt;/p&gt;

&lt;p&gt;I can get postbox locations from &lt;a href=&quot;https://www.openstreetmap.org/&quot;&gt;OSM&lt;/a&gt;, but it’s not quite that simple - the Post Office data in OSM was aquired through a FOI request, but the data isn’t very precise and is trademarked, so there’s a good &lt;a href=&quot;https://osm.mathmos.net/postboxes/&quot;&gt;OSM project to clean up and verify it all&lt;/a&gt;. The data in OSM is still probably good enough for what I want though.&lt;/p&gt;

&lt;p&gt;To get the data out of OSM, I used &lt;a href=&quot;https://overpass-turbo.eu/&quot;&gt;Overpass&lt;/a&gt; to download all of the locations of all postboxes in a CSV. The overpass string for this was:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[out:csv(::lat, ::lon, name, ref)][timeout:300];
area[&quot;name&quot;=&quot;United Kingdom&quot;]-&amp;gt;.searchArea;
node[&quot;amenity&quot;=&quot;post_box&quot;](area.searchArea);
out center;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Switch to the Data tab on overpass before running it, and we get a list of features within the area named “United Kingdom” where “amenity” matches “post_box”.&lt;/p&gt;

&lt;p&gt;Nice! Now I can easily copy these into a csv file, and import it into QGIS using “add delimited text layer…” and remembering to set the Geometry CRS to WGS84 4326.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/csv.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/csv.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Now we can see the postboxes mapped in a vaugely UK shaped pattern.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/postboxes1.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/postboxes1.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;To convert the CRS to BNG.. wait, why? because WGS84 is an ellipsoidal projection, and we need to use a Cartesian system, which the British National Grid is. A Cartesian projection is based on a flat map, so we can accurately measure things to the nearest cm.&lt;/p&gt;

&lt;p&gt;To convert the CRS to BNG, save as a gis file (shapefile or geopackage, your choice), right click the layer, then export - save featuers as… Select the format, the filename, change the CRS to 27700, and select “Add saved file to map”. The postboxes are now mapped to BNG.&lt;/p&gt;

&lt;p&gt;To find the post box the furthest away from any other postbox, I need a formula to calculate the distance to the second nearest postbox, because the closest postbox to a postbox is itself..&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; distance(
  $geometry,
  array_get(
    overlay_nearest(
      layer := &apos;&amp;lt;point_layer_name&amp;gt;&apos;,
      expression := $geometry,
      limit := 2
    ),
    1
  )
 )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;pop this into the field calculator, replacing &lt;point_layer_name&gt; with the name of the postbox layer. Give the output field a name - Distance in this case - and click OK. This now adds a value to each postbox of the distance to the next postbox.&lt;/point_layer_name&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/FieldCalc.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/FieldCalc.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/distances1.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/distances1.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Now I can order the distance column by size, and zoom to the postbox the most remote from any other, and see that it is the one on the wall of the village shop on the Isle of Colonsay, 24724m (or 24.72km) from the next nearest postbox.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/Colonsay1.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Colonsay1.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://maps.app.goo.gl/Smw8tBJDuEoNWpq99&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/colonsay_google.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A google Streetview of Colonsay general store, a small grey building under a lovely blue sky, with various vehicles parked outside.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The next most remote is the postbox on Lundy, in the Bristol Channel, 21.73km from the next postbox on the North Devon Coast (but see below..)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/Lundy.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Lundy.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.geograph.org.uk/photo/1339472&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/LundyPost.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Lundy’s Postbox in this Geograph image taken by &lt;a href=&quot;https://www.geograph.org.uk/profile/13903&quot;&gt;Pauline E&lt;/a&gt; in 2009. A red postbox with no cypher is set in a stone wall next to a window. Sat in the window is a model of a puffin.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The postbox in the hamlet of Altnaharra in Sutherland is the most remote postbox on the British Mainland, 20.94km in a straight line from the next postbox on the B871 to the North East.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/Altnaharra.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Altnaharra.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://maps.app.goo.gl/y8891JY2Ws7zqBgS7&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Altnaharra_google.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A google streetview image of a small red postbox on a post, by a chestnut paling fence infront of a windowless white one-story building, probably an old telephone exchange. There’s a tree behind the postbox.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Fourth is Garrison, a village in Northern Ireland in Enniskillen near the border with the Republic. I don’t have the postboxes south of the border, so there may very well be one closer, but it’s 18.43km from the next postbox&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/Garrison.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Garrison.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://maps.app.goo.gl/KF6HgpYT9H5kjHG8A&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Garrison-google.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A street under a grey sky, with a yellow painted building and a road lined with parked cars. Between the cars is a small postbox on a pole.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Finally, the 5th most remote is on the Isle of Eigg, on the small isles,  14.44km from the next postbox&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/SmallIsles.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/SmallIsles.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://maps.app.goo.gl/o9d5otXfA5jAaCbL9&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/Eigg-google.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Google streetview of a white L-shaped single story building on a small road with a car park next to it. People are milling abour; white houses dot the gentle slope rising in the distance. THe sea behind it and the sky above are glorious blue in the sunshine.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;HOWEVER! Lundy isn’t technically a Royal Mail postbox. You can post letters there, but you have to affix a &lt;a href=&quot;https://www.landmarktrust.org.uk/lundyisland/discovering-lundy/lundy-post/&quot;&gt;Lundy Postage Stamp&lt;/a&gt; as well as a UK stamp, to pay for carriage to the post office in Ilfracombe on the mainland, and nowadays the Postbox has been painted blue.&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/LundyStamps.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/LundyStamps.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;An orange 33p Lundy stamp and a green Lundy 5p stamp affixed to the bottom left corner of a white enveleope. Both have woodcuts of puffins on them.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;So discounting Lundy, the next most remote postbox after Eigg are also on the small isles - a draw between the islands of Rum and Canna, both the closest to each other, at 14.16km apart&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io//assets/images/postbox/SmallIsles.png&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/SmallIsles.png&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.geograph.org.uk/photo/5085054&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/CannaPO.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Canna’s Post Office on Geograph, with this pic taken by &lt;a href=&quot;https://www.geograph.org.uk/profile/1876&quot;&gt;Gordon Brown&lt;/a&gt; in 2016. A ref telephone box that’s seen better days stands on the grass in front of a green shed, with the sign “Eilean Chanach - Canna Post Office” above the door and a small red postbox on a pole in front. A large satelite dish is stood next to the Post Office, and to the right of the picture a couple of pallets are leaning against the white washed wall of a building.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://www.geograph.org.uk/photo/7183797&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io//assets/images/postbox/RumPO.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Rum’s Post Office and post box in this photo taken in 2022 by &lt;a href=&quot;https://www.geograph.org.uk/profile/15498&quot;&gt;M J Richardson&lt;/a&gt;. A large wooden single story building is the islands’ community hall, to the left is a small annex that houses the post office. Some picnic benches are on the grass out front and at the edge of the building near some wheely bins is a small postbox.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>sarah</name></author><category term="GIS" /><category term="GIS" /><summary type="html">a red “Type A” pillar postbox</summary></entry><entry><title type="html">Ailsa Craig</title><link href="https://sarahdal.github.io//uav/2024/07/13/AilsaCraig.html" rel="alternate" type="text/html" title="Ailsa Craig" /><published>2024-07-13T00:00:00+01:00</published><updated>2024-07-13T00:00:00+01:00</updated><id>https://sarahdal.github.io//uav/2024/07/13/AilsaCraig</id><content type="html" xml:base="https://sarahdal.github.io//uav/2024/07/13/AilsaCraig.html">&lt;hr /&gt;

&lt;p&gt;Nesting in colonies of tens of thousands of pairs, the rocky cliffs and islands around the UK hold over half of the world’s population of Northern Gannet (&lt;em&gt;Morus bassanus&lt;/em&gt;), with the world’s largest colony being Bass Rock in the Firth of Forth (75,000 pairs) and the colony on Saint Kilda (60,000 pairs).&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_091304.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_091304.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A Gannet stands on a granite rock. A large white bird with a yellow hue on the head, long blue-grey bill, and striking blue eyes. Sadly this one has a broken wing - which is why I could get close enough for a pic&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Traditionally these huge colonies are counted by aerial photography, and only really need a detailed count about once a decade. With these birds being impacted extremely badly by HPAI in 2022 and 2023, new counts are now being undertaken by drone, which is a lot easier (in theory) and cheaper than paying for dedicated photography from an aircraft. I’ve never carried out drone photography of cliff nesters so was asked if I’d like to help out with the count at Ailsa Craig, a lump of volcanic rock 16km (10 miles) off the coast of Ayrshire in South West Scotland.&lt;/p&gt;

&lt;p&gt;(Note - I was too busy paying attention to the drone flying to actually take many pictures of birds, so this post is really about the scenery)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/FromGirvan.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/FromGirvan.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Viewed from Girvan, looking out across the beach to the dome-shape of Ailsa Craig on the horizon.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Ailsa Craig is famed for being the source of the finest granite for making Curling Stones. A local company holds the sole licence to quarry here, and takes granite off the island about once a decade, most recently just this winter and youtuber Ruth Aisling made a &lt;a href=&quot;https://youtu.be/lTjOoeR0iFY&quot;&gt;fantastically informative video about the whole process&lt;/a&gt; so you can watch that rather than me try to explain.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_132238.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_132238.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Rocky Ailsa Craig in the sun, cliffs white with seabirds with patches of green vegetation. Gannets swirl in the blue sky above.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_133236.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_133236.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Ailsa Craig viewed on approach from the boat, the lighthouse and assorted buildings around it can be seen above a rocky beach. Behind them the more grassy, but still steep, southern slopes of the rock rise above them.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The boat trip is about an hour out of Girvan, and includes a circuit of the island so we could see the dramatic cliffs rising out of the water, covered in nesting seabirds - Gannets are the most obvious, but colonies of guillemots, razorbills, kittiwakes, fulmar, and, on some of the steep grassy slopes, puffins ambling about between their burrows. Tysties (black guillemots) were on the water, although I couldn’t spot any on the cliffs.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_131633.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_131633.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A closer view of Ailsa Craig in the sun, cliffs white with seabirds tower about 200m over the sea, capped with a grassy dome.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Dozens of Manx shearwaters flew past the boat as well, presumably these nest on the island now, especially after rats were eradicated in the early 90s, but breeding has yet to be proven. You can read about the first succesful rat eradication in the UK in this &lt;a href=&quot;https://web.archive.org/web/20220120073100/https://www.ayrshire-birding.org.uk/2001/01/ailsa_craig_before_and_after_the_eradication_of_rats_in_1991/&quot;&gt;2001 article&lt;/a&gt; by Bernie Zofrillo, who led the eradication project in the 1990s.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_140850.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_140850.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Under a blue sky, a brick building with a collapsed curved roof stands in a grassy rocky area, surrounded by dry stone walls. Behind it, the steep slopes of the island with rocky outcrops. Two tents are pitched by the building.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Once on the island, we pitched our tents by the old gas works. This was where coal gas was generated to power the lighthouse and foghorns until 1911, when the lamp was switched to parafin. The flat part of the island is covered in remains from both the lighthouse and quarrying infrastructure, with a 3-foot gauge rail for the lighthouse still in place, and plenty of tracks and evidence of quarrying. The lighthouse is still operational, and being painted by three workmen when we were on the island.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_134704.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_134704.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Inside the brick gasworks building, the curved rails that held the roof cast shadows on the concrete floor, and apart from some pieces of wood and brick, the space is empty.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_153733.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_153733.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A small concrete hut with brocken windows and a green door. A rusted rail line runs past it, small plants growing from the rabbit-cropped grass that surround it. This held an engine that hauled trucks up the rails from the pier.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_153802.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_153802.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Looking through a window frame into the hut, which houses a large rusty engine with a drive wheel and exhaust pipe. On the windowledge someone has placed a radio-casette player from circa 1986.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/lighthouserails.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/lighthouserails.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Rusted overgrown rails curve away to a single story building with empty windows and doorframes and peeling white paint, the lighthouse cottages that are now seperate from the operational lighthouse behind.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_153659.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_153659.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A ruined single story cottage with a window either side of the door. The roof has long collapsed. This was the “tennant’s cottage”.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;In the afternoon sunshine, we walked from the lighthouse clockwise along the track left by this winter’s rock extraction, we passed the south foghorn, on top of a concrete dome and with compressed air cannisters rusting alongside. Huge boulders litter the shore line, we walked as far as “Trammins” and flew the drone to take photographs of the gannets nesting on the 200m high cliffs towering above.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_143557.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_143557.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A large concrete dome rises out of a grassy slope. On top is a rusted horn, the foghorn, which was powered by compressed gas (generated by coal gas and then diesel) until the 1960s.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_144501.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_144501.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Granite cliffs tower above a rocky grass slope. Large white birds - gannets - wheel in the blue sky above.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;After a succesful flight, we returned for a peaceful evening of birding and an early night. I slept very well in my tent, and we were up at 6 but had to wait for the low cloud to shift and the tide to go out a little before walking anti-clockwise this time, following a trackway that carried the piped gas to power the north foghorn. In places it bridged inlets, these were rusted away so we dropped to the beach then climbed back up the other side.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_083558.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_083558.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A narrow concrete walkway crosses the rocky beach. Where there are narrow inlets in the steep rock, it is bridged with rotten wooden and partiually missing slats across rusted metal framework.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We also stopped at the remains of the old North Quarry, and puzzled a bit at vast piles of stone with cylinders cut out, and the stone cylinders themselves, before it clicked that these were where they used to cut out the basic curling stone shape before shipping them off the island, presumably easier to do so and ship off here before larger boats and trucks made taking whole boulders off the easiest method.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_160127.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_160127.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A pile of granite rocks, smooth and grey, but many of them are cylindrical shaped. Each cylinder is about 30 cm in diameter and a little taller lengthwise. There’s also some rusted bits of old machinery.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Tempted to take a “raw” curling stone back with us but a little heavy for our backpacks, we walked on, past the northern foghorn.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_161001.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_161001.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;The northern foghorn, another tall concrete dome with a rsuted horn on top. This time I am stood on the walkway, and we can see the rusted old compressed air tanks to the left of the walkway, and at the end, a steep and rusted ladder climbing up to an empty doorway in the dome, through which we can see daylight and some more rusted machinery inside. There’s a steep cliff to the left and the rocky beach falls away to the right.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We passed a dry seacave, and had a look inside - nothign but bones of seals and rabbits, but then we spotted a few pieces of graffiti, from 1923 and 1886.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_161639.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240712_161639.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Neatly carved into the granite of the cave, in a serif hand, is “MARCH 15TH / ALEXR THOMSON / 1886 / AILSA CRAIG / GIRVAN. Underneath is possibly a carved image of something, but it cannot be made out.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Our walk took us close to a very low colony of Auks (no pics - we were concentrating on getting past them as quickly as possible to minimise disturbance). This colony could not have existed when rats were on the island. Elsewhere steep cliffs protect these birds from losing their eggs and chicks to predation, but here on the ground there’s no defence. Wonderful to see, therefore, a growth in the colony thanks to the lack of danger.&lt;/p&gt;

&lt;p&gt;Soon we were underneath the main Gannetry on the vast cliffs, and carried out the drone survey. The south-west point of Ailsa Craig holds a deep seacave that makes walking a loop of the island impossible, so once complete we walked back the way we came, passing a simple wooden structure that looked like a very old watcher’s hide?&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_102830.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_102830.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;My colleague walking ahead over the shore, which is made up of huge rocky boulders. Above him tower the cliffs.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_102913.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_102913.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Splattered with guano, bits of rotting wood and stacked up stones are the remains of some sort of simple structure here. Above auks - guillemots, puffins and razorbills - swirl in the sky. Looking across the sea behind, the isle of Arran can be seen on the horizon.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;We returned and found we still had a good few hours before the boat. I climbed the incredibly steep and loose path through thick bracken, reaching the castle, a stone 16th century tower. Just above it, as I carried on up the slope, was a tanked spring, one of four on the island. (the main source of water for our trip was me knocking at the lighthouse and asking if we could have a bottle of water when we realised we hadn’t brought enough)&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_112520.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_112520.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Looking up a steep slope covered in vegeation and pink-purple flowering bracken, a square tower sits on the horizon under a blue sky. This is the Castle.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_113656.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_113656.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Just above the castle is a concrete basin in the dense ferns on the slope. It’s fed by a spring, this is Castle Spring (obvs)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Through the bracken, I could follow the path a little further, but then lost it in the bracken on the rocky slope. I didn’t feel like going any further, so went back to the castle for a sandwich and a chat with a kayaker who had just arrived.&lt;/p&gt;

&lt;p&gt;After returning down the hill, I explored the buildings more, and chatted with daytrippers (birders) who’d been dropped off. The old Quarry Master’s Cottage was used by the local ringing group until the roof collapsed, which is a real shame, but I imagine the costs of maintaining and repairing buildings out here is pretty significant.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_111821.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_111821.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;A small white building with a flat roof sits at the base of the hill. The tower of the castle can be seen on the slope above.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_111917.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/20240713_111917.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Inside the small white building. The roof has collapsed and daylight can be seen on the bare stone wall where the plaster has fallen off. Next to it is a fireplace, still with lamps and candleholders on the manelpiece. A coat is hung on the wall, and a chair with a floral pattern sites at a table on which is a table cloth and various unidentifiable things, jars, a bottle, a wooden puffin, books. The collapsed ceiling covers the rest of the floor and bracken grows up at the back of the room.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;What a great trip out! I feel very lucky to have been allowed to camp on the island and have the time to explore it fully. You can get a trip out from the port of Girvan in Ayrshire, it’s about an hour to the island, you get 2 hours ashore, and then a trip around the island and back again. Very much worthwhile. And they might let you cuddle a lobster on the boat back.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;&lt;a href=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/lobste_me.jpg&quot;&gt;&lt;img src=&quot;https://sarahdal.github.io/pics/media/large/AilsaCraig/lobste_me.jpg&quot; alt=&quot;Image&quot; /&gt;&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Me, grinning, on a boat, holding a large blue lobster. Two older women stand behind me.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>sarah</name></author><category term="UAV" /><category term="Birding" /><category term="UAV" /><category term="history" /><summary type="html"></summary></entry></feed>